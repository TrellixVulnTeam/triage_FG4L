<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:52:20 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2431/PIG-2431.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2431] Upgrade bundled hadoop version to 1.0.0</title>
                <link>https://issues.apache.org/jira/browse/PIG-2431</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig bundles hadoop 20.2 for local mode and unit tests. 20.2 is pretty old, we&apos;d better upgrade to a newer version.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12535419">PIG-2431</key>
            <summary>Upgrade bundled hadoop version to 1.0.0</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Dec 2011 08:20:52 +0000</created>
                <updated>Mon, 23 Jan 2012 07:31:12 +0000</updated>
                            <resolved>Thu, 12 Jan 2012 22:00:05 +0000</resolved>
                                    <version>0.9.1</version>
                    <version>0.10.0</version>
                    <version>0.11</version>
                                    <fixVersion>0.9.2</fixVersion>
                    <fixVersion>0.10.0</fixVersion>
                    <fixVersion>0.11</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13177347" author="daijy" created="Thu, 29 Dec 2011 19:42:17 +0000"  >&lt;p&gt;Unit tests pass.&lt;/p&gt;</comment>
                            <comment id="13178625" author="daijy" created="Tue, 3 Jan 2012 04:52:07 +0000"  >&lt;p&gt;Unit tests pass on 0.9 branch as well.&lt;/p&gt;</comment>
                            <comment id="13179128" author="alangates" created="Tue, 3 Jan 2012 23:33:15 +0000"  >&lt;p&gt;+1, changes look good.&lt;/p&gt;</comment>
                            <comment id="13181660" author="daijy" created="Fri, 6 Jan 2012 22:43:10 +0000"  >&lt;p&gt;Patch committed to 0.9/0.10/trunk.&lt;/p&gt;</comment>
                            <comment id="13182740" author="thw" created="Mon, 9 Jan 2012 19:40:27 +0000"  >&lt;p&gt;After this patch, we see unit tests fail on some machines while they work on others with the following error:&lt;/p&gt;

&lt;p&gt;12/01/09 19:36:13 WARN datanode.DataNode: Invalid directory in dfs.data.dir: Incorrect permission for build/test/data/dfs/data/data1, expected: rwxr-xr-x, while actual: rwxrwxr-x&lt;br/&gt;
12/01/09 19:36:13 WARN datanode.DataNode: Invalid directory in dfs.data.dir: Incorrect permission for build/test/data/dfs/data/data2, expected: rwxr-xr-x, while actual: rwxrwxr-x&lt;br/&gt;
12/01/09 19:36:13 ERROR datanode.DataNode: All directories in dfs.data.dir are invalid.&lt;/p&gt;

&lt;p&gt;Reverting back to 20.2 makes the test pass.&lt;/p&gt;

</comment>
                            <comment id="13182934" author="thw" created="Mon, 9 Jan 2012 23:47:23 +0000"  >&lt;p&gt;It turns out that umask does not work as expected for newly created directories on the problem environments and this causes 20.205 mini cluster to bail. I tried to set 775 via junit command line:&lt;/p&gt;

&lt;p&gt;ant -Ddfs.datanode.data.dir.perm=775 -Dtestcase=TestBuiltin test-commit&lt;/p&gt;

&lt;p&gt;or by setting it in MinCluster.java:&lt;/p&gt;

&lt;p&gt;m_conf.set(&quot;dfs.datanode.data.dir.perm&quot;, &quot;775&quot;);&lt;/p&gt;

&lt;p&gt;neither of above works. How can I set the expected directory permission for the mini cluster in the unit tests?&lt;/p&gt;</comment>
                            <comment id="13182941" author="daijy" created="Tue, 10 Jan 2012 00:09:12 +0000"  >&lt;p&gt;The error seems complaining local file system:&lt;br/&gt;
12/01/09 00:19:46 WARN datanode.DataNode: Invalid directory in dfs.data.dir: Incorrect permission for build/test/data/dfs/data/data1, expected: rwxr-xr-x, while actual: rwxrwxr-x&lt;br/&gt;
12/01/09 00:19:46 WARN datanode.DataNode: Invalid directory in dfs.data.dir: Incorrect permission for build/test/data/dfs/data/data2, expected: rwxr-xr-x, while actual: rwxrwxr-x&lt;/p&gt;</comment>
                            <comment id="13182983" author="daijy" created="Tue, 10 Jan 2012 01:19:26 +0000"  >&lt;p&gt;Temporary rollback the patch until we solve the build issue.&lt;/p&gt;</comment>
                            <comment id="13182985" author="daijy" created="Tue, 10 Jan 2012 01:24:20 +0000"  >&lt;p&gt;In the mean time, I attach a patch to go hadoop 1.0.0 directly.&lt;/p&gt;</comment>
                            <comment id="13184590" author="daijy" created="Thu, 12 Jan 2012 00:29:56 +0000"  >&lt;p&gt;Looks like the umask issue is due to extended ACL control on the build machine. Removing extented ACL control should solve the problem:&lt;/p&gt;

&lt;p&gt;setfacl -b dir_name&lt;/p&gt;</comment>
                            <comment id="13184627" author="kaykay.unique" created="Thu, 12 Jan 2012 01:08:53 +0000"  >&lt;p&gt;If the tests were failing due to build env issues, would that mean this patch is going into the tree sometime soon ? &lt;/p&gt;</comment>
                            <comment id="13184656" author="daijy" created="Thu, 12 Jan 2012 01:45:02 +0000"  >&lt;p&gt;I would like to check in soon if all known issues are solved.&lt;/p&gt;</comment>
                            <comment id="13185274" author="daijy" created="Thu, 12 Jan 2012 21:54:37 +0000"  >&lt;p&gt;Seems all the pending issues are solved. I am going to commit the patch.&lt;/p&gt;</comment>
                            <comment id="13185281" author="daijy" created="Thu, 12 Jan 2012 22:00:05 +0000"  >&lt;p&gt;Patch committed to 0.9/0.10/trunk. Thanks folks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12536551">MAPREDUCE-3606</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12508020" name="PIG-2431-1.patch" size="1156" author="daijy" created="Tue, 20 Dec 2011 02:01:35 +0000"/>
                            <attachment id="12508877" name="PIG-2431-2.patch" size="3749" author="daijy" created="Thu, 29 Dec 2011 19:42:17 +0000"/>
                            <attachment id="12509990" name="PIG-2431-3.patch" size="4029" author="daijy" created="Tue, 10 Jan 2012 01:24:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 3 Jan 2012 23:33:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>221103</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy3tpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56137</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>