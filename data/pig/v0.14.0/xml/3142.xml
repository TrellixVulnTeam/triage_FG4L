<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:05:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3142/PIG-3142.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3142] Fixed-width load and store functions for the Piggybank</title>
                <link>https://issues.apache.org/jira/browse/PIG-3142</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Adds load/store functions for fixed width data to the Piggybank. They use the syntax of the unix &quot;cut&quot; command to specify column positions, and have an option to skip the header row when loading or to write a header row when storing.&lt;/p&gt;

&lt;p&gt;The header handling works properly with multiple small files each with a header being combined into one split, or a large file with a single header being split into multiple splits.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12629580">PIG-3142</key>
            <summary>Fixed-width load and store functions for the Piggybank</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jpacker">Jonathan Packer</assignee>
                                    <reporter username="jpacker">Jonathan Packer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Jan 2013 20:40:20 +0000</created>
                <updated>Mon, 14 Oct 2013 17:46:14 +0100</updated>
                            <resolved>Sat, 2 Mar 2013 00:01:07 +0000</resolved>
                                    <version>0.11</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>piggybank</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13564659" author="jpacker" created="Mon, 28 Jan 2013 20:40:58 +0000"  >&lt;p&gt;Patch adds FixedWidthLoader, FixedWidthStorage, and unit tests as per the issue description.&lt;/p&gt;</comment>
                            <comment id="13566673" author="alangates" created="Wed, 30 Jan 2013 17:36:41 +0000"  >&lt;p&gt;Is this patch ready for review?  If so, you want to click the submit patch button so committers know to review it.&lt;/p&gt;</comment>
                            <comment id="13566741" author="jpacker" created="Wed, 30 Jan 2013 18:38:43 +0000"  >&lt;p&gt;Submitted patch for review, thanks.&lt;/p&gt;</comment>
                            <comment id="13582417" author="jpacker" created="Wed, 20 Feb 2013 18:59:20 +0000"  >&lt;p&gt;Updated patch has FixedWidthLoader implement pushProjection.&lt;/p&gt;</comment>
                            <comment id="13589116" author="cheolsoo" created="Thu, 28 Feb 2013 02:41:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpacker&quot; class=&quot;user-hover&quot; rel=&quot;jpacker&quot;&gt;Jonathan Packer&lt;/a&gt;, thank you very much for the patch! This looks very useful. I have a few minor comments:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Can you move the following code to prepareToRead() and remove requiredFieldsInitialized? The comment in LoadFunc says &quot;This (prepareToRead) will be called during execution before any calls to getNext&quot;, so I think this kind of initialization should be done there not in getNext().
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;FixedWidthLoader.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!requiredFieldsInitialized) {
+            UDFContext udfc = UDFContext.getUDFContext();
+            Properties p = udfc.getUDFProperties(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getClass(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] { udfContextSignature });
+            requiredFields = (&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;[]) ObjectSerializer.deserialize(p.getProperty(REQUIRED_FIELDS_SIGNATURE));
+
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (requiredFields != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+                numRequiredFields = 0;
+                &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; requiredFields.length; i++) {
+                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (requiredFields[i])
+                        numRequiredFields++;
+                }
+            }
+            
+            requiredFieldsInitialized = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In fact, I found almost all LoadFunc implementations (including PigStorage) do the same trick. Looking at the commit history, I believe that this is a legacy pattern that was introduced before the LoadFunc resign. It seems that we never cleaned up this pattern when merging the LoadFunc redesign to trunk. At least, let&apos;s stop using it from now on. &lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;Can you update the usage messages with Apache Pig namespace?
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;FixedWidthLoader.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;Usage: com.mortardata.pig.FixedWidthLoader(&quot;&lt;/span&gt; +
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Also, the usage message in FixedWidthStorage incorrectly refers to FixedWidthLoader.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;FixedWidthStorage.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;Usage: com.mortardata.pig.FixedWidthLoader(&quot;&lt;/span&gt; +
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Can you factor out parseColumnSpec(String spec) and reuse it in both FixedWidthLoader and FixedWidthStorage instead have duplicate code?&lt;/li&gt;
	&lt;li&gt;Can you rename FixedWidthStorage to FixedWidthStorer? I think Storage refers to Loader + Storer (e.g. PigStorage, AvroStorage, etc). So FixedWidthStorer is probably a better name (e.g. HCatStorer).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please let me know what you think. Thanks!&lt;/p&gt;</comment>
                            <comment id="13591037" author="jpacker" created="Fri, 1 Mar 2013 22:40:30 +0000"  >&lt;p&gt;Hi Cheolsoo, I made the changes you requested and put them in the updated patch &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3142&quot; title=&quot;Fixed-width load and store functions for the Piggybank&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3142&quot;&gt;&lt;del&gt;PIG-3142&lt;/del&gt;&lt;/a&gt;_update_2.diff&quot;. &lt;/p&gt;

&lt;p&gt;My way of factoring out parseColumnSpec was a bit clunky (static method, so FixedWidthStorer calls FixedWidthLoader.parseColumnSpec), but I didn&apos;t think it was worth making a whole new file for just one method.&lt;/p&gt;</comment>
                            <comment id="13591095" author="cheolsoo" created="Fri, 1 Mar 2013 23:38:01 +0000"  >&lt;p&gt;+1. I will commit it after running tests.&lt;/p&gt;</comment>
                            <comment id="13591122" author="cheolsoo" created="Sat, 2 Mar 2013 00:01:07 +0000"  >&lt;p&gt;Committed to trunk. Thank you Jonathan!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12571674" name="PIG-3142_update_2.diff" size="43447" author="jpacker" created="Fri, 1 Mar 2013 22:40:30 +0000"/>
                            <attachment id="12570169" name="fixed-width-updated.patch" size="45255" author="jpacker" created="Wed, 20 Feb 2013 18:59:20 +0000"/>
                            <attachment id="12566818" name="fixed-width.patch" size="41115" author="jpacker" created="Mon, 28 Jan 2013 20:40:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 Jan 2013 17:36:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310076</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzbd3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310421</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>