<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:08:58 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2663/PIG-2663.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2663] Expose helpful ScriptState methods</title>
                <link>https://issues.apache.org/jira/browse/PIG-2663</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The &lt;tt&gt;ScriptState.getAlias(MapReduceOper mro)&lt;/tt&gt; and &lt;tt&gt;ScriptState.getFeature(MapReduceOper mro)&lt;/tt&gt; methods are useful in implementations of &lt;tt&gt;PigProgressNotificationListener&lt;/tt&gt;. I&apos;d like to make them public.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12552251">PIG-2663</key>
            <summary>Expose helpful ScriptState methods</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="billgraham">Bill Graham</assignee>
                                    <reporter username="billgraham">Bill Graham</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Apr 2012 07:30:23 +0100</created>
                <updated>Fri, 22 Feb 2013 04:53:46 +0000</updated>
                            <resolved>Tue, 1 May 2012 23:57:27 +0100</resolved>
                                                    <fixVersion>0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13260286" author="billgraham" created="Tue, 24 Apr 2012 07:36:14 +0100"  >&lt;p&gt;Initial patch for review.&lt;/p&gt;</comment>
                            <comment id="13263231" author="alangates" created="Fri, 27 Apr 2012 00:04:49 +0100"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13263252" author="julienledem" created="Fri, 27 Apr 2012 00:37:17 +0100"  >&lt;p&gt;What about moving getAlias() and getFeature() to instance methods MapReduceOper ?&lt;br/&gt;
those methods do not really belong to ScriptState.&lt;br/&gt;
related: &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2659&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-2659&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13264221" author="billgraham" created="Sat, 28 Apr 2012 06:15:39 +0100"  >&lt;p&gt;That seems reasonable. So we&apos;d also then move AliasVisitor and FeatureVisitor to MapReduceOper too.&lt;/p&gt;

&lt;p&gt;What about the local cache of MapReduceOper to Aliases and Features that ScriptState holds on to? That would need to stay in ScriptState since that class has the entire plan in scope. Calling those methods would be more efficient then repeatedly calling MapReduceOper.getAlias() since you don&apos;t need to re-walk each time. Maybe that&apos;s ok.&lt;/p&gt;

&lt;p&gt;Ideally MapReduceOper could lazy load a reference to it&apos;s alias and feature when its methods are first called, but that class isn&apos;t immutable so I don&apos;t think that would fly.&lt;/p&gt;</comment>
                            <comment id="13265597" author="billgraham" created="Tue, 1 May 2012 02:45:08 +0100"  >&lt;p&gt;@Julien I looked some more into moving those methods to MapReduceOper and getAlias is pretty straightforward but getPigFeature poses more issues.&lt;/p&gt;

&lt;p&gt;Currently MapReduceOper has a private OPER_FEATURE enum that it sets internally and uses to answer a dozen or so isFoo methods (i.e. isSampler isGroupBy). ScriptState.getPigFeature calls those MapReduceOper.isFoo methods to then map to a package-private PIG_FEATURE enum.&lt;/p&gt;

&lt;p&gt;If we moved getPigFeature into MapReduceOper we&apos;d probably want to move PIG_FEATURE with it and we&apos;d need to make it public. We&apos;d then have a private OPER_FEATURE and a &lt;b&gt;public&lt;/b&gt; PIG_FEATURE in the same class, along with a getPigFeature method and a bunch of isFoo methods. I worry we&apos;d make the MapReduceOper API and it&apos;s implementation more confusing, without a significant refactoring. (Or a counter-argument could be made that it&apos;s simplifying because we won&apos;t have feature logic in two class in two packages. Once class gets more confusing, but logic gets centralized.)&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="13265925" author="dvryaboy" created="Tue, 1 May 2012 18:30:49 +0100"  >&lt;p&gt;Sounds like a bigger refactor than we bargained for here.&lt;br/&gt;
I think initial patch is ok. We can do a separate refactoring pass separately.&lt;/p&gt;</comment>
                            <comment id="13266217" author="billgraham" created="Tue, 1 May 2012 23:57:27 +0100"  >&lt;p&gt;Committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12523935" name="PIG-2663.1.patch" size="862" author="billgraham" created="Tue, 24 Apr 2012 07:36:14 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 26 Apr 2012 23:04:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>237001</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaym7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97919</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>