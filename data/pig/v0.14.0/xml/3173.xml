<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:11:04 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3173/PIG-3173.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3173] Partition filter push down does not happen partition keys condition include a AND and OR construct</title>
                <link>https://issues.apache.org/jira/browse/PIG-3173</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;A = load &apos;db.table&apos; using org.apache.hcatalog.pig.HCatLoader();&lt;br/&gt;
B = filter A by (region==&apos;usa&apos; AND dt==&apos;201302051800&apos;) OR (region==&apos;uk&apos; AND dt==&apos;201302051800&apos;);&lt;br/&gt;
C = foreach B generate name, age;&lt;br/&gt;
DUMP C;&lt;/p&gt;

&lt;p&gt;gives the below warning and scans the whole table.&lt;/p&gt;

&lt;p&gt;2013-02-06 22:22:16,233 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; WARN  org.apache.pig.newplan.PColFilterExtractor  - No partition filter push down: You have an partition column (region ) in a construction like: (pcond  and ...) or (pcond and ...) where pcond is a condition on a partition column.&lt;br/&gt;
2013-02-06 22:22:16,233 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; WARN  org.apache.pig.newplan.PColFilterExtractor  - No partition filter push down: You have an partition column (datestamp ) in a construction like: (pcond  and ...) or (pcond and ...) where pcond is a condition on a partition column.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12631473">PIG-3173</key>
            <summary>Partition filter push down does not happen partition keys condition include a AND and OR construct</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Feb 2013 16:16:17 +0000</created>
                <updated>Mon, 14 Oct 2013 17:46:10 +0100</updated>
                            <resolved>Mon, 29 Apr 2013 22:20:42 +0100</resolved>
                                    <version>0.10.1</version>
                                    <fixVersion>0.12.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13607087" author="rohini" created="Wed, 20 Mar 2013 00:17:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/10035/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/10035/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13635749" author="alangates" created="Thu, 18 Apr 2013 22:58:17 +0100"  >&lt;p&gt;Canceling patch until feedback from Dmitriy is addressed.&lt;/p&gt;</comment>
                            <comment id="13644683" author="cheolsoo" created="Mon, 29 Apr 2013 18:52:43 +0100"  >&lt;p&gt;If I understand comments on RB, there is no real issue with the patch other than that we can do better on the &apos;(A and B) or (C and D)&apos; case.&lt;/p&gt;

&lt;p&gt;Currently, Pig rejects all of the following expressions even if A, B, C, and D are all partition conditions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;(A and B) or (C and D)&lt;/li&gt;
	&lt;li&gt;(A and B) or C&lt;/li&gt;
	&lt;li&gt;A or (C and D)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;But this patch at least lets Pig push down expressions when A, B, C, and D are ALL partition conditions. IMO, this alone is a big win. Can we get this patch in and do further optimization on the &apos;(A and B) or (C and D)&apos; case in a separate jira?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13644711" author="rohini" created="Mon, 29 Apr 2013 19:17:00 +0100"  >&lt;p&gt;&amp;gt; But this patch at least lets Pig push down expressions when A, B, C, and D are ALL partition conditions. IMO, this alone is a big win. Can we get this patch in and do further optimization on the &apos;(A and B) or (C and D)&apos; case in a separate jira?&lt;br/&gt;
  Sure. I had started on the optimization patch but I did not complete it before leaving for vacation. Wanted to be careful as there was lot of change and I had to almost evaluate the whole tree and ensure it works for all combinations as we are extracting partial conditions. I will create a separate jira for that and put the patch later. I will update this patch (first one had a bug) with just pushing down all partition conditions.&lt;/p&gt;</comment>
                            <comment id="13644852" author="cheolsoo" created="Mon, 29 Apr 2013 21:52:08 +0100"  >&lt;p&gt;+1  to &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3173&quot; title=&quot;Partition filter push down does not happen partition keys condition include a AND and OR construct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3173&quot;&gt;&lt;del&gt;PIG-3173&lt;/del&gt;&lt;/a&gt;-2.patch.&lt;/p&gt;</comment>
                            <comment id="13644872" author="rohini" created="Mon, 29 Apr 2013 22:20:42 +0100"  >&lt;p&gt;Checked into trunk (0.12). Thanks Dmitriy and Cheolsoo&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12659856">PIG-3395</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12645276">PIG-3300</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12574459" name="PIG-3173-1.patch" size="13455" author="rohini" created="Wed, 20 Mar 2013 00:17:28 +0000"/>
                            <attachment id="12581032" name="PIG-3173-2.patch" size="9240" author="rohini" created="Mon, 29 Apr 2013 21:22:44 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Apr 2013 21:58:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311969</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzborz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312315</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>