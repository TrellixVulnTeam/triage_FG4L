<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:03:25 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3434/PIG-3434.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3434] Null subexpression in bincond nullifies outer tuple (or bag)</title>
                <link>https://issues.apache.org/jira/browse/PIG-3434</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;According to docs, for bincond operator &quot;If a Boolean subexpression results in null value, the resulting expression is null&quot; (&lt;a href=&quot;http://pig.apache.org/docs/r0.11.0/basic.html#nulls&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://pig.apache.org/docs/r0.11.0/basic.html#nulls&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;It works as described in plain foreach..generate expression:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;in = load &apos;in&apos;;
out = FOREACH in GENERATE 1, ($0 &amp;gt; 0 ? 2 : 3);
dump out;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in (3 lines, 2nd is empty):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;0

1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;out:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(1,3)
(1,)
(1,2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But if we wrap generated variables in tuple (or bag), we lose the whole 2nd line in output:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;out = FOREACH in GENERATE (1, ($0 &amp;gt; 0 ? 2 : 3));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;out:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;((1,3))
()
((1,2))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12664831">PIG-3434</key>
            <summary>Null subexpression in bincond nullifies outer tuple (or bag)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mwagner">Mark Wagner</assignee>
                                    <reporter username="fedyakov">Pavel Fedyakov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Aug 2013 14:05:39 +0100</created>
                <updated>Fri, 21 Nov 2014 05:59:04 +0000</updated>
                            <resolved>Sat, 11 Oct 2014 08:07:37 +0100</resolved>
                                    <version>0.11</version>
                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13747789" author="mwagner" created="Thu, 22 Aug 2013 20:25:11 +0100"  >&lt;p&gt;I was able to reproduce this. It looks like POUserFunc isn&apos;t handling STATUS_NULL correctly. I&apos;ll make a patch.&lt;/p&gt;</comment>
                            <comment id="13748187" author="mwagner" created="Fri, 23 Aug 2013 02:37:20 +0100"  >&lt;p&gt;Fixed null handling in POUserFunc. It seems like POStatus.STATUS_NULL isn&apos;t being set everywhere e.g. NULL constants have STATUS_OK. That&apos;s the work of another JIRA though, I think.&lt;/p&gt;</comment>
                            <comment id="13757054" author="mwagner" created="Tue, 3 Sep 2013 21:49:33 +0100"  >&lt;p&gt;Some of my other work sneaked in here. I&apos;ll upload a clean patch.&lt;/p&gt;</comment>
                            <comment id="13757057" author="mwagner" created="Tue, 3 Sep 2013 21:54:26 +0100"  >&lt;p&gt;Nevermind, I was confused. This is ready to be reviewed.&lt;/p&gt;</comment>
                            <comment id="13782219" author="daijy" created="Mon, 30 Sep 2013 21:46:11 +0100"  >&lt;p&gt;Looks good. +1.&lt;/p&gt;</comment>
                            <comment id="13782221" author="daijy" created="Mon, 30 Sep 2013 21:49:21 +0100"  >&lt;p&gt;Patch committed to both 0.12 branch and trunk. Thanks Mark!&lt;/p&gt;</comment>
                            <comment id="13786652" author="daijy" created="Fri, 4 Oct 2013 22:36:58 +0100"  >&lt;p&gt;Need to rollback this patch. The following script generate unexpected results:&lt;br/&gt;
in = load &apos;in&apos;;&lt;br/&gt;
out = FOREACH in GENERATE ROUND(($0 &amp;gt; 0 ? 2 : 3));&lt;br/&gt;
dump out;&lt;/p&gt;

&lt;p&gt;out:&lt;br/&gt;
(3)&lt;br/&gt;
(())&lt;br/&gt;
(2)&lt;/p&gt;

&lt;p&gt;The second line should be ().&lt;/p&gt;

&lt;p&gt;The problem is:&lt;br/&gt;
1. Another fix in POUserFunc:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-            res.returnStatus = temp.returnStatus;
+            res.returnStatus = POStatus.STATUS_OK;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The status of the UDF input should be STATUS_OK instead of the status of the last input.&lt;/p&gt;

&lt;p&gt;2. All UDF should be able to handle null input. Even with above mentioned change, the script file with NPE: FloatRound.java:47&lt;br/&gt;
FloatRound is not able to deal with null inputs. Adding null check for all UDF might be too much for 0.12.0. &lt;/p&gt;</comment>
                            <comment id="14168035" author="daijy" created="Sat, 11 Oct 2014 08:07:37 +0100"  >&lt;p&gt;This issue is fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3568&quot; title=&quot;Define the semantics of POStatus.STATUS_NULL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3568&quot;&gt;&lt;del&gt;PIG-3568&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12599560" name="PIG-3434.1.patch" size="26941" author="mwagner" created="Fri, 23 Aug 2013 02:37:20 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Aug 2013 19:25:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344774</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzharz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>345074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>