<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:00:37 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-490/PIG-490.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-490] Combiner not used when group elements referred to in tuple notation instead of flatten.</title>
                <link>https://issues.apache.org/jira/browse/PIG-490</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Given a query like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = load &apos;myfile&apos;;
B = group A by ($0, $1);
C = foreach B generate group.$0, group.$1, COUNT(A);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The combiner will not be invoked.  But if the last line is changed to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
C = foreach B generate flatten(group), COUNT(A);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it will be.  The reason for the discrepancy is because the CombinerOptimizer checks that all of the projections are simple.  If not, it does not use the combiner.  group.$0 is not a simple projection, so this is failed.  However, this is a common enough case that the CombinerOptimizer should detect it and still use the combiner. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12406203">PIG-490</key>
            <summary>Combiner not used when group elements referred to in tuple notation instead of flatten.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas M Nair</assignee>
                                    <reporter username="alangates">Alan Gates</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Oct 2008 22:09:18 +0100</created>
                <updated>Thu, 4 Aug 2011 01:34:58 +0100</updated>
                            <resolved>Sun, 19 Dec 2010 04:00:12 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12859681" author="scott_carey" created="Thu, 22 Apr 2010 07:38:37 +0100"  >&lt;p&gt;Ugh, so that is what is happening and why I almost never see combiners.  I almost always use the &apos;generate group.field1, group.field2&apos; notation instead of flatten because it saves me a line projecting out &quot;group::field1 as field1 ... &quot; in the next line.  If I don&apos;t do the latter it tends to fail to parse when the alias output from the FOREACH is used later.    &lt;/p&gt;

&lt;p&gt;That is to say I avoid FLATTEN(group) because it works around other peculiarities and ends up being harder to use than listing all the fields in the group.&lt;/p&gt;

&lt;p&gt;This is with Pig 0.5.&lt;/p&gt;
</comment>
                            <comment id="12862817" author="olgan" created="Fri, 30 Apr 2010 20:17:52 +0100"  >&lt;p&gt;We have seen users run into this. How much work would this be?&lt;/p&gt;</comment>
                            <comment id="12863417" author="alangates" created="Mon, 3 May 2010 18:38:30 +0100"  >&lt;p&gt;In the current system, a fair amount, just because the code in the combiner optimizer is so byzantine.  I was hoping we could instead reuse the code from the logical optimizer rewrite and thus make it much easier to make this change.&lt;/p&gt;</comment>
                            <comment id="12863427" author="olgan" created="Mon, 3 May 2010 18:48:46 +0100"  >&lt;p&gt;Perhaps a good plan of action would be to try this out with the new optimizer framework. This would give us a chance to experiment with using it at MR layer without moving existing optimizations there. (That would be something we can do in 0.9.0 if the new frameworks proves to be flexible and stable enough by that time.)&lt;/p&gt;</comment>
                            <comment id="12893013" author="thejas" created="Wed, 28 Jul 2010 01:54:08 +0100"  >&lt;p&gt;Moving fix version to 0.9. I am not likely to be able to fix this in time for 0.8 .&lt;/p&gt;</comment>
                            <comment id="12972909" author="thejas" created="Sun, 19 Dec 2010 04:00:11 +0000"  >&lt;p&gt;Fixed as part of changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-750&quot; title=&quot;Use combiner when algebraic UDFs are used in expressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-750&quot;&gt;&lt;del&gt;PIG-750&lt;/del&gt;&lt;/a&gt; .&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12459193">PIG-1297</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Apr 2010 06:38:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66192</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyafev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>