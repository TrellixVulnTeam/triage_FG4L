<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:06:09 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1404/PIG-1404.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1404] PigUnit - Pig script testing simplified. </title>
                <link>https://issues.apache.org/jira/browse/PIG-1404</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The goal is to provide a simple xUnit framework that enables our Pig scripts to be easily:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;unit tested&lt;/li&gt;
	&lt;li&gt;regression tested&lt;/li&gt;
	&lt;li&gt;quickly prototyped&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;No cluster set up is required.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;TestCase&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  @Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testTop3Queries() {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args = {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;n=3&quot;&lt;/span&gt;,        
        };
    test = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PigTest(&lt;span class=&quot;code-quote&quot;&gt;&quot;top_queries.pig&quot;&lt;/span&gt;, args);

    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] input = {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;yahoo\t10&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;twitter\t7&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;facebook\t10&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;yahoo\t15&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;facebook\t5&quot;&lt;/span&gt;,
        ....
    };

    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] output = {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;(yahoo,25L)&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;(facebook,15L)&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;(twitter,7L)&quot;&lt;/span&gt;,
    };

    test.assertOutput(&lt;span class=&quot;code-quote&quot;&gt;&quot;data&quot;&lt;/span&gt;, input, &lt;span class=&quot;code-quote&quot;&gt;&quot;queries_limit&quot;&lt;/span&gt;, output);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;top_queries.pig&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
data =
    LOAD &apos;$input&apos;
    AS (query:CHARARRAY, count:INT);
     
    ... 
    
queries_sum = 
    FOREACH queries_group 
    GENERATE 
        group AS query, 
        SUM(queries.count) AS count;
        
    ...
            
queries_limit = LIMIT queries_ordered $n;

STORE queries_limit INTO &apos;$output&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;They are 3 modes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;LOCAL (if &quot;pigunit.exectype.local&quot; properties is present)&lt;/li&gt;
	&lt;li&gt;MAPREDUCE (use the cluster specified in the classpath, same as HADOOP_CONF_DIR)
	&lt;ul&gt;
		&lt;li&gt;automatic mini cluster (is the default and the HADOOP_CONF_DIR to have in the class path will be: ~/pigtest/conf)&lt;/li&gt;
		&lt;li&gt;pointing to an existing cluster (if &quot;pigunit.exectype.cluster&quot; properties is present)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For now, it would be nice to see how this idea could be integrated in Piggybank and if PigParser/PigServer could improve their interfaces in order to make PigUnit simple.&lt;/p&gt;

&lt;p&gt;Other components based on PigUnit could be built later:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;standalone MiniCluster&lt;/li&gt;
	&lt;li&gt;notion of workspaces for each test&lt;/li&gt;
	&lt;li&gt;standalone utility that reads test configuration and generates a test report...&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It is a first prototype, open to suggestions and can definitely take advantage of feedbacks.&lt;/p&gt;

&lt;p&gt;How to test, in pig_trunk:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Apply patch
$pig_trunk ant compile-test
$pig_trunk ant
$pig_trunk/contrib/piggybank/java ant test -Dtest.timeout=999999
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(it takes 15 min in MAPREDUCE minicluster, tests will need to be split in the future between &apos;unit&apos; and &apos;integration&apos;)&lt;/p&gt;

&lt;p&gt;Many examples are in:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
contrib/piggybank/java/src/test/java/org/apache/pig/piggybank/test/pigunit/TestPigTest.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When used as a standalone, do not forget commons-lang-2.4.jar and the HADOOP_CONF_DIR to your cluster in your CLASSPATH.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12463613">PIG-1404</key>
            <summary>PigUnit - Pig script testing simplified. </summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="romainr">Romain Rigaux</assignee>
                                    <reporter username="romainr">Romain Rigaux</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 May 2010 00:05:24 +0100</created>
                <updated>Fri, 17 Dec 2010 22:44:18 +0000</updated>
                            <resolved>Thu, 19 Aug 2010 05:35:08 +0100</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="12863558" author="romainr" created="Tue, 4 May 2010 00:09:29 +0100"  >&lt;p&gt;First prototype.&lt;/p&gt;</comment>
                            <comment id="12863560" author="romainr" created="Tue, 4 May 2010 00:13:05 +0100"  >&lt;p&gt;First prototype.&lt;/p&gt;</comment>
                            <comment id="12863579" author="romainr" created="Tue, 4 May 2010 01:31:16 +0100"  >&lt;p&gt;piggybank.jar needs org.apache.commons.lang.StringUtils for now.&lt;/p&gt;</comment>
                            <comment id="12865340" author="alangates" created="Fri, 7 May 2010 23:26:44 +0100"  >&lt;p&gt;This looks really cool.  All the examples of how to use it are very nice.  I have a few questions:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;It looks like commons.lang.StringUtils can be pulled from maven, so we&apos;ll want to add that to the ivy files.&lt;/li&gt;
	&lt;li&gt;I don&apos;t understand what the purpose of the re-implementation of GruntParser is.  Could you explain that a bit?&lt;/li&gt;
	&lt;li&gt;(This one is for other pig developers) Is Piggybank the right place for this or should we put it under test?  I think this will be really useful for Pig users in setting up automated tests of their Pig Latin scripts.  Should we support it outright rather than put it in piggybank and risk having it go unmaintained?&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12866291" author="romainr" created="Tue, 11 May 2010 20:31:47 +0100"  >&lt;p&gt;1. It looks like commons.lang.StringUtils can be pulled from maven, so we&apos;ll want to add that to the ivy files.&lt;/p&gt;

&lt;p&gt;There is already the apache StringUtils in the hive.jar of piggybank, I included the commons-lang.jar in case people missed it.&lt;br/&gt;
Is it ok to add commons-lang.jar in the ivy of Pig even if it is only used by piggybank?&lt;/p&gt;

&lt;p&gt;2. I don&apos;t understand what the purpose of the re-implementation of GruntParser is. Could you explain that a bit?&lt;/p&gt;

&lt;p&gt;The plan of the Pig script needs to be modified in several cases, for example:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;removing of DUMP or STORE that interfere with the execution of the script.&lt;/li&gt;
	&lt;li&gt;using a customized array of text data in input instead of another data file, cf. &lt;em&gt;TestPigTest#testTextInput()&lt;/em&gt;:
     &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     A = LOAD &apos;input_data&apos;;
 --&amp;gt;
A = LOAD &apos;text_data_saved_into_a_file&apos;;
     &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;test a subset of the pigscript, need to override the first alias, cf. &lt;em&gt;TestPigTest#testSubset()&lt;/em&gt;:
     &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     queries = FOREACH data GENERATE LOWER(query) AS query, count AS count;
 --&amp;gt;
queries = LOAD &apos;XX.tmp&apos; AS (query:CHARARRAY, count:INTEGER);
     &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In order to do this, I did not find a simpler solution than parsing the script and overriding the void processPig(String cmd) of the PigParser:&lt;/p&gt;

&lt;p&gt;It takes a list of aliases to override:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
overrides&amp;lt;alias,value&amp;gt; = {
      STORE: &quot;&quot;,
      queries_limit: queries_limit = LIMIT queries_ordered 5;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then during the parsing it replaces the aliases by the new values:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; each command in the PigScript:
  does the command have an alias to override?:
    command = overrides.get(alias)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;   

&lt;p&gt;Is there a simpler way to replace some parts of the plan?&lt;/p&gt;</comment>
                            <comment id="12866292" author="romainr" created="Tue, 11 May 2010 20:33:29 +0100"  >&lt;p&gt;Some cleaning and commenting.&lt;/p&gt;</comment>
                            <comment id="12868785" author="alangates" created="Tue, 18 May 2010 19:49:27 +0100"  >&lt;p&gt;A rework of the patch to move it from piggybank to a separate pigunit directory.&lt;/p&gt;</comment>
                            <comment id="12872293" author="hadoopqa" created="Thu, 27 May 2010 18:26:21 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12444822/PIG-1404-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12444822/PIG-1404-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 948526.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 8 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h1.grid.sp2.yahoo.net/8/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h1.grid.sp2.yahoo.net/8/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h1.grid.sp2.yahoo.net/8/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h1.grid.sp2.yahoo.net/8/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h1.grid.sp2.yahoo.net/8/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h1.grid.sp2.yahoo.net/8/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12872370" author="alangates" created="Thu, 27 May 2010 22:16:13 +0100"  >&lt;p&gt;Roman, are you ok with the new patch?&lt;/p&gt;

&lt;p&gt;Other Pig committers, are you ok with putting this in a separate pigunit directory as this patch does and building it as a separate artifact?&lt;/p&gt;</comment>
                            <comment id="12872751" author="romainr" created="Fri, 28 May 2010 02:22:06 +0100"  >&lt;p&gt;Thank you for having a look at it Alan.     &lt;/p&gt;

&lt;p&gt;Overall it is good but I have been working on a few small simplifications that can be useful when testing scripts with many tests and big cache archives.&lt;/p&gt;

&lt;p&gt;In addition, it might be worth the effort to add some Web documentation about it.&lt;/p&gt;

&lt;p&gt;I can update the patch next week.&lt;/p&gt;</comment>
                            <comment id="12884104" author="romainr" created="Thu, 1 Jul 2010 01:07:35 +0100"  >&lt;p&gt;Sorry it took some time but here is an updated patch, with some improvements, that simplifies a little bit more PigUnit.&lt;/p&gt;

&lt;p&gt;I also added some documentation but I guess this should be reviewed in another patch when this one could be committed.&lt;/p&gt;</comment>
                            <comment id="12884901" author="hadoopqa" created="Sat, 3 Jul 2010 10:41:07 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12448463/PIG-1404-3-doc.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12448463/PIG-1404-3-doc.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 960062.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 1 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 401 release audit warnings (more than the trunk&apos;s current 399 warnings).&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    -1 contrib tests.  The patch failed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/359/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/359/testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/359/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/359/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/359/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/359/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/359/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/359/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12885094" author="sameerm" created="Mon, 5 Jul 2010 04:06:33 +0100"  >&lt;p&gt;Hi Guys&lt;/p&gt;

&lt;p&gt;FWIW if its not too late, would be great if this API could be part of the pig-core.jar itself.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Sameer&lt;/p&gt;</comment>
                            <comment id="12895134" author="romainr" created="Wed, 4 Aug 2010 05:27:38 +0100"  >&lt;p&gt;Hi everyone,&lt;/p&gt;

&lt;p&gt;Here is a slightly updated version where the default execution is Pig local mode (so no need to add any HADOOP_CONF_DIR in the classpath by default).&lt;/p&gt;

&lt;p&gt;Then regarding PigUnit, do you see it:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;as a version 1 that can be committed soon (and could be found in either pig.jar, pigunit.jar or piggybank.jar...)?&lt;/li&gt;
	&lt;li&gt;a proof of concept for a more sophisticated Pig testing framework?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Feel free to give feedbacks. I will also have time for it in August.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Romain&lt;/p&gt;</comment>
                            <comment id="12895318" author="ashutoshc" created="Wed, 4 Aug 2010 17:50:02 +0100"  >&lt;blockquote&gt;&lt;p&gt;3. (This one is for other pig developers) Is Piggybank the right place for this or should we put it under test? I think this will be really useful for Pig users in setting up automated tests of their Pig Latin scripts. Should we support it outright rather than put it in piggybank and risk having it go unmaintained?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think it deserves to be put in under test. Having written few end-to-end test cases of pig in junit, I can see its really useful for Pig itself. Usefulness for pig users is pretty obvious.&lt;/p&gt;</comment>
                            <comment id="12898382" author="alangates" created="Fri, 13 Aug 2010 20:31:15 +0100"  >&lt;p&gt;Unless there&apos;s any objections I&apos;m going to commit the latest patch and the doc patch in the next day or two.  I want to get it in in time for the 0.8 branch.&lt;/p&gt;</comment>
                            <comment id="12898509" author="romainr" created="Sat, 14 Aug 2010 04:57:30 +0100"  >&lt;p&gt;In the latest patch, PigUnit is stored into &apos;pigunit&apos; at the root of the project and a pigunit.jar is created. &lt;/p&gt;

&lt;p&gt;Some people would prefer to have it in test or maybe piggybank. Should we move it or keep it like this?&lt;/p&gt;</comment>
                            <comment id="12899139" author="alangates" created="Mon, 16 Aug 2010 23:29:43 +0100"  >&lt;p&gt;Ashutosh made a point that we may want to use it for Pig testing in the future, as it may be a good framework for Pig end to end tests.  Given this we should move it to test.  Otherwise we&apos;ll have circular dependency issues.&lt;/p&gt;</comment>
                            <comment id="12899226" author="romainr" created="Tue, 17 Aug 2010 02:17:04 +0100"  >&lt;p&gt;Ok, and what hierarchy are you expecting? Completely merge the pigunit/&lt;/p&gt;
{src,test}
&lt;p&gt; into pig/test/org/apache/pig/test or keep it as a mini project?&lt;/p&gt;

&lt;p&gt;Ideally the best would be to put the pigunit/src into something like src/org/apache/pig/tools/pigunit and remove the dependency on test.MiniCluster at one point if we want the users to find PigUnit in pig.jar. e.g.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;pig/build.xml&lt;/li&gt;
	&lt;li&gt;pig/src/org/apache/pig/tools/pigunit
	&lt;ul&gt;
		&lt;li&gt;PigTest.java&lt;/li&gt;
		&lt;li&gt;Cluster.java&lt;/li&gt;
		&lt;li&gt;...&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;pig/test/org/apache/pig/tools/pigunit
	&lt;ul&gt;
		&lt;li&gt;TestPigTest.java&lt;/li&gt;
		&lt;li&gt;data&lt;/li&gt;
		&lt;li&gt;...&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1404&quot; title=&quot;PigUnit - Pig script testing simplified. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1404&quot;&gt;&lt;del&gt;PIG-1404&lt;/del&gt;&lt;/a&gt;-4.patch we currently have:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;pig/pigunit
	&lt;ul&gt;
		&lt;li&gt;build.xml&lt;/li&gt;
		&lt;li&gt;src/org/apache/pig/pigunit
		&lt;ul&gt;
			&lt;li&gt;PigTest.java&lt;/li&gt;
			&lt;li&gt;Cluster.java&lt;/li&gt;
			&lt;li&gt;...&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
		&lt;li&gt;test/org/apache/pig/pigunit
		&lt;ul&gt;
			&lt;li&gt;TestPigTest.java&lt;/li&gt;
			&lt;li&gt;data&lt;/li&gt;
			&lt;li&gt;...&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;They are many other ways to see it and I am not sure of which one you want.&lt;/p&gt;
</comment>
                            <comment id="12899524" author="alangates" created="Tue, 17 Aug 2010 19:56:14 +0100"  >&lt;p&gt;A rework of the patch that moves the code from pigunit to test.  &lt;/p&gt;

&lt;p&gt;To answer Romain&apos;s question, I have put the code under test/org/apache/pig/pigunit and tests for PigUnit under test/org/apache/pig/test/pigunit.&lt;/p&gt;

&lt;p&gt;I have added pigunit-jar test-pigunit targets to the top level build.xml to build pigunit.jar and run the PigUnit tests.&lt;/p&gt;

&lt;p&gt;I have also updated the documentation with the new source locations and included that documentation in this patch.&lt;/p&gt;</comment>
                            <comment id="12899525" author="alangates" created="Tue, 17 Aug 2010 19:57:33 +0100"  >&lt;p&gt;Attaching patch take 2, with correct permissions this time.&lt;/p&gt;</comment>
                            <comment id="12900014" author="alangates" created="Wed, 18 Aug 2010 21:15:38 +0100"  >&lt;p&gt;Unit tests pass.&lt;/p&gt;

&lt;p&gt;Contrib unit tests pass&lt;/p&gt;

&lt;p&gt;Results of test-patch:&lt;/p&gt;

&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; -1 overall.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 @author.  The patch does not contain any @author tags.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 tests included.  The patch appears to include 12 new or modified tests.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     -1 release audit.  The applied patch generated 423 release audit warnings (more than the trunk&apos;s current 416 warnings).&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Release audit warnings are from html and data files where we can&apos;t put a header.&lt;/p&gt;</comment>
                            <comment id="12900167" author="alangates" created="Thu, 19 Aug 2010 05:35:08 +0100"  >&lt;p&gt;Patch checked in.  Thanks Romain for all your work on this.&lt;/p&gt;</comment>
                            <comment id="12900355" author="romainr" created="Thu, 19 Aug 2010 17:56:00 +0100"  >&lt;p&gt;Thank you Alan for all your time and tutoring.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12444822" name="PIG-1404-2.patch" size="42736" author="alangates" created="Tue, 18 May 2010 19:49:27 +0100"/>
                            <attachment id="12448463" name="PIG-1404-3-doc.patch" size="9014" author="romainr" created="Thu, 1 Jul 2010 01:07:35 +0100"/>
                            <attachment id="12448462" name="PIG-1404-3.patch" size="44290" author="romainr" created="Thu, 1 Jul 2010 01:07:35 +0100"/>
                            <attachment id="12451192" name="PIG-1404-4-doc.patch" size="9293" author="romainr" created="Wed, 4 Aug 2010 05:27:38 +0100"/>
                            <attachment id="12451191" name="PIG-1404-4.patch" size="45827" author="romainr" created="Wed, 4 Aug 2010 05:27:38 +0100"/>
                            <attachment id="12452305" name="PIG-1404-5.patch" size="50215" author="alangates" created="Tue, 17 Aug 2010 19:57:33 +0100"/>
                            <attachment id="12444235" name="PIG-1404.patch" size="36517" author="romainr" created="Tue, 11 May 2010 20:33:29 +0100"/>
                            <attachment id="12443529" name="commons-lang-2.4.jar" size="261809" author="romainr" created="Tue, 4 May 2010 01:31:16 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 7 May 2010 22:26:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164896</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaq2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96534</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>