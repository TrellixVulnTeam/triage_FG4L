<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:09:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1359/PIG-1359.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1359] bin/pig script does not pick up correct jar libraries</title>
                <link>https://issues.apache.org/jira/browse/PIG-1359</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The bin/pig script tries to load pig jar libraries from the pig-*-core.jar using this bash fragment&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

# &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; releases, add core pig to CLASSPATH
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; f in $PIG_HOME/pig-*core.jar; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
    CLASSPATH=${CLASSPATH}:$f;
done

# during development pig jar might be in build
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; f in $PIG_HOME/build/pig-*-core.jar; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
    CLASSPATH=${CLASSPATH}:$f;
done

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;The pig-&amp;#42;-core.jar does not contain the dependencies for pig that are found in build/ivy/lib/Pig/&amp;#42;.jar (jline).&lt;br/&gt;
The script does not even pick the pig.jar in PIG_HOME that is produced as a result of the ant build process.&lt;/p&gt;

&lt;p&gt;This results in the following error after successfully building pig:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 

Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.NoClassDefFoundError: jline/ConsoleReaderInputStream
Caused by: java.lang.ClassNotFoundException: jline.ConsoleReaderInputStream

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </description>
                <environment>&lt;p&gt;Linux Ubuntu 8.10, java-6-sun&lt;/p&gt;</environment>
        <key id="12461418">PIG-1359</key>
            <summary>bin/pig script does not pick up correct jar libraries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zjffdu">Jeff Zhang</assignee>
                                    <reporter username="azaroth">Gianmarco De Francisci Morales</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Apr 2010 16:38:31 +0100</created>
                <updated>Fri, 17 Dec 2010 22:44:06 +0000</updated>
                            <resolved>Sat, 22 May 2010 02:51:17 +0100</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12855530" author="azaroth" created="Sat, 10 Apr 2010 09:04:04 +0100"  >&lt;p&gt;Added a patch that picks up jars in ivy&apos;s build folder &quot;build/ivy/lib/Pig/&quot; and the main lib folder &quot;lib/&quot;&lt;/p&gt;</comment>
                            <comment id="12856165" author="daijy" created="Mon, 12 Apr 2010 21:56:25 +0100"  >&lt;p&gt;Hi, Gianmarco,&lt;br/&gt;
Thanks for your concern. Actually we need one additional step to make bin/pig work. We shall copy $PIG_HOME/build/pig-0.8.0-dev.jar to $PIG_HOME/pig-0.8.0-core.jar. This will be handled in ant&apos;s &quot;package&quot; target when releasing. But if you check out from svn, we will do this additional step to work with bin/pig.&lt;/p&gt;</comment>
                            <comment id="12856179" author="daijy" created="Mon, 12 Apr 2010 22:18:42 +0100"  >&lt;p&gt;The comment change &quot;# Set the version for Hadoop, default to 17&quot; -&amp;gt; &quot;# Set the version for Hadoop, default to 20&quot; is totally valid, we will change it.&lt;/p&gt;</comment>
                            <comment id="12869459" author="zjffdu" created="Thu, 20 May 2010 04:03:29 +0100"  >&lt;p&gt;Hi Daniel,&lt;/p&gt;

&lt;p&gt;Does it mean in development stage, I have to invoke ant package or copy copy $PIG_HOME/build/pig-0.8.0-dev.jar to $PIG_HOME/pig-0.8.0-core.jar manually ? &lt;/p&gt;

&lt;p&gt;Why not change &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# during development pig jar might be in build
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; f in $PIG_HOME/build/pig-*-core.jar; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
    CLASSPATH=${CLASSPATH}:$f;
done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# during development pig jar might be in build
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; f in $PIG_HOME/build/pig-*-dev.jar; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
    CLASSPATH=${CLASSPATH}:$f;
done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The *-dev.jar has the dependency, and this is more convenient for development&lt;/p&gt;
</comment>
                            <comment id="12869698" author="daijy" created="Thu, 20 May 2010 19:03:04 +0100"  >&lt;p&gt;Yes, I rethink about it and seems we create unnecessary trouble for developing. Both Jeff&apos;s change and Gianmarco looks fine. I tend to adopt Jeff&apos;s change, since it requires less change. Thoughts?&lt;/p&gt;</comment>
                            <comment id="12870084" author="daijy" created="Fri, 21 May 2010 19:12:59 +0100"  >&lt;p&gt;Since there is no objection, Jeff, can you commit your change?&lt;/p&gt;</comment>
                            <comment id="12870258" author="zjffdu" created="Sat, 22 May 2010 02:50:42 +0100"  >&lt;p&gt;Daniel, I&apos;ve committed the patch.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441330" name="ASF.LICENSE.NOT.GRANTED--pig-1359.patch" size="686" author="azaroth" created="Sat, 10 Apr 2010 08:57:47 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Apr 2010 20:56:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164852</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyapjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Added jars in $PIG_HOME/lib/ and $PIG_HOME/build/ivy/lib/Pig/ to Pig startup classpath.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>