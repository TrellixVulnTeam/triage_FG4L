<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:00:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-613/PIG-613.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-613] Casting complex type(tuple/bag/map) does not take effect</title>
                <link>https://issues.apache.org/jira/browse/PIG-613</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Consider the following Pig script which casts return values of the SQUARE UDF which are  tuples of doubles to long. The describe output of B shows it is long, however the result is still double.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
register statistics.jar;
A = load &apos;myfloatdata.txt&apos; using PigStorage() as (doublecol:&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;);
B = foreach A generate (tuple(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;))statistics.SQUARE(doublecol) as squares:(loadtimesq);
describe B;
explain B;
dump B;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;===========================================&lt;br/&gt;
Describe output of B:&lt;br/&gt;
B: &lt;/p&gt;
{squares: (loadtimesq: long)}
&lt;p&gt;===========================================================&lt;br/&gt;
Sample output of B:&lt;br/&gt;
((7885.44))&lt;br/&gt;
((792098.2200010001))&lt;br/&gt;
((1497360.9268889998))&lt;br/&gt;
((50023.7956))&lt;br/&gt;
((0.972196))&lt;br/&gt;
((0.30980356))&lt;br/&gt;
((9.9760144E-7))&lt;br/&gt;
===========================================================&lt;br/&gt;
Cause: The cast for Tuples has not been implemented in POCast.java&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12411989">PIG-613</key>
            <summary>Casting complex type(tuple/bag/map) does not take effect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="viraj">Viraj Bhat</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jan 2009 00:15:06 +0000</created>
                <updated>Thu, 2 May 2013 03:29:28 +0100</updated>
                            <resolved>Wed, 24 Feb 2010 19:34:45 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12662185" author="viraj" created="Fri, 9 Jan 2009 00:16:10 +0000"  >&lt;p&gt;Test input file&lt;/p&gt;</comment>
                            <comment id="12662186" author="viraj" created="Fri, 9 Jan 2009 00:17:04 +0000"  >&lt;p&gt;SQUARE UDF&lt;/p&gt;</comment>
                            <comment id="12765402" author="daijy" created="Wed, 14 Oct 2009 06:27:16 +0100"  >&lt;p&gt;Here is another example:&lt;/p&gt;

&lt;p&gt;1.txt:&lt;br/&gt;
(0.2,0.3)&lt;/p&gt;

&lt;p&gt;a = load &apos;1.txt&apos;;&lt;br/&gt;
b = foreach a generate (tuple(int, int))$0;&lt;/p&gt;

&lt;p&gt;describe b;&lt;br/&gt;
b: &lt;/p&gt;
{(int,int)}

&lt;p&gt;dump b;&lt;br/&gt;
((0.2,0.3))&lt;/p&gt;

&lt;p&gt;The expect result is ((0, 0))&lt;/p&gt;</comment>
                            <comment id="12837279" author="hadoopqa" created="Tue, 23 Feb 2010 15:31:59 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12436680/PIG-613-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12436680/PIG-613-1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 915079.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 19 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/217/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/217/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/217/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/217/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/217/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/217/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12837398" author="rding" created="Tue, 23 Feb 2010 19:25:51 +0000"  >&lt;p&gt;Initial comment: the patch also needs to remove references to  package &apos;org.apache.pig.data.parser&apos; from junit tests.&lt;/p&gt;</comment>
                            <comment id="12837469" author="daijy" created="Tue, 23 Feb 2010 22:08:02 +0000"  >&lt;p&gt;Checked with hadoop guys. For Serializer/Deserializer, we should always open, but never close. There is another place in pig code does not follow this. Attach a new patch address both positions.&lt;/p&gt;</comment>
                            <comment id="12837471" author="daijy" created="Tue, 23 Feb 2010 22:09:47 +0000"  >&lt;p&gt;Ignore last comment. It means to be for another Jira.&lt;/p&gt;</comment>
                            <comment id="12837479" author="rding" created="Tue, 23 Feb 2010 22:23:58 +0000"  >&lt;p&gt;The patch looks good. A few comments:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;File TestTextDataParser.java should be removed.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;In LoadCaster, javadoc is needed for the new parameters.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;In Utf8StorageConverter&apos;s bytesToTuple method, the cast to Tuple can be removed. Same for the cast in bytesToBag and bytesToMap. In consumeBag method, use consumeTuple instead of consumeComplexType to be more precise. In bytesToBoolean method, use Boolean.valueof to be consistent with other existing methods.  Also should the new helper methods consume
{Bag, Tuple, Map}
&lt;p&gt; be private (not public)?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;The new methods added in impl.util.Utils class should be added to a test.util class since they are only used in the unit tests.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I maybe too picky here, but I would like to see more consistent coding style across files. For example, &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Use 4 spaces (not tab) for indentation: tabs are used in ResourceSchema. POCast, and TypeCheckingVisitor.&lt;/li&gt;
&lt;/ul&gt;








</comment>
                            <comment id="12837533" author="daijy" created="Wed, 24 Feb 2010 00:00:14 +0000"  >&lt;p&gt;Attach patch to address Richard&apos;s comments and hudson feedback.&lt;/p&gt;</comment>
                            <comment id="12837547" author="hadoopqa" created="Wed, 24 Feb 2010 00:31:56 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12436788/PIG-613-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12436788/PIG-613-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 915578.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 22 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/219/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/219/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12837970" author="daijy" created="Wed, 24 Feb 2010 19:34:45 +0000"  >&lt;p&gt;Patch committed.&lt;/p&gt;</comment>
                            <comment id="12837973" author="daijy" created="Wed, 24 Feb 2010 19:36:40 +0000"  >&lt;p&gt;Hudson does not work well, patch has been manually tested.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12412222">PIG-616</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12492683">PIG-1758</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12456728">PIG-1243</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12436680" name="PIG-613-1.patch" size="65238" author="daijy" created="Tue, 23 Feb 2010 06:42:51 +0000"/>
                            <attachment id="12436788" name="PIG-613-2.patch" size="74553" author="daijy" created="Wed, 24 Feb 2010 00:00:09 +0000"/>
                            <attachment id="12397468" name="SQUARE.java" size="1319" author="viraj" created="Fri, 9 Jan 2009 00:17:04 +0000"/>
                            <attachment id="12397467" name="myfloatdata.txt" size="1813" author="viraj" created="Fri, 9 Jan 2009 00:16:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Oct 2009 05:27:16 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164205</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyagvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>