<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:58:52 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1449/PIG-1449.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1449] RegExLoader hangs on lines that don&apos;t match the regular expression</title>
                <link>https://issues.apache.org/jira/browse/PIG-1449</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;In the 0.7.0 changes to RegExLoader there was a bug introduced where the code will stay in the while loop if the line isn&apos;t matched.  Before 0.7.0 these lines would be skipped if they didn&apos;t match the regular expression.  The result is the mapper will not respond and will time out with &quot;Task attempt_X failed to report status for 600 seconds. Killing!&quot;.&lt;/p&gt;

&lt;p&gt;Here are the steps to recreate the bug:&lt;/p&gt;

&lt;p&gt;Create a text file in HDFS with the following lines:&lt;/p&gt;

&lt;p&gt;test1&lt;br/&gt;
testA&lt;br/&gt;
test2&lt;/p&gt;

&lt;p&gt;Run the following pig script:&lt;/p&gt;

&lt;p&gt;REGISTER /usr/local/pig/contrib/piggybank/java/piggybank.jar;&lt;br/&gt;
test = LOAD &apos;/path/to/test.txt&apos; using org.apache.pig.piggybank.storage.MyRegExLoader(&apos;(test&lt;br class=&quot;atl-forced-newline&quot; /&gt;d)&apos;) AS (line);&lt;br/&gt;
dump test;&lt;/p&gt;

&lt;p&gt;Expected result:&lt;/p&gt;

&lt;p&gt;(test1)&lt;br/&gt;
(test3)&lt;/p&gt;

&lt;p&gt;Actual result:&lt;/p&gt;

&lt;p&gt;Job fails to complete after 600 second timeout waiting on the mapper to complete.  The mapper hangs at 33% since it can process the first line but gets stuck into the while loop on the second line.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466915">PIG-1449</key>
            <summary>RegExLoader hangs on lines that don&apos;t match the regular expression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="justinjas">Justin Sanders</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Jun 2010 18:37:44 +0100</created>
                <updated>Fri, 2 Jul 2010 18:07:26 +0100</updated>
                            <resolved>Fri, 2 Jul 2010 07:11:10 +0100</resolved>
                                    <version>0.7.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12878663" author="ashutoshc" created="Mon, 14 Jun 2010 18:54:59 +0100"  >&lt;p&gt;Justin,&lt;/p&gt;

&lt;p&gt;Good catch. Can you assimilate your test case in junit in one of piggybank/test/storage/TestRegExLoader or TestMyRegExLoader. That way we&apos;ll have a regression test for the issue.&lt;/p&gt;</comment>
                            <comment id="12878812" author="hadoopqa" created="Tue, 15 Jun 2010 01:45:02 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12447045/RegExLoader.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12447045/RegExLoader.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 953798.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/328/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/328/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12884389" author="engrean" created="Thu, 1 Jul 2010 20:32:44 +0100"  >&lt;p&gt;I ran into this issue last night and before seeing this bug, I fixed it. My fix is similar to the previous, but it includes a unit test. Hopefully, the test will help move this in more quickly. I notice that it takes over 4 minutes to run the unit tests. Would be any added value in trying to reduce the execution time in these tests? If there&apos;s any interest, I might be able to help.&lt;/p&gt;</comment>
                            <comment id="12884391" author="engrean" created="Thu, 1 Jul 2010 20:34:55 +0100"  >&lt;p&gt;This should fix the problem by adding a call to nextKeyValue on each iteration. &lt;/p&gt;</comment>
                            <comment id="12884426" author="ashutoshc" created="Thu, 1 Jul 2010 22:22:23 +0100"  >&lt;p&gt;Running through Hudson.&lt;/p&gt;</comment>
                            <comment id="12884539" author="hadoopqa" created="Fri, 2 Jul 2010 05:07:13 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12448516/PIG-1449-RegExLoaderInfiniteLoopFix.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12448516/PIG-1449-RegExLoaderInfiniteLoopFix.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 958666.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    -1 contrib tests.  The patch failed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/357/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/357/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/357/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/357/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/357/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/357/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12884551" author="ashutoshc" created="Fri, 2 Jul 2010 07:07:41 +0100"  >&lt;p&gt;Reran the contrib tests. All passed. Patch committed. Thanks, Christian and Justin for working on this !&lt;/p&gt;</comment>
                            <comment id="12884552" author="ashutoshc" created="Fri, 2 Jul 2010 07:10:19 +0100"  >&lt;p&gt;@Christian,&lt;/p&gt;

&lt;p&gt;It would definitely be useful to get the execution time for running the tests down. It takes a while currently to run all Pig tests.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12448516" name="PIG-1449-RegExLoaderInfiniteLoopFix.patch" size="3839" author="engrean" created="Thu, 1 Jul 2010 20:34:55 +0100"/>
                            <attachment id="12447045" name="RegExLoader.patch" size="716" author="justinjas" created="Mon, 14 Jun 2010 18:44:21 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 14 Jun 2010 17:54:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164938</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaqkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fixed hanging in RegExLoader if line didn&amp;#39;t match regular expression.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>RegExLoader MyRegExLoader piggybank LoadFunc</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>