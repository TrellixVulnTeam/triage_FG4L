<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:05:06 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2132/PIG-2132.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2132] Piggybank: MIN and MAX functions should ignore nulls</title>
                <link>https://issues.apache.org/jira/browse/PIG-2132</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;org.apache.pig.piggybank.evaluation.math.MAX and org.apache.pig.piggybank.evaluation.math.MIN throws a NullPointerException on a null input, when it should just ignore it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12510696">PIG-2132</key>
            <summary>Piggybank: MIN and MAX functions should ignore nulls</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rekhajoshm">Rekha Joshi</assignee>
                                    <reporter username="jcoveney">Jonathan Coveney</reporter>
                        <labels>
                            <label>newbie</label>
                            <label>piggybank</label>
                    </labels>
                <created>Fri, 17 Jun 2011 18:07:30 +0100</created>
                <updated>Mon, 7 Jul 2014 19:08:01 +0100</updated>
                            <resolved>Wed, 27 Nov 2013 21:21:47 +0000</resolved>
                                    <version>0.10.1</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="14400">4h</timeestimate>
                                        <comments>
                            <comment id="13051218" author="jcoveney" created="Fri, 17 Jun 2011 18:50:32 +0100"  >&lt;p&gt;This is my first patch, so I hope that I conformed to procedure properly. If I should do anything differently, please let me know.&lt;/p&gt;</comment>
                            <comment id="13051295" author="dvryaboy" created="Fri, 17 Jun 2011 21:02:28 +0100"  >&lt;p&gt;Please augment the existing tests to check for this.&lt;/p&gt;</comment>
                            <comment id="13051348" author="jcoveney" created="Fri, 17 Jun 2011 22:52:37 +0100"  >&lt;p&gt;Dmitriy, I will definitely do that. A question on style: is it better to contain all tests of related functions to one function (in this case, textMAX() and testMIN()), or should I break it out?&lt;/p&gt;</comment>
                            <comment id="13051541" author="jcoveney" created="Sat, 18 Jun 2011 16:49:06 +0100"  >&lt;p&gt;I tried to include fairly extensive tests of all of the max and min functions.&lt;/p&gt;</comment>
                            <comment id="13052113" author="alangates" created="Mon, 20 Jun 2011 19:06:59 +0100"  >&lt;p&gt;I know I said in the mail thread that these functions should ignore null.  But I missed the context and thought we were talking about the aggregate functions MIN and MAX.  Sorry for the misunderstanding.&lt;/p&gt;

&lt;p&gt;In the case of these we need to think about the semantics we want.  It seems to me that MIN(x, null) should return null rather than x, because you don&apos;t know the answer, which is what null means.&lt;/p&gt;</comment>
                            <comment id="13064946" author="thejas" created="Thu, 14 Jul 2011 00:22:21 +0100"  >&lt;p&gt;Changing the status from patch available until Alan&apos;s comment is addressed. (patch-available state is being used for finding jira&apos;s that are ready for review. )&lt;/p&gt;</comment>
                            <comment id="13831303" author="rekhajoshm" created="Mon, 25 Nov 2013 09:15:43 +0000"  >&lt;p&gt;Submitted patch with review comment from Alan.&lt;/p&gt;</comment>
                            <comment id="13831305" author="rekhajoshm" created="Mon, 25 Nov 2013 09:16:17 +0000"  >&lt;p&gt;Attached patch&lt;/p&gt;</comment>
                            <comment id="13834075" author="cheolsoo" created="Wed, 27 Nov 2013 19:44:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rekhajoshm&quot; class=&quot;user-hover&quot; rel=&quot;rekhajoshm&quot;&gt;Rekha Joshi&lt;/a&gt;, thank you for the patch. But your patch includes several errors. In fact, it doesn&apos;t even compile-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    [javac] /Users/cheolsoop/workspace/pig-svn/contrib/piggybank/java/src/test/java/org/apache/pig/piggybank/test/evaluation/TestMathUDF.java:528: incompatible types
    [javac] found   : &amp;lt;nulltype&amp;gt;
    [javac] required: &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;
    [javac]         &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; expected = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    [javac]                           ^
    [javac] /Users/cheolsoop/workspace/pig-svn/contrib/piggybank/java/src/test/java/org/apache/pig/piggybank/test/evaluation/TestMathUDF.java:609: incompatible types
    [javac] found   : &amp;lt;nulltype&amp;gt;
    [javac] required: &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;
    [javac]         &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; expected = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    [javac]                          ^
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Also, it looks like you manually edited your patch.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+	-	 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testnextAfter() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I am dropping the changes in TestMathUDF.java and will only commit the rest.&lt;/p&gt;

&lt;p&gt;Next time when you contribute, please run the unit test before posting a patch. Here is how you run piggybank unit tests-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant compile-test
cd contrib/piggybank/java
ant test -Dtestcase=TestMathUDF
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13834077" author="cheolsoo" created="Wed, 27 Nov 2013 19:47:36 +0000"  >&lt;p&gt;Here is the patch after clean up. I will commit this.&lt;/p&gt;</comment>
                            <comment id="13834159" author="cheolsoo" created="Wed, 27 Nov 2013 21:21:47 +0000"  >&lt;p&gt;Committed to trunk. Thank you Rekha!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12482962" name="JcoMaxMinPatch.patch" size="7309" author="jcoveney" created="Fri, 17 Jun 2011 18:51:48 +0100"/>
                            <attachment id="12483046" name="JcoMaxMinPatch_wtests.patch" size="23376" author="jcoveney" created="Sat, 18 Jun 2011 16:49:06 +0100"/>
                            <attachment id="12615566" name="PIG-2132_1.patch" size="51975" author="rekhajoshm" created="Mon, 25 Nov 2013 09:16:17 +0000"/>
                            <attachment id="12616104" name="PIG-2132_2.patch" size="7312" author="cheolsoo" created="Wed, 27 Nov 2013 19:47:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 17 Jun 2011 20:02:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>68116</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyavqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97452</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>All I did was go through all of the Max and Min functions in Piggybank and add&lt;br/&gt;
if (first==null)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return second;&lt;br/&gt;
if (second==null)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return first;&lt;br/&gt;
&lt;br/&gt;
Following conversation on the message board, the desired outputs are:&lt;br/&gt;
null,null -&amp;gt; null&lt;br/&gt;
1,null -&amp;gt; 1&lt;br/&gt;
null,1 -&amp;gt; 1&lt;br/&gt;
1,1 -&amp;gt; 1&lt;br/&gt;
&lt;br/&gt;
This change gives that.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>piggybank</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>