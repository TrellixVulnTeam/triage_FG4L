<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:59:54 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2912/PIG-2912.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2912] Pig should clone JobConf while creating JobContextImpl and TaskAttemptContextImpl in Hadoop23</title>
                <link>https://issues.apache.org/jira/browse/PIG-2912</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;There is change in the semantics of&lt;br/&gt;
JobContext::JobContext(Configuration, JobID). While in .20, the Config was&lt;br/&gt;
cloned, in .23 the Config is adopted (if it&apos;s a JobConf). This causes the same&lt;br/&gt;
Configuration instance to be written-to for different tables in the same job.&lt;/p&gt;

&lt;p&gt;It would affect multi store commands in pig on Hadoop 23/2.0. The&lt;br/&gt;
cloning in HadoopShims was part of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2578&quot; title=&quot;Multiple Store-commands mess up mapred.output.dir.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2578&quot;&gt;&lt;del&gt;PIG-2578&lt;/del&gt;&lt;/a&gt; but was reverted to other issues.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12606686">PIG-2912</key>
            <summary>Pig should clone JobConf while creating JobContextImpl and TaskAttemptContextImpl in Hadoop23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Sep 2012 22:37:41 +0100</created>
                <updated>Sun, 6 Jan 2013 23:57:06 +0000</updated>
                            <resolved>Mon, 10 Sep 2012 23:20:11 +0100</resolved>
                                    <version>0.9.3</version>
                    <version>0.10.1</version>
                                    <fixVersion>0.9.3</fixVersion>
                    <fixVersion>0.11</fixVersion>
                    <fixVersion>0.10.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13452073" author="rohini" created="Mon, 10 Sep 2012 16:28:46 +0100"  >&lt;p&gt;The patch creates a clone if JobConf is passed. &lt;/p&gt;

&lt;p&gt;Testcase added in TestMultiQueryLocal ensures that if new settings are added in the backend by a store, they are not passed to other stores in a multi store script.&lt;/p&gt;</comment>
                            <comment id="13452137" author="dvryaboy" created="Mon, 10 Sep 2012 17:48:50 +0100"  >&lt;p&gt;Could you create a test in which the storage or loader function uses UDFContext to ship around information? I don&apos;t think the current test probes the issue that caused us to roll back &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2578&quot; title=&quot;Multiple Store-commands mess up mapred.output.dir.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2578&quot;&gt;&lt;del&gt;PIG-2578&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13452265" author="rohini" created="Mon, 10 Sep 2012 19:15:31 +0100"  >&lt;p&gt;Dmitriy,&lt;br/&gt;
   This patch is mainly to address a behaviour change in hadoop between 20 and 23 in the way instantiation of new JobContext is done and to deal with it in HadoopShims so that JobContext objects in the backend do not get overwritten in case of multiple stores. &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2578&quot; title=&quot;Multiple Store-commands mess up mapred.output.dir.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2578&quot;&gt;&lt;del&gt;PIG-2578&lt;/del&gt;&lt;/a&gt; main problem was with JobControlCompiler and it changed frontend behaviour. I will create a separate jira to add test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2578&quot; title=&quot;Multiple Store-commands mess up mapred.output.dir.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2578&quot;&gt;&lt;del&gt;PIG-2578&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Hadoop 20:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
JobContext(JobConf conf, org.apache.hadoop.mapreduce.JobID jobId, 
             Progressable progress) {
    &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(conf, jobId); &lt;span class=&quot;code-comment&quot;&gt;//Gets cloned
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.job = conf;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.progress = progress;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hadoop 23:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JobContextImpl(Configuration conf, JobID jobId) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (conf &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; JobConf) {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.conf = (JobConf)conf; &lt;span class=&quot;code-comment&quot;&gt;//Gets assigned
&lt;/span&gt;    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.conf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JobConf(conf);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13452455" author="daijy" created="Mon, 10 Sep 2012 22:14:57 +0100"  >&lt;p&gt;+1. We shall keep the same behavior between 20 and 23. Put the abstraction in shims is the right approach. Will commit soon.&lt;/p&gt;</comment>
                            <comment id="13452522" author="daijy" created="Mon, 10 Sep 2012 23:20:11 +0100"  >&lt;p&gt;Patch committed to 0.9/0.10/trunk. Thanks Rohini!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12544478" name="PIG-2912-branch09.patch" size="6952" author="rohini" created="Mon, 10 Sep 2012 16:28:46 +0100"/>
                            <attachment id="12544479" name="PIG-2912-branch10.patch" size="7171" author="rohini" created="Mon, 10 Sep 2012 16:28:46 +0100"/>
                            <attachment id="12544480" name="PIG-2912-trunk.patch" size="6800" author="rohini" created="Mon, 10 Sep 2012 16:28:46 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Sep 2012 16:48:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256490</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyb133:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98319</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>