<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:08:47 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2791/PIG-2791.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2791] Pig does not work with ViewFileSystem</title>
                <link>https://issues.apache.org/jira/browse/PIG-2791</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The Yahoo Pig QE team ran into a blocking issue when trying to test Client-Side Mount Tables, on a Federated cluster with two NNs, this blocks Pig Testing on Federation. &lt;/p&gt;

&lt;p&gt;Federation relies strongly on the use of CSMT with viewFS, QE found that in this configuration it is not possible to enter grunt shell because Pig makes a call to getDefaultReplication() on the fs, which is ambiguous over viewFS and causes core to throw a org.apache.hadoop.fs.viewfs.NotInMountpointException: &quot;getDefaultReplication on empty path is invalid&quot;.&lt;/p&gt;

&lt;p&gt;This in turn cause Pig to exit with an internal error as follows:&lt;/p&gt;

&lt;p&gt;2012-07-06 22:20:25,657 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.Main - Apache Pig version 0.10.1.0.1206081058 (r1348169) compiled Jun 08 2012, 17:58:42&lt;br/&gt;
2012-07-06 22:20:26,074 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; WARN  org.apache.hadoop.conf.Configuration - mapred.used.genericoptionsparser is deprecated. Instead, use mapreduce.client.genericoptionsparser.used&lt;br/&gt;
2012-07-06 22:20:26,076 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.HExecutionEngine - Connecting to hadoop file system at: viewfs:///&lt;br/&gt;
2012-07-06 22:20:26,080 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; WARN  org.apache.hadoop.conf.Configuration - fs.default.name is deprecated. Instead, use fs.defaultFS&lt;br/&gt;
2012-07-06 22:20:26,522 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.Main - ERROR 2999: Unexpected internal error. getDefaultReplication on empty path is invalid&lt;br/&gt;
2012-07-06 22:20:26,522 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; WARN  org.apache.pig.Main - There is no log file to write to.&lt;br/&gt;
2012-07-06 22:20:26,522 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.Main - org.apache.hadoop.fs.viewfs.NotInMountpointException: getDefaultReplication on empty path is invalid&lt;br/&gt;
        at org.apache.hadoop.fs.viewfs.ViewFileSystem.getDefaultReplication(ViewFileSystem.java:482)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.datastorage.HDataStorage.init(HDataStorage.java:77)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.datastorage.HDataStorage.&amp;lt;init&amp;gt;(HDataStorage.java:58)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.HExecutionEngine.init(HExecutionEngine.java:205)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.HExecutionEngine.init(HExecutionEngine.java:118)&lt;br/&gt;
        at org.apache.pig.impl.PigContext.connect(PigContext.java:208)&lt;br/&gt;
        at org.apache.pig.PigServer.&amp;lt;init&amp;gt;(PigServer.java:246)&lt;br/&gt;
        at org.apache.pig.PigServer.&amp;lt;init&amp;gt;(PigServer.java:231)&lt;br/&gt;
        at org.apache.pig.tools.grunt.Grunt.&amp;lt;init&amp;gt;(Grunt.java:47)&lt;br/&gt;
        at org.apache.pig.Main.run(Main.java:487)&lt;br/&gt;
        at org.apache.pig.Main.main(Main.java:111)&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Pig QE&lt;/p&gt;</environment>
        <key id="12597844">PIG-2791</key>
            <summary>Pig does not work with ViewFileSystem</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="patwhitey2007">patrick white</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jul 2012 23:29:09 +0100</created>
                <updated>Thu, 2 May 2013 03:29:54 +0100</updated>
                            <resolved>Mon, 27 Aug 2012 21:49:01 +0100</resolved>
                                    <version>0.10.0</version>
                                                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13408835" author="daijy" created="Sun, 8 Jul 2012 03:38:38 +0100"  >&lt;p&gt;Seems we can drop &quot;getDefaultReplication&quot;. It does not get used anywhere.&lt;/p&gt;</comment>
                            <comment id="13411095" author="araceli" created="Wed, 11 Jul 2012 01:25:37 +0100"  >&lt;p&gt;Hi Daniel&lt;br/&gt;
I tried a couple of tests with the patch you provided. I&apos;m getting a different error now.&lt;/p&gt;

&lt;p&gt;Assuming the client side mount table has the following:&lt;/p&gt;

&lt;p&gt;  &amp;lt;property&amp;gt;&amp;lt;name&amp;gt;fs.viewfs.impl&amp;lt;/name&amp;gt;&lt;br/&gt;
     &amp;lt;value&amp;gt;org.apache.hadoop.fs.viewfs.ViewFileSystem&amp;lt;/value&amp;gt;&lt;br/&gt;
     &amp;lt;description&amp;gt;The File System for viewfs:uris&amp;lt;/description&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt; &amp;lt;property&amp;gt;&amp;lt;name&amp;gt;fs.default.name&amp;lt;/name&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;viewfs:///&amp;lt;/value&amp;gt;&lt;br/&gt;
    &amp;lt;final&amp;gt;true&amp;lt;/final&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;property&amp;gt;&lt;br/&gt;
    &amp;lt;name&amp;gt;fs.viewfs.mounttable.default.link./data1&amp;lt;/name&amp;gt;&lt;br/&gt;
    &amp;lt;value&amp;gt;hdfs://mycluster.yahoo.com:8020/user/me/pig/tests/data&amp;lt;/value&amp;gt;&lt;br/&gt;
  &amp;lt;/property&amp;gt;&lt;/p&gt;

&lt;p&gt;I confirm the file is visible ( I also tried fs -cat and it was successful)&lt;br/&gt;
-bash-3.1$ hadoop fs -ls /data1/singlefile/studenttab10k&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-   3 hadoopqa hdfs     219190 2012-07-10 23:02 /data1/singlefile/studenttab10k&lt;/p&gt;


&lt;p&gt;Next I try to a simple load and dump or store as follows:&lt;/p&gt;

&lt;p&gt;a = load &apos;/data1/singlefile/studenttab10k&apos; as (name, age, gpa);&lt;br/&gt;
dump a; &lt;/p&gt;


&lt;p&gt;This results in a stack trace:&lt;/p&gt;

&lt;p&gt;RROR 1066: Unable to open iterator for alias a. Backend error : Trying to get information for an absent application application_1341957183614_0010&lt;/p&gt;

&lt;p&gt;org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias a. Backend error : Trying to get information for an absent application application_1341957183614_0010&lt;br/&gt;
        at org.apache.pig.PigServer.openIterator(PigServer.java:852)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.processDump(GruntParser.java:682)&lt;br/&gt;
        at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:303)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:189)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:165)&lt;br/&gt;
        at org.apache.pig.tools.grunt.Grunt.run(Grunt.java:69)&lt;br/&gt;
        at org.apache.pig.Main.run(Main.java:490)&lt;br/&gt;
        at org.apache.pig.Main.main(Main.java:111)&lt;br/&gt;
Caused by: org.apache.hadoop.yarn.exceptions.impl.pb.YarnRemoteExceptionPBImpl: Trying to get information for an absent application application_1341957183614_0010&lt;br/&gt;
        at org.apache.hadoop.yarn.ipc.ProtoOverHadoopRpcEngine$Invoker.invoke(ProtoOverHadoopRpcEngine.java:156)&lt;br/&gt;
        at $Proxy9.getApplicationReport(Unknown Source)&lt;br/&gt;
        at org.apache.hadoop.yarn.api.impl.pb.client.ClientRMProtocolPBClientImpl.getApplicationReport(ClientRMProtocolPBClientImpl.java:116)&lt;br/&gt;
        at org.apache.hadoop.mapred.ResourceMgrDelegate.getApplicationReport(ResourceMgrDelegate.java:338)&lt;br/&gt;
        at org.apache.hadoop.mapred.ClientServiceDelegate.getProxy(ClientServiceDelegate.java:143)&lt;br/&gt;
        at org.apache.hadoop.mapred.ClientServiceDelegate.invoke(ClientServiceDelegate.java:298)&lt;br/&gt;
        at org.apache.hadoop.mapred.ClientServiceDelegate.getJobStatus(ClientServiceDelegate.java:383)&lt;br/&gt;
        at org.apache.hadoop.mapred.YARNRunner.getJobStatus(YARNRunner.java:481)&lt;br/&gt;
        at org.apache.hadoop.mapreduce.Cluster.getJob(Cluster.java:184)&lt;br/&gt;
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:627)&lt;br/&gt;
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:625)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at javax.security.auth.Subject.doAs(Subject.java:396)&lt;br/&gt;
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1177)&lt;br/&gt;
        at org.apache.hadoop.mapred.JobClient.getJobUsingCluster(JobClient.java:625)&lt;br/&gt;
        at org.apache.hadoop.mapred.JobClient.getTaskReports(JobClient.java:679)&lt;br/&gt;
        at org.apache.hadoop.mapred.JobClient.getMapTaskReports(JobClient.java:673)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.Launcher.getStats(Launcher.java:148)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher.launchPig(MapReduceLauncher.java:383)&lt;br/&gt;
        at org.apache.pig.PigServer.launchPlan(PigServer.java:1275)&lt;br/&gt;
        at org.apache.pig.PigServer.executeCompiledLogicalPlan(PigServer.java:1260)&lt;br/&gt;
        at org.apache.pig.PigServer.storeEx(PigServer.java:957)&lt;br/&gt;
        at org.apache.pig.PigServer.store(PigServer.java:924)&lt;br/&gt;
        at org.apache.pig.PigServer.openIterator(PigServer.java:837)&lt;br/&gt;
        ... 7 more&lt;br/&gt;
================================================================================&lt;br/&gt;
Pig Stack Trace&lt;br/&gt;
---------------&lt;br/&gt;
ERROR 2997: Encountered IOException. File or directory -l does not exist.&lt;/p&gt;

&lt;p&gt;java.io.IOException: File or directory -l does not exist.&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.processLS(GruntParser.java:766)&lt;br/&gt;
        at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:366)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:189)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:165)&lt;br/&gt;
        at org.apache.pig.tools.grunt.Grunt.run(Grunt.java:69)&lt;br/&gt;
        at org.apache.pig.Main.run(Main.java:490)&lt;br/&gt;
        at org.apache.pig.Main.main(Main.java:111)&lt;/p&gt;


&lt;p&gt;Additionally the following also fails:&lt;/p&gt;

&lt;p&gt;cd /data1/singlefile&lt;br/&gt;
a = load &apos;studenttab10k&apos; as (name, age, gpa);&lt;br/&gt;
dump a; &lt;/p&gt;
</comment>
                            <comment id="13411247" author="daijy" created="Wed, 11 Jul 2012 06:23:46 +0100"  >&lt;p&gt;Can you see AM log on the webUI?&lt;/p&gt;</comment>
                            <comment id="13411851" author="rohini" created="Wed, 11 Jul 2012 19:54:13 +0100"  >&lt;p&gt;Daniel,&lt;br/&gt;
  This is the actual cause. &lt;/p&gt;

&lt;p&gt;Caused by: org.apache.hadoop.fs.viewfs.NotInMountpointException: getDefaultBlockSize on empty path is invalid&lt;br/&gt;
	at org.apache.hadoop.fs.viewfs.ViewFileSystem.getDefaultBlockSize(ViewFileSystem.java:477)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigInputFormat.getSplits(PigInputFormat.java:276)&lt;/p&gt;</comment>
                            <comment id="13411993" author="daryn" created="Wed, 11 Jul 2012 22:06:00 +0100"  >&lt;p&gt;The problem is there is no single replication factor or block size with viewfs.  It&apos;s dependent on each mounted fs.  The &lt;tt&gt;getDefaultBlockSize()&lt;/tt&gt; and &lt;tt&gt;getDefaultReplication()&lt;/tt&gt; were deprecated in favor of methods that accept a &lt;tt&gt;Path&lt;/tt&gt;.  This allows a fs like viewfs to resolve the mount point for a path and return the correct values.&lt;/p&gt;

&lt;p&gt;The easy solution is don&apos;t call the methods at all and let the smaller signature create, etc methods implicitly get the replication and block size.  I understand that&apos;s not an option for most of pig&apos;s use cases.&lt;/p&gt;

&lt;p&gt;Hbase encountered the same problem and fixed it with a little reflection magic on &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-6067&quot; title=&quot;HBase won&amp;#39;t start when hbase.rootdir uses ViewFileSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-6067&quot;&gt;&lt;del&gt;HBASE-6067&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13412478" author="rohini" created="Thu, 12 Jul 2012 04:20:40 +0100"  >&lt;p&gt;Added getDefaultBlockSize(Path) to the HadoopShims.&lt;/p&gt;

&lt;p&gt;Had to use 2.0.0-alpha (&lt;a href=&quot;http://central.maven.org/maven2/org/apache/hadoop/hadoop-common/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://central.maven.org/maven2/org/apache/hadoop/hadoop-common/&lt;/a&gt;) as 0.23.1 from maven did not have fs.getDefaultBlockSize(Path) api. &lt;/p&gt;
</comment>
                            <comment id="13412575" author="daijy" created="Thu, 12 Jul 2012 08:18:14 +0100"  >&lt;p&gt;2.0.0-alpha seems to be a big change. We need to carefully test it to make sure unit tests pass.&lt;/p&gt;</comment>
                            <comment id="13412769" author="daryn" created="Thu, 12 Jul 2012 14:23:18 +0100"  >&lt;p&gt;You might consider replacing &lt;tt&gt;fs = new Path(&quot;/&quot;).getFileSystem(conf)&lt;/tt&gt; with &lt;tt&gt;fs = FileSystem.get(conf)&lt;/tt&gt; to get the default filesystem.  I&apos;d suggest adding &lt;tt&gt;path = fs.getWorkingDirectory()&lt;/tt&gt; after that line so the &lt;tt&gt;isFsPath&lt;/tt&gt; boolean can be removed.&lt;/p&gt;

&lt;p&gt;Do you need to add anything to support the new api on trunk?&lt;/p&gt;</comment>
                            <comment id="13412892" author="rohini" created="Thu, 12 Jul 2012 16:55:03 +0100"  >&lt;p&gt;@Daryn,&lt;br/&gt;
    The path variable could refer to other schemes like hbase://. Even though the variable is not used elsewhere I did not want to reassign a different value and change the meaning of it. Also there is a fs.setWorkingDirectory() in the code after that.&lt;/p&gt;

&lt;p&gt;Source code: &lt;a href=&quot;http://svn.apache.org/viewvc/pig/branches/branch-0.10/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/PigInputFormat.java?view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.apache.org/viewvc/pig/branches/branch-0.10/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/PigInputFormat.java?view=markup&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Line 232&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;@Daniel,&lt;br/&gt;
    It should not be a problem as long as the APIs are compatible. Only if there was a change of class from interface to abstract or vice versa between 0.23.1 and 2.0.0-alpha then there might be runtime issues even if compilation was successful. But just to be sure, I will kick off the e2e tests for 23 with the patch. I will also check with the core team folks who were doing 0.23 to 2.0.0 tests. &lt;/p&gt;</comment>
                            <comment id="13412903" author="cheolsoo" created="Thu, 12 Jul 2012 17:19:46 +0100"  >&lt;p&gt;Hi, I did some work to get unit test passing against 2.0.0-snapthot a while ago and recorded what I found at &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2700&quot; title=&quot;Unit tests fail against Hadoop 2.0.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2700&quot;&gt;&lt;del&gt;PIG-2700&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Please feel free to use the patch if that&apos;s still applicable.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13413391" author="araceli" created="Fri, 13 Jul 2012 01:50:39 +0100"  >&lt;p&gt;Short answers: the patch looks good.&lt;br/&gt;
Comments:&lt;br/&gt;
Here is a list of the manual tests I attempted. I tried running without a client side mount table and with a client side table. With hdfs as the default and viewfs as the default. With two name nodes. Reading and writing accross namenodes. It looks pretty good. There were some errors, but I believe they are expected due to invalid syntax. &lt;/p&gt;</comment>
                            <comment id="13413504" author="rohini" created="Fri, 13 Jul 2012 06:24:42 +0100"  >&lt;p&gt;@Cheolsoo&lt;br/&gt;
   Thanks for the pointer. I had only run the test-commit unit tests. I will include your patch also and do a full unit test suite run to see if there are any other issues. Thanks again. &lt;/p&gt;</comment>
                            <comment id="13420330" author="rohini" created="Sun, 22 Jul 2012 22:03:04 +0100"  >&lt;p&gt; In addition to &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2791&quot; title=&quot;Pig does not work with ViewFileSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2791&quot;&gt;&lt;del&gt;PIG-2791&lt;/del&gt;&lt;/a&gt;-2.patch, this patch ontains fix for unit tests for hadoop 23. Even after including Cheolsoo&apos;s patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2700&quot; title=&quot;Unit tests fail against Hadoop 2.0.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2700&quot;&gt;&lt;del&gt;PIG-2700&lt;/del&gt;&lt;/a&gt;, there were lot of unit test failures.&lt;/p&gt;

&lt;p&gt;1) MiniYarnCluster node manager would not start with guice errors due to to jersey-guice-1.8 and guice-2.0 incompatibility. Took 2 days to figure this one out. Had to change dependency to guice-3.0 and add few more dependencies. &lt;br/&gt;
2) FSShell copy command behaviour has changed. Had to do mkdir before copy commands as copy commands do not create the destination directory structure if it does not exist. Also had to add creation of fs working directory (user home directory in dfs) while creating MiniCluster.&lt;/p&gt;

&lt;p&gt;  Ran full suite of unit and e2e tests for hadoop 23 with branch 10. &lt;/p&gt;</comment>
                            <comment id="13420331" author="rohini" created="Sun, 22 Jul 2012 22:06:22 +0100"  >&lt;p&gt;   Had also tried latest 0.23.3-SNAPSHOT instead of 2.0.0-alpha. Had same unit test failures. So decided to go with 2.0.0-alpha itself as dependency.&lt;/p&gt;</comment>
                            <comment id="13420669" author="daryn" created="Mon, 23 Jul 2012 15:12:39 +0100"  >&lt;p&gt;Question: why does the shim use the &lt;tt&gt;Path&lt;/tt&gt; based variant for 23 by not 2.0?  23, 2.0, and trunk all require use of the new api.  The new api is also present in later versions of 1.x but isn&apos;t strictly required since &lt;tt&gt;ViewFileSystem&lt;/tt&gt; isn&apos;t in 1.x.&lt;/p&gt;</comment>
                            <comment id="13420967" author="rohini" created="Mon, 23 Jul 2012 22:16:15 +0100"  >&lt;p&gt;Daryn,&lt;br/&gt;
   The HadoopShims in hadoop20 is for 20.x and 1.x versions of hadoop and does not use Path based variant of the API. The HadoopShims in hadoop23 is for 23 and 2.0 versions of hadoop and uses the Path based variant of the API. I am assuming you have mistaken 20 as 2.0. &lt;/p&gt;</comment>
                            <comment id="13421553" author="daryn" created="Tue, 24 Jul 2012 18:16:58 +0100"  >&lt;p&gt;+1 Rohini and I spoke and she cleared up my confusion.  Looks good!&lt;/p&gt;</comment>
                            <comment id="13424052" author="rohini" created="Fri, 27 Jul 2012 19:42:25 +0100"  >&lt;p&gt;Just made a minor change to the patch so that if the ivy dependency was changed to 0.23.3 also all the tests pass. Changed Util.Hadoop2_0() to (Util.isHadoop23 || Util.isHadoop2_0()) for fs copy command.&lt;/p&gt;

</comment>
                            <comment id="13424058" author="daijy" created="Fri, 27 Jul 2012 19:48:16 +0100"  >&lt;p&gt;Commit &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2791&quot; title=&quot;Pig does not work with ViewFileSystem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2791&quot;&gt;&lt;del&gt;PIG-2791&lt;/del&gt;&lt;/a&gt;-4-branch10.patch to 0.10 branch. Will check into trunk once trunk tests pass.&lt;/p&gt;</comment>
                            <comment id="13424480" author="rohini" created="Sun, 29 Jul 2012 04:02:23 +0100"  >&lt;p&gt;Daniel,&lt;br/&gt;
   Realized what caused your test failure. Had removed conf_file.delete() in MiniDFSCluster.java as it was causing tests to randomly fail without hadoop-site.xml if two builds were running simultaneously in hudson (patch builds and actual builds). If you switch between versions (23 and then 20), then the hadoop-site.xml created in /&amp;lt;homedir&amp;gt;/pigtest/conf is not correct and causes failure during MiniDfsCluster setup. Saw that in 0.10 it is created in build/classes instead of home dir and that fixes the problem better. Updated the trunk patch putting the conf_file.delete() back. &lt;/p&gt;

&lt;p&gt;Should I create a separate jira for putting conf_file.delete back in pig 0.10 with build/classes or post the patch here itself as this jira is not closed yet. Don&apos;t want developers to waste time debugging this as a issue.&lt;/p&gt;</comment>
                            <comment id="13424481" author="rohini" created="Sun, 29 Jul 2012 04:11:41 +0100"  >&lt;p&gt;Uploaded the change for branch-0.10 to put back conf_file.delete and change homedir/pigtest/conf to build/classes&lt;/p&gt;</comment>
                            <comment id="13433501" author="rohini" created="Mon, 13 Aug 2012 21:29:17 +0100"  >&lt;p&gt;Updated FixMiniCluster-branch10-1.patch as it did not apply cleanly (&lt;a href=&quot;https://reviews.apache.org/r/6082/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/6082/&lt;/a&gt;). &lt;/p&gt;

&lt;p&gt;Removed the change to build/classes as porting &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2326&quot; title=&quot;Pig minicluster tests can not be run from eclipse&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2326&quot;&gt;&lt;del&gt;PIG-2326&lt;/del&gt;&lt;/a&gt; to branch-0.10 will include that change and should handle the multiple builds failing in same build machine problem.&lt;/p&gt;</comment>
                            <comment id="13434117" author="daryn" created="Tue, 14 Aug 2012 14:36:38 +0100"  >&lt;p&gt;Updated summary since the issue is unrelated to federation.&lt;/p&gt;</comment>
                            <comment id="13442707" author="daijy" created="Mon, 27 Aug 2012 21:49:01 +0100"  >&lt;p&gt;Commit FixMiniCluster-branch10-1.patch to 0.10.&lt;/p&gt;</comment>
                            <comment id="13446243" author="rohini" created="Fri, 31 Aug 2012 19:48:31 +0100"  >&lt;p&gt;Daniel,&lt;br/&gt;
   You have not committed the patch to trunk yet.&lt;/p&gt;</comment>
                            <comment id="13461959" author="daijy" created="Mon, 24 Sep 2012 19:07:30 +0100"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12614252">HIVE-3645</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12608951">PIG-2930</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12557107">HADOOP-8430</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12540745" name="FixMiniCluster-branch10-1.patch" size="1382" author="rohini" created="Mon, 13 Aug 2012 21:29:17 +0100"/>
                            <attachment id="12538266" name="FixMiniCluster-branch10.patch" size="1738" author="rohini" created="Sun, 29 Jul 2012 04:11:41 +0100"/>
                            <attachment id="12535590" name="PIG-2791-0.patch" size="1477" author="daijy" created="Sun, 8 Jul 2012 20:12:01 +0100"/>
                            <attachment id="12536165" name="PIG-2791-1.patch" size="7054" author="rohini" created="Thu, 12 Jul 2012 04:20:40 +0100"/>
                            <attachment id="12536166" name="PIG-2791-2.patch" size="6820" author="rohini" created="Thu, 12 Jul 2012 04:26:22 +0100"/>
                            <attachment id="12537524" name="PIG-2791-3-branch10.patch" size="15386" author="rohini" created="Sun, 22 Jul 2012 21:57:09 +0100"/>
                            <attachment id="12537525" name="PIG-2791-3-trunk.patch" size="15873" author="rohini" created="Sun, 22 Jul 2012 21:57:09 +0100"/>
                            <attachment id="12538193" name="PIG-2791-4-branch10.patch" size="15407" author="rohini" created="Fri, 27 Jul 2012 19:42:25 +0100"/>
                            <attachment id="12538194" name="PIG-2791-4-trunk.patch" size="15894" author="rohini" created="Fri, 27 Jul 2012 19:42:25 +0100"/>
                            <attachment id="12538265" name="PIG-2791-5-trunk.patch" size="14984" author="rohini" created="Sun, 29 Jul 2012 04:02:22 +0100"/>
                            <attachment id="12536316" name="asf_test_notes.txt" size="7321" author="araceli" created="Fri, 13 Jul 2012 01:50:39 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 8 Jul 2012 02:38:38 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256418</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyazxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98134</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>