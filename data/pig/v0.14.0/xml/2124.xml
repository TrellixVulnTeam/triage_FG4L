<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:07:02 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2124/PIG-2124.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2124] Script never ending when joining from the same source</title>
                <link>https://issues.apache.org/jira/browse/PIG-2124</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Considering the following script, it works perfectly fine or the script never ends depending on the fields used at output.&lt;/p&gt;

&lt;p&gt;input (&quot;scores&quot; file) contains:&lt;br/&gt;
------------------&lt;br/&gt;
test1;0.1&lt;br/&gt;
test2;0.9&lt;br/&gt;
test1;0.3&lt;br/&gt;
------------------&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------------&lt;br/&gt;
score_list = LOAD  &apos;scores&apos; USING PigStorage(&apos;;&apos;)&lt;br/&gt;
  AS (word: chararray, score: double);&lt;/p&gt;

&lt;p&gt;score_list_ = FOREACH score_list GENERATE&lt;br/&gt;
  word,&lt;br/&gt;
  score,&lt;br/&gt;
  0 AS joinField;&lt;/p&gt;

&lt;p&gt;group_score = GROUP score_list ALL;&lt;br/&gt;
sum_score = FOREACH group_score GENERATE&lt;br/&gt;
  0 AS joinField,&lt;br/&gt;
  SUM(score_list.score) as scoreTotal;&lt;/p&gt;

&lt;p&gt;score_with_sum = JOIN score_list_ BY joinField, sum_score BY joinField;&lt;br/&gt;
out = FOREACH score_with_sum GENERATE word, (score / scoreTotal);&lt;br/&gt;
DUMP out;&lt;br/&gt;
------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;This works fine&lt;/p&gt;

&lt;p&gt;But if I change &quot;out&quot; to : out = FOREACH score_with_sum GENERATE word;&lt;/p&gt;

&lt;p&gt;Then the script never ends and the output keeps repeating lines likes:&lt;br/&gt;
2011-06-15 15:00:22,536 &lt;span class=&quot;error&quot;&gt;&amp;#91;SpillThread&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Finished spill 24&lt;br/&gt;
2011-06-15 15:00:22,889 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Spilling map output: record full = true&lt;br/&gt;
2011-06-15 15:00:22,889 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - bufstart = 65535810; bufend = 68157240; bufvoid = 99614720&lt;br/&gt;
2011-06-15 15:00:22,889 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - kvstart = 327661; kvend = 262124; length = 327680&lt;br/&gt;
2011-06-15 15:00:22,994 &lt;span class=&quot;error&quot;&gt;&amp;#91;SpillThread&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Finished spill 25&lt;br/&gt;
2011-06-15 15:00:23,345 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Spilling map output: record full = true&lt;br/&gt;
2011-06-15 15:00:23,345 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - bufstart = 68157240; bufend = 70778670; bufvoid = 99614720&lt;br/&gt;
2011-06-15 15:00:23,345 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - kvstart = 262124; kvend = 196587; length = 327680&lt;br/&gt;
2011-06-15 15:00:23,447 &lt;span class=&quot;error&quot;&gt;&amp;#91;SpillThread&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Finished spill 26&lt;br/&gt;
2011-06-15 15:00:23,794 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Spilling map output: record full = true&lt;br/&gt;
2011-06-15 15:00:23,794 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - bufstart = 70778670; bufend = 73400100; bufvoid = 99614720&lt;br/&gt;
2011-06-15 15:00:23,794 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - kvstart = 196587; kvend = 131050; length = 327680&lt;br/&gt;
2011-06-15 15:00:23,896 &lt;span class=&quot;error&quot;&gt;&amp;#91;SpillThread&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Finished spill 27&lt;br/&gt;
2011-06-15 15:00:24,243 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Spilling map output: record full = true&lt;br/&gt;
2011-06-15 15:00:24,243 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - bufstart = 73400100; bufend = 76021530; bufvoid = 99614720&lt;br/&gt;
2011-06-15 15:00:24,243 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - kvstart = 131050; kvend = 65513; length = 327680&lt;br/&gt;
2011-06-15 15:00:24,346 &lt;span class=&quot;error&quot;&gt;&amp;#91;SpillThread&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Finished spill 28&lt;br/&gt;
2011-06-15 15:00:24,692 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Spilling map output: record full = true&lt;br/&gt;
2011-06-15 15:00:24,692 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - bufstart = 76021530; bufend = 78642970; bufvoid = 99614720&lt;br/&gt;
2011-06-15 15:00:24,693 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - kvstart = 65513; kvend = 327657; length = 327680&lt;br/&gt;
2011-06-15 15:00:24,793 &lt;span class=&quot;error&quot;&gt;&amp;#91;SpillThread&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Finished spill 29&lt;br/&gt;
2011-06-15 15:00:25,144 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - Spilling map output: record full = true&lt;br/&gt;
2011-06-15 15:00:25,144 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - bufstart = 78642970; bufend = 81264400; bufvoid = 99614720&lt;br/&gt;
2011-06-15 15:00:25,144 &lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-13&amp;#93;&lt;/span&gt; INFO  org.apache.hadoop.mapred.MapTask - kvstart = 327657; kvend = 262120; length = 327680&lt;/p&gt;


&lt;p&gt;P.S. I know it&apos;s possible to refactor the script using casting to scalar &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12510437">PIG-2124</key>
            <summary>Script never ending when joining from the same source</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="t.croiset">Tristan Croiset</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jun 2011 14:05:14 +0100</created>
                <updated>Thu, 26 Apr 2012 21:32:58 +0100</updated>
                            <resolved>Fri, 5 Aug 2011 17:58:33 +0100</resolved>
                                    <version>0.8.1</version>
                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13050051" author="daijy" created="Wed, 15 Jun 2011 22:36:11 +0100"  >&lt;p&gt;This is related to ColumnMapKeyPrune optimization. If we disable this rule using &quot;-t ColumnMapKeyPrune&quot;, the error goes away.&lt;/p&gt;</comment>
                            <comment id="13050782" author="daijy" created="Thu, 16 Jun 2011 23:48:28 +0100"  >&lt;p&gt;This happens when group by a constant (all), and then we prune all columns except group. This results a CoGroup with no input. Should be a rare case, only fix in trunk.&lt;/p&gt;</comment>
                            <comment id="13066226" author="alangates" created="Fri, 15 Jul 2011 22:35:54 +0100"  >&lt;p&gt;Marking as ready for review.&lt;/p&gt;</comment>
                            <comment id="13071307" author="thejas" created="Tue, 26 Jul 2011 20:42:44 +0100"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13080075" author="daijy" created="Fri, 5 Aug 2011 17:58:33 +0100"  >&lt;p&gt;Unit test pass. Test-patch pass:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; +1 overall.  &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 @author.  The patch does not contain any @author tags.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 tests included.  The patch appears to include 3 new or modified tests.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;


&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12482872" name="PIG-2124-1.patch" size="3068" author="daijy" created="Thu, 16 Jun 2011 23:48:28 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jun 2011 21:36:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65993</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyavp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97446</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>