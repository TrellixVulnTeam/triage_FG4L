<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:59:18 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2380/PIG-2380.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2380] Expose version information more cleanly</title>
                <link>https://issues.apache.org/jira/browse/PIG-2380</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Currently, there is no clean way to get version information (short of trying to instantiate a class that only exists in the version you want and catching an exception, or something like that). This patch exposes major, minor, patch, svn revision, and build time (basically, all of the pieces of the current version).&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pig.Main;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class Thing {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(Main.getMajorVersion());
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(Main.getMinorVersion());
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(Main.getPatchVersion());
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(Main.getSvnRevision());
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(Main.getBuildTime());
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will return&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
0
11
0
1202387
Nov 15 2011, 15:37:14
0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which comprises&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Apache Pig version 0.11.0-SNAPSHOT (r1202387) 
compiled Nov 15 2011, 15:37:14
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve run ant test-commit, but not ant test. This can easily be ported to old version, but I only tested it against trunk.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12531746">PIG-2380</key>
            <summary>Expose version information more cleanly</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jcoveney">Jonathan Coveney</assignee>
                                    <reporter username="jcoveney">Jonathan Coveney</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Nov 2011 05:17:02 +0000</created>
                <updated>Fri, 22 Feb 2013 04:53:40 +0000</updated>
                            <resolved>Fri, 18 Nov 2011 10:20:05 +0000</resolved>
                                                    <fixVersion>0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13152110" author="azaroth" created="Thu, 17 Nov 2011 15:47:57 +0000"  >&lt;p&gt;Jonathan,&lt;br/&gt;
the patch does not apply cleanly to trunk for me. Could you rebase it?&lt;/p&gt;

&lt;p&gt;Also, for the static initializer, running the Main class without packaging it into a jar (that means, using the build folder for the classpath) throws an exception (also in current trunk).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java -cp build/classes:build/ivy/lib/Pig/* org.apache.pig.Main -h
11/11/17 16:45:39 ERROR pig.Main: ERROR 2999: Unexpected internal error. unable to read pigs manifest file
11/11/17 16:45:39 WARN pig.Main: There is no log file to write to.
11/11/17 16:45:39 ERROR pig.Main: java.lang.RuntimeException: unable to read pigs manifest file
	at org.apache.pig.Main.getVersionString(Main.java:749)
	at org.apache.pig.Main.run(Main.java:249)
	at org.apache.pig.Main.main(Main.java:111)
Caused by: java.lang.NullPointerException
	at java.io.File.&amp;lt;init&amp;gt;(File.java:222)
	at java.util.jar.JarFile.&amp;lt;init&amp;gt;(JarFile.java:72)
	at org.apache.pig.Main.getVersionString(Main.java:737)
	... 2 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I would propose to fix it, we don&apos;t need to throw a RuntimeException for it.&lt;br/&gt;
Let&apos;s just warn the user and go on.&lt;/p&gt;</comment>
                            <comment id="13152370" author="jcoveney" created="Thu, 17 Nov 2011 21:49:10 +0000"  >&lt;p&gt;I changed the logic so it will just warn the user if the manifest isn&apos;t available. This has the beneficial side effect (which you predicted, Gianmarco) of letting people run -h without the Pig jar present. I rediffed against an updated branch and successfully applied to a clean branch, but let me know if you hit an issue.&lt;/p&gt;

&lt;p&gt;I ran ant test-commit just to be thorough: no issues &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13152762" author="azaroth" created="Fri, 18 Nov 2011 10:20:05 +0000"  >&lt;p&gt;+1&lt;br/&gt;
Committed to trunk.&lt;br/&gt;
Thanks Jonathan!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12536788">PIG-2455</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12504030" name="PIG2380.patch" size="26890" author="jcoveney" created="Thu, 17 Nov 2011 05:18:19 +0000"/>
                            <attachment id="12504120" name="PIG2380_1.patch" size="28116" author="jcoveney" created="Thu, 17 Nov 2011 21:49:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 Nov 2011 15:47:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>217482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyawxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97647</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>