<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:07:00 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2122/PIG-2122.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2122] Parameter Substitution doesn&apos;t work in the Grunt shell</title>
                <link>https://issues.apache.org/jira/browse/PIG-2122</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Simple param substitution and things like %declare (as copied out of the docs) don&apos;t work in the grunt shell.&lt;/p&gt;

&lt;p&gt;#Start Pig with: Start Pig with: bin/pig -x local -p time=FOO&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;foo = LOAD &apos;/user/grant/foo.txt&apos; AS (a:chararray, b:chararray, c:chararray);&lt;br/&gt;
Y = foreach foo generate *, &apos;$time&apos;;&lt;br/&gt;
dump Y;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Output:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2011-06-13 20:22:24,197 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.util.MapRedUtil - Total input paths to process : 1&lt;br/&gt;
(1 2 3,,,$time)&lt;br/&gt;
(4 5 6,,,$time)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Same script, stored in junk.pig, run as: bin/pig -x local -p time=FOO junk.pig&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2011-06-13 20:23:38,864 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.util.MapRedUtil - Total input paths to process : 1&lt;br/&gt;
(1 2 3,,,FOO)&lt;br/&gt;
(4 5 6,,,FOO)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Also, things like don&apos;t work (nor does %declare):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;grunt&amp;gt; %default DATE &apos;20090101&apos;;    &lt;br/&gt;
2011-06-13 20:18:19,943 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1000: Error during parsing. Encountered &quot; &amp;lt;PATH&amp;gt; &quot;%default &quot;&quot; at line 1, column 1.&lt;br/&gt;
Was expecting one of:&lt;br/&gt;
    &amp;lt;EOF&amp;gt; &lt;br/&gt;
    &quot;cat&quot; ...&lt;br/&gt;
    &quot;fs&quot; ...&lt;br/&gt;
    &quot;sh&quot; ...&lt;br/&gt;
    &quot;cd&quot; ...&lt;br/&gt;
    &quot;cp&quot; ...&lt;br/&gt;
    &quot;copyFromLocal&quot; ...&lt;br/&gt;
    &quot;copyToLocal&quot; ...&lt;br/&gt;
    &quot;dump&quot; ...&lt;br/&gt;
    &quot;describe&quot; ...&lt;br/&gt;
    &quot;aliases&quot; ...&lt;br/&gt;
    &quot;explain&quot; ...&lt;br/&gt;
    &quot;help&quot; ...&lt;br/&gt;
    &quot;kill&quot; ...&lt;br/&gt;
    &quot;ls&quot; ...&lt;br/&gt;
    &quot;mv&quot; ...&lt;br/&gt;
    &quot;mkdir&quot; ...&lt;br/&gt;
    &quot;pwd&quot; ...&lt;br/&gt;
    &quot;quit&quot; ...&lt;br/&gt;
    &quot;register&quot; ...&lt;br/&gt;
    &quot;rm&quot; ...&lt;br/&gt;
    &quot;rmf&quot; ...&lt;br/&gt;
    &quot;set&quot; ...&lt;br/&gt;
    &quot;illustrate&quot; ...&lt;br/&gt;
    &quot;run&quot; ...&lt;br/&gt;
    &quot;exec&quot; ...&lt;br/&gt;
    &quot;scriptDone&quot; ...&lt;br/&gt;
    &quot;&quot; ...&lt;br/&gt;
    &amp;lt;EOL&amp;gt; ...&lt;br/&gt;
    &quot;;&quot; ...&lt;/p&gt;

&lt;p&gt;Details at logfile: /Users/grant.ingersoll/projects/apache/pig/release-0.8.1/pig_1308002917912.log&lt;/p&gt;&lt;/blockquote&gt;
</description>
                <environment></environment>
        <key id="12510249">PIG-2122</key>
            <summary>Parameter Substitution doesn&apos;t work in the Grunt shell</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="gsingers">Grant Ingersoll</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jun 2011 01:25:16 +0100</created>
                <updated>Fri, 21 Nov 2014 05:59:09 +0000</updated>
                            <resolved>Thu, 26 Jun 2014 05:22:24 +0100</resolved>
                                    <version>0.8.0</version>
                    <version>0.8.1</version>
                    <version>0.12.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>grunt</component>
                        <due></due>
                            <votes>10</votes>
                                    <watches>14</watches>
                                                                <comments>
                            <comment id="13049829" author="olgan" created="Wed, 15 Jun 2011 16:53:39 +0100"  >&lt;p&gt;This is by design. We did not see any need for parameter substitution in the interactive mode. The current implementation is based on a preprocessor applied to the entire script.&lt;/p&gt;

&lt;p&gt;We would need a compelling case to reconsider.&lt;/p&gt;</comment>
                            <comment id="13049847" author="gsingers" created="Wed, 15 Jun 2011 17:30:52 +0100"  >&lt;p&gt;Seems to me one of the major use cases of the Grunt shell is to test your scripts line by line.  If you don&apos;t have parameter substitution, then you have to futz around with hand editing out the substitutions to run it in Grunt, and then add it back in before you submit it to run in file mode.  &lt;/p&gt;

&lt;p&gt;The other use case is, the documentation doesn&apos;t work!  I would bet that many people simply try out what is on the website as examples, so when things like declare, etc. as copy and pasted from the website don&apos;t work, they lose confidence in the tool.&lt;/p&gt;</comment>
                            <comment id="13049910" author="dvryaboy" created="Wed, 15 Jun 2011 18:37:50 +0100"  >&lt;p&gt;This really does diminish usefulness of Grunt significantly.&lt;br/&gt;
There isn&apos;t an easy way to apply the existing preprocessor here, which is a shame, but it&apos;s an issue that comes up often. It would be great if someone took a crack at fixing this.. theoretically having a in-memory variable map and doing line-by-line substitution before handing off to the parser should work, right?&lt;/p&gt;</comment>
                            <comment id="13049920" author="olgan" created="Wed, 15 Jun 2011 18:50:34 +0100"  >&lt;p&gt;I think the trick would be to maintain backward compatibility.&lt;/p&gt;</comment>
                            <comment id="13049922" author="gsingers" created="Wed, 15 Jun 2011 18:54:17 +0100"  >&lt;p&gt;I know it would be nice, but is back compat really a requirement for a pre 1.0 release?&lt;/p&gt;</comment>
                            <comment id="13049926" author="olgan" created="Wed, 15 Jun 2011 19:03:53 +0100"  >&lt;p&gt;Backward compatibility is a requirement because we have many customers and many of them uset this feature especially in production environment. &lt;/p&gt;

&lt;p&gt;In my opinion design/implementation that does not provide backward comptaibility for batch processing is a non-starter.&lt;/p&gt;</comment>
                            <comment id="13101302" author="jwartes" created="Fri, 9 Sep 2011 17:08:55 +0100"  >&lt;p&gt;I found this JIRA issue because: &lt;br/&gt;
1) I was copying a script into the shell for testing and was confused why it was wasn&apos;t working.&lt;br/&gt;
2) Reading the documentation and attempting alternative methods to set parameters didn&apos;t work either.&lt;/p&gt;

&lt;p&gt;I mention this because I hit &lt;b&gt;both&lt;/b&gt; of cases previously presented as reasons to fix this issue. The second, because of the first.&lt;/p&gt;

&lt;p&gt;If this issue cannot be fixed, I&apos;d suggest the grunt shell throw a more helpful error when it encounters preprocessor directives, and warn when it sees likely attempts at dollar-sign interpolation.&lt;/p&gt;</comment>
                            <comment id="13259606" author="jalkanen" created="Mon, 23 Apr 2012 14:53:45 +0100"  >&lt;p&gt;Upvoting; this makes debugging Pig scripts &lt;b&gt;really&lt;/b&gt; hard using Grunt. I mostly run a part of the script simply by cut-n-pasting from the editor into a Grunt shell, then stop to examine the intermediate values. Having to do manual search-replace for variables makes them useless.&lt;/p&gt;</comment>
                            <comment id="13259781" author="azaroth" created="Mon, 23 Apr 2012 19:01:27 +0100"  >&lt;p&gt;Hi,&lt;br/&gt;
I can agree that the feature is useful.&lt;/p&gt;

&lt;p&gt;However to debug a Pig script you can use the -debug and -dryrun options:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#8211;dryrun
Flag. With &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; option, the script is not run and a fully 
substituted Pig script produced in the current working 
directory named original_script_name.substituted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This should help you avoid manual search/replace.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;</comment>
                            <comment id="13259783" author="azaroth" created="Mon, 23 Apr 2012 19:04:54 +0100"  >&lt;p&gt;On the backward compatibility issue, I must say that I think modifying Grunt and interactive mode is not as bad as modifying the batch mode.&lt;br/&gt;
I don&apos;t feel changing Grunt should be a big issue as most of the production job that I know are batch scripts which would be unaffected.&lt;/p&gt;</comment>
                            <comment id="13464326" author="jhartman" created="Thu, 27 Sep 2012 01:35:24 +0100"  >&lt;p&gt;This irritates me on a weekly basis. I&apos;m often running ad-hoc analysis in grunt with snippets taken from some heavier scripts I&apos;ve written and I get bitten ALL the time.&lt;/p&gt;</comment>
                            <comment id="13466619" author="aniket486" created="Mon, 1 Oct 2012 04:27:00 +0100"  >&lt;p&gt;There is a workaround to this that you can use-&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Store your script line in a file (with $params included).&lt;/li&gt;
	&lt;li&gt;Start grunt interactively&lt;/li&gt;
	&lt;li&gt;type- run -param a=b -param c=d myscript.pig&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This should do the trick.&lt;/p&gt;</comment>
                            <comment id="13470566" author="crashedsnow" created="Fri, 5 Oct 2012 20:03:13 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aniket486&quot; class=&quot;user-hover&quot; rel=&quot;aniket486&quot;&gt;Aniket Mokashi&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Your workaround is not really much help if you&apos;re trying to debug a script (i.e. line by line, DUMPing or ILLUSTRATing as you go.  We want to be able to use the interactive shell with the existing script (including params) but execute it line by line.&lt;/p&gt;</comment>
                            <comment id="14026138" author="phapalegaurav" created="Tue, 10 Jun 2014 06:50:56 +0100"  >&lt;p&gt;It would be great if this issue is fixed.&lt;br/&gt;
I&apos;m not able to understand how adding parameter substitution will affect back comp.&lt;/p&gt;</comment>
                            <comment id="14043760" author="alangates" created="Wed, 25 Jun 2014 18:11:02 +0100"  >&lt;p&gt;+1 for the patch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olgan&quot; class=&quot;user-hover&quot; rel=&quot;olgan&quot;&gt;Olga Natkovich&lt;/a&gt;, I don&apos;t see the backwards compatibility issue.  By definition this is for interactive sessions, so users can&apos;t have existing scripts that change behavior.  I suppose someone somewhere might regularly use $x in his interactive session and expect it to come out as $x rather than complain that it can&apos;t make the substitution, but that seems 1) unlikely, and 2) easy to fix.&lt;/p&gt;</comment>
                            <comment id="14044337" author="daijy" created="Thu, 26 Jun 2014 05:22:24 +0100"  >&lt;p&gt;Patch committed to trunk. Thanks Alan for review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12651891" name="PIG-2122-1.patch" size="3641" author="daijy" created="Sun, 22 Jun 2014 22:57:06 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Jun 2011 15:53:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35762</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxwd8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12631</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>