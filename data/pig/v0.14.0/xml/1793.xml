<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:10:06 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1793/PIG-1793.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1793] Add macro expansion to Pig Latin</title>
                <link>https://issues.apache.org/jira/browse/PIG-1793</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;As production Pig scripts grow longer and longer, Pig Latin has a need to integrate standard programming techniques of separation and code sharing offered by functions and modules.  A proposal of adding macro expansion to Pig Latin is posted here: &lt;a href=&quot;http://wiki.apache.org/pig/TuringCompletePig&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/pig/TuringCompletePig&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Below is a brief summary of the proposed syntax (and examples):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Macro Definition&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The existing DEFINE keyword will be expanded to allow definitions of Pig macros. &lt;/p&gt;

&lt;p&gt;&lt;b&gt;Syntax&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
define &amp;lt;name&amp;gt; (&amp;lt;params&amp;gt;) returns &amp;lt;aliases&amp;gt; {
    &amp;lt;Pig Latin fragment&amp;gt;
};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Example&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
define my_macro(A, sortkey) returns C {
    B = filter $A by my_filter(*);
    $C = order B by $sortkey;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
	&lt;li&gt;Macro Expansion&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Syntax&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;aliases&amp;gt; = &amp;lt;macro name&amp;gt; (&amp;lt;params&amp;gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Example:&lt;/b&gt; Use above macro in a Pig script:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
X = load &apos;foo&apos; as (user, address, phone);
Y = my_macro(X, user);
store Y into &apos;bar&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This script is expanded into the following Pig Latin statements: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
X = load &apos;foo&apos; as (user, address, phone);
macro_my_macro_B_1 = filter X by my_filter(*);
Y = order macro_my_macro_B_1 by user;
store Y into &apos;bar&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Notes&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;1. Any alias in the macro which isn&apos;t visible from outside will be prefixed with macro name and suffixed with instance id to avoid namespace collision. &lt;br/&gt;
2. Macro expansion is not a complete replacement for function calls. Recursive expansions are not supported.  &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Macro Import&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The new IMPORT keyword can be used to add macros defined in another Pig Latin file.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Syntax&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &amp;lt;Pig Latin file name&amp;gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Example&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; my_macro.pig;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; All macro names are in the global namespace. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12495002">PIG-1793</key>
            <summary>Add macro expansion to Pig Latin</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rding">Richard Ding</assignee>
                                    <reporter username="rding">Richard Ding</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Jan 2011 00:10:15 +0000</created>
                <updated>Thu, 2 May 2013 03:29:36 +0100</updated>
                            <resolved>Tue, 15 Feb 2011 01:09:47 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="12990818" author="rding" created="Fri, 4 Feb 2011 23:11:59 +0000"  >&lt;p&gt;Attaching the patch that implements the above proposed Pig syntax. The only change is the IMPORT statement which now requires the file name be a quoted string:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &apos;my_macro.pig&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12990842" author="rding" created="Sat, 5 Feb 2011 00:12:48 +0000"  >&lt;p&gt;Unit tests pass. The output of test-patch:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     [exec] -1 overall.  
     [exec] 
     [exec]     +1 @author.  The patch does not contain any @author tags.
     [exec] 
     [exec]     +1 tests included.  The patch appears to include 3 &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; or modified tests.
     [exec] 
     [exec]     +1 javadoc.  The javadoc tool did not generate any warning messages.
     [exec] 
     [exec]     -1 javac.  The applied patch generated 973 javac compiler warnings (more than the trunk&apos;s current 962 warnings).
     [exec] 
     [exec]     +1 findbugs.  The patch does not introduce any &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Findbugs warnings.
     [exec] 
     [exec]     -1 release audit.  The applied patch generated 514 release audit warnings (more than the trunk&apos;s current 513 warnings).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The release audit warning is html related. &lt;/p&gt;</comment>
                            <comment id="12993146" author="rding" created="Thu, 10 Feb 2011 18:04:26 +0000"  >&lt;p&gt;Attaching new patch that addresses the review comments (&lt;a href=&quot;https://reviews.apache.org/r/400/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/400/&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="12993148" author="rding" created="Thu, 10 Feb 2011 18:11:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1793&quot; title=&quot;Add macro expansion to Pig Latin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1793&quot;&gt;&lt;del&gt;PIG-1793&lt;/del&gt;&lt;/a&gt;_1.patch is committed to trunk.&lt;/p&gt;</comment>
                            <comment id="12993266" author="rding" created="Thu, 10 Feb 2011 23:24:14 +0000"  >&lt;p&gt;This patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1793&quot; title=&quot;Add macro expansion to Pig Latin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1793&quot;&gt;&lt;del&gt;PIG-1793&lt;/del&gt;&lt;/a&gt;_2) adds support of macros invoking other macros:&lt;/p&gt;

&lt;p&gt;&quot;Macros will be allowed to inline other macros. However, forward declarations will not be supported. Note that macro inlining is not a complete replacement for function calls, as it does not support recursive calls.&quot;&lt;/p&gt;</comment>
                            <comment id="12993618" author="rding" created="Fri, 11 Feb 2011 18:17:29 +0000"  >&lt;p&gt;Unit tests pass. The output of test-patch:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     [exec] -1 overall.  
     [exec] 
     [exec]     +1 @author.  The patch does not contain any @author tags.
     [exec] 
     [exec]     +1 tests included.  The patch appears to include 3 &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; or modified tests.
     [exec] 
     [exec]     +1 javadoc.  The javadoc tool did not generate any warning messages.
     [exec] 
     [exec]     -1 javac.  The applied patch generated 979 javac compiler warnings (more than the trunk&apos;s current 975 warnings).
     [exec] 
     [exec]     +1 findbugs.  The patch does not introduce any &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Findbugs warnings.
     [exec] 
     [exec]     +1 release audit.  The applied patch does not increase the total number of release audit warnings.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12994601" author="rding" created="Tue, 15 Feb 2011 00:54:47 +0000"  >&lt;p&gt;See review comment here: &lt;a href=&quot;https://reviews.apache.org/r/419/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/419/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12994606" author="rding" created="Tue, 15 Feb 2011 01:09:47 +0000"  >&lt;p&gt;patch 2 committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12394113">PIG-206</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12470512" name="PIG-1793.patch" size="87365" author="rding" created="Mon, 7 Feb 2011 22:00:05 +0000"/>
                            <attachment id="12470789" name="PIG-1793_1.patch" size="90440" author="rding" created="Thu, 10 Feb 2011 18:04:26 +0000"/>
                            <attachment id="12470810" name="PIG-1793_2.patch" size="19382" author="rding" created="Thu, 10 Feb 2011 23:24:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66163</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyatrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97134</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>