<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:59:52 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-745/PIG-745.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-745] Please add DataTypes.toString() conversion function</title>
                <link>https://issues.apache.org/jira/browse/PIG-745</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;I&apos;m doing some work in string manipulation UDFs and I&apos;ve found that it would be very convenient if I could always convert the argument to a chararray (internally a Java String).&lt;/p&gt;

&lt;p&gt;For example TOLOWERCASE(arg) shouldn&apos;t really care whether arg is a bytearray, chararray, int, long, double, or float, it should be treated as a string and operated on.&lt;/p&gt;

&lt;p&gt;The simplest and most foolproof method would be if the DataTypes added a static function of  DataTypes.toString which did all of the argument type checking and provided consistent translation.&lt;/p&gt;

&lt;p&gt;I believe that this function might be coded as:&lt;/p&gt;

&lt;p&gt;    public static String toString(Object o) throws ExecException {&lt;br/&gt;
        try {&lt;br/&gt;
			switch (findType(o)) &lt;/p&gt;
{
			case BOOLEAN:
			    if (((Boolean)o) == true) return new String(&apos;1&apos;);
			    else return new String(&apos;0&apos;);

			case BYTE:
			    return ((Byte)o).toString();

			case INTEGER:
			    return ((Integer)o).toString();

			case LONG:
			    return ((Long)o).toString();

			case FLOAT:
			    return ((Float)o).toString();

			case DOUBLE:
			    return ((Double)o).toString();

			case BYTEARRAY:
			    return ((DataByteArray)o).toString();

			case CHARARRAY:
		            return (String)o;

			case NULL:
			    return null;

			case MAP:
			case TUPLE:
			case BAG:
			case UNKNOWN:
			default:
			    int errCode = 1071;
			    String msg = &quot;Cannot convert a &quot; + findTypeName(o) +
			    &quot; to an String&quot;;
			    throw new ExecException(msg, errCode, PigException.INPUT);
			}
&lt;p&gt;		} catch (ExecException ee) &lt;/p&gt;
{
			throw ee;
		}
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
			int errCode = 2054;
			String msg = &quot;Internal error. Could not convert &quot; + o + &quot; to String.&quot;;
			throw new ExecException(msg, errCode, PigException.BUG);
		}
&lt;p&gt;    }&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12421815">PIG-745</key>
            <summary>Please add DataTypes.toString() conversion function</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ciemo">David Ciemiewicz</assignee>
                                    <reporter username="ciemo">David Ciemiewicz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Apr 2009 21:44:00 +0100</created>
                <updated>Wed, 24 Mar 2010 22:10:57 +0000</updated>
                            <resolved>Wed, 8 Apr 2009 23:00:13 +0100</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12694893" author="ciemo" created="Thu, 2 Apr 2009 07:17:52 +0100"  >&lt;p&gt;Actually, the proposed function DataTypes.toString() is the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ExecException {
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
			&lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; (findType(o)) {
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; BOOLEAN: &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (((&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;)o) == &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(&apos;1&apos;); &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(&apos;0&apos;);
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; BYTE: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;)o).toString();
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; INTEGER: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;)o).toString();
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; LONG: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;)o).toString();
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; FLOAT: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((&lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt;)o).toString();
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; DOUBLE: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;)o).toString();
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; BYTEARRAY: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((DataByteArray)o).toString();
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; CHARARRAY: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)o;
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; NULL: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; MAP:
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; TUPLE:
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; BAG:
			&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; UNKNOWN:
			&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;:
				&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; errCode = 1071;
				&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg = &lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot convert a &quot;&lt;/span&gt; + findTypeName(o) + &lt;span class=&quot;code-quote&quot;&gt;&quot; to an &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&quot;&lt;/span&gt;;
				&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ExecException(msg, errCode, PigException.INPUT);
			}
		}
		&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ExecException ee) { &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; ee; }
		&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
			&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; errCode = 2054; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg = &lt;span class=&quot;code-quote&quot;&gt;&quot;Internal error. Could not convert &quot;&lt;/span&gt; + o + &lt;span class=&quot;code-quote&quot;&gt;&quot; to &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.&quot;&lt;/span&gt;;
			&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ExecException(msg, errCode, PigException.BUG);
		}
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12695921" author="ciemo" created="Sun, 5 Apr 2009 22:34:09 +0100"  >&lt;p&gt;The more I think about this one, the more I realize that not having DataType.toString() is an oversight for the DataType package.&lt;/p&gt;</comment>
                            <comment id="12695925" author="ciemo" created="Sun, 5 Apr 2009 23:16:23 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-745&quot; title=&quot;Please add DataTypes.toString() conversion function&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-745&quot;&gt;&lt;del&gt;PIG-745&lt;/del&gt;&lt;/a&gt;.patch attached.&lt;/p&gt;

&lt;p&gt;Patch for consideration to add DataTypes.toString() function.&lt;/p&gt;</comment>
                            <comment id="12695926" author="ciemo" created="Sun, 5 Apr 2009 23:17:37 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-745&quot; title=&quot;Please add DataTypes.toString() conversion function&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-745&quot;&gt;&lt;del&gt;PIG-745&lt;/del&gt;&lt;/a&gt;.patch adds DataType.toString() function to DataType package.&lt;/p&gt;</comment>
                            <comment id="12695946" author="hadoopqa" created="Mon, 6 Apr 2009 00:59:14 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12404681/PIG-745.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12404681/PIG-745.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 759376.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/19/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/19/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/19/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/19/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/19/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/19/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12697056" author="alangates" created="Wed, 8 Apr 2009 16:19:59 +0100"  >&lt;p&gt;I&apos;m reviewing this patch.&lt;/p&gt;</comment>
                            <comment id="12697094" author="ciemo" created="Wed, 8 Apr 2009 17:54:14 +0100"  >&lt;p&gt;Alan,&lt;/p&gt;

&lt;p&gt;I realized several things.&lt;/p&gt;

&lt;p&gt;1) The question of what to do about BOOLEAN case.  My original suggestion was to convert the BOOLEAN case to 1 and 0 but in the patch, I just used the Boolean.toString() function.  Not sure if that matters or not.&lt;/p&gt;

&lt;p&gt;2) I didn&apos;t see other test cases for the other DataType.toInteger(), ... conversions so I didn&apos;t create one for DataType.toString().&lt;/p&gt;

&lt;p&gt;3) We are just using the &quot;default&quot; conversion of Float.toString() and Double.toString().  I don&apos;t know if this is actually &quot;best&quot; since I don&apos;t know if these operations present the floating-point values in full precision or not.  At this point, it may not really matter so much as the primary reason for creating DataType.toString() is to allow string functions to operate on any data type (like in Perl) without generating cast errors.&lt;/p&gt;
</comment>
                            <comment id="12697095" author="ciemo" created="Wed, 8 Apr 2009 17:57:02 +0100"  >&lt;p&gt;4) the catch statements should be reviewed.  I&apos;m not a strong Java programmer so I&apos;m not sure if I have properly handled the full range of exceptions or not.&lt;/p&gt;</comment>
                            <comment id="12697237" author="alangates" created="Wed, 8 Apr 2009 22:54:26 +0100"  >&lt;p&gt;Responses to comments:&lt;/p&gt;

&lt;p&gt;1) Java&apos;s Boolean.toString() is probably the best choice.&lt;/p&gt;

&lt;p&gt;2) Unit tests would be nice, but this is pretty basic and you&apos;re just calling various&lt;br/&gt;
java .toString functions.&lt;/p&gt;

&lt;p&gt;3) If you&apos;re happy with it, it&apos;s good enough for now.  We can improve it later if people&lt;br/&gt;
ask for it.&lt;/p&gt;

&lt;p&gt;4) Noted.&lt;/p&gt;</comment>
                            <comment id="12697241" author="alangates" created="Wed, 8 Apr 2009 23:00:13 +0100"  >&lt;p&gt;Patch checked in.  Thanks Ciemo for the contribution.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12404681" name="PIG-745.patch" size="2018" author="ciemo" created="Sun, 5 Apr 2009 23:16:23 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 5 Apr 2009 23:59:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164312</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaiev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95294</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>