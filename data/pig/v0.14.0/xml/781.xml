<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:56:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-781/PIG-781.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-781] Error reporting for failed MR jobs</title>
                <link>https://issues.apache.org/jira/browse/PIG-781</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;If we have multiple MR jobs to run and some of them fail the behavior of the system is to not stop on the first failure but to keep going. That way jobs that do not depend on the failed job might still succeed.&lt;/p&gt;

&lt;p&gt;The question is to how best report this scenario to a user. How do we tell which jobs failed and which didn&apos;t?&lt;/p&gt;

&lt;p&gt;One way could be to tie jobs to stores and report which store locations won&apos;t have data and which ones do.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12423668">PIG-781</key>
            <summary>Error reporting for failed MR jobs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="hagleitn">Gunther Hagleitner</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Apr 2009 08:16:08 +0100</created>
                <updated>Wed, 24 Mar 2010 22:10:57 +0000</updated>
                            <resolved>Fri, 15 May 2009 18:15:19 +0100</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12705951" author="hagleitn" created="Tue, 5 May 2009 09:18:26 +0100"  >&lt;p&gt;This fix associates stores with MR jobs. At the end of the execution it will print out which stores have passed and which ones have failed.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;50% complete
100% complete
1 map reduce job(s) failed!
Failed to produce result in: &quot;/user/hagleitn/baz&quot;
Successfully stored result in: &quot;/user/hagleitn/bar&quot;
Successfully stored result in: &quot;/user/hagleitn/foo&quot;
Some jobs have failed!
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12706083" author="olgan" created="Tue, 5 May 2009 17:07:09 +0100"  >&lt;p&gt;Hi Gunther,&lt;/p&gt;

&lt;p&gt;The output looks good - this is exactly what we want.&lt;/p&gt;

&lt;p&gt;This would solve issues for adhoc queries; however, we also need to make sure that users can detect this programatically. This has two part to it.&lt;/p&gt;

&lt;p&gt;(1) The return code they see when a program partially successful. We need to add a new return code to &lt;a href=&quot;http://wiki.apache.org/pig/PigErrorHandlingFunctionalSpecification&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://wiki.apache.org/pig/PigErrorHandlingFunctionalSpecification&lt;/a&gt; for this.&lt;br/&gt;
(2) A per output done file either on DFS or on the local file system to indicate success.&lt;/p&gt;

&lt;p&gt;I think, for now, we should at least do (1). (2) requires more though to make sure we don&apos;t leave done files behind forever.&lt;/p&gt;</comment>
                            <comment id="12706198" author="olgan" created="Tue, 5 May 2009 22:21:55 +0100"  >&lt;p&gt;we have been also asked to provide an option to fail the entire job as soon as the first job fails. more details to follow&lt;/p&gt;</comment>
                            <comment id="12707842" author="hagleitn" created="Sun, 10 May 2009 22:05:11 +0100"  >&lt;p&gt;The new patch does same as above (report on the failed and succeeded jobs), but also:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Returns a list of exec jobs, one for each store, so that embedded programs can iterate through results and determine success and failures&lt;/li&gt;
	&lt;li&gt;Adds a flag &quot;-F&quot; or &quot;-stop_on_failure&quot; that causes an exception on the first failure which will cause the processing to stop.&lt;/li&gt;
	&lt;li&gt;Returns 2 when all jobs fail or when the stop_on_failure flag is specified. Returns 3 if some jobs passed and others failed.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12708752" author="hadoopqa" created="Wed, 13 May 2009 05:38:50 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12407727/partial_failure.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12407727/partial_failure.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 774167.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 14 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/37/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/37/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12709065" author="olgan" created="Wed, 13 May 2009 19:43:08 +0100"  >&lt;p&gt;Gunther, thanks for the patch.&lt;/p&gt;

&lt;p&gt;A couple of comments:&lt;/p&gt;

&lt;p&gt;(1) It would be nice if the tests added to TestGrunt would touch a done file and we would validate that it was/was not created depending on the test case. This is what some of the users are doing and it would be nice to test that.&lt;br/&gt;
(2) As we discussed, all the output need to be going to a single log file on the client.&lt;br/&gt;
(3) The patch did not pass the automatedt test. (See above). Lookks like it needs to be regenerated with the latest code.&lt;/p&gt;

&lt;p&gt;The rest looks good.&lt;/p&gt;</comment>
                            <comment id="12709304" author="hagleitn" created="Thu, 14 May 2009 09:20:59 +0100"  >&lt;p&gt;The latest patch is against the latest code base. It also includes the test with the &quot;done&quot; file. Finally, I was wrong about the log files. It&apos;s already the case that all the errors are logged into the same pig file.&lt;/p&gt;</comment>
                            <comment id="12709343" author="hadoopqa" created="Thu, 14 May 2009 11:02:38 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12408116/partial_failure.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12408116/partial_failure.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 774582.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 15 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 226 javac compiler warnings (more than the trunk&apos;s current 225 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/39/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/39/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/39/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/39/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/39/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/39/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12709519" author="hagleitn" created="Thu, 14 May 2009 19:40:09 +0100"  >&lt;p&gt;Fixing the findbugs warning.&lt;/p&gt;</comment>
                            <comment id="12709909" author="olgan" created="Fri, 15 May 2009 18:10:46 +0100"  >&lt;p&gt;+1 on the patch. will commit shortly&lt;/p&gt;</comment>
                            <comment id="12709911" author="olgan" created="Fri, 15 May 2009 18:15:19 +0100"  >&lt;p&gt;patch committed. thanks, gunther!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12408160" name="partial_failure.patch" size="57860" author="hagleitn" created="Thu, 14 May 2009 19:40:09 +0100"/>
                            <attachment id="12408116" name="partial_failure.patch" size="57083" author="hagleitn" created="Thu, 14 May 2009 09:20:59 +0100"/>
                            <attachment id="12407727" name="partial_failure.patch" size="55114" author="hagleitn" created="Sun, 10 May 2009 22:05:11 +0100"/>
                            <attachment id="12407223" name="partial_failure.patch" size="15264" author="hagleitn" created="Tue, 5 May 2009 09:18:26 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 5 May 2009 16:07:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164342</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaitz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95362</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>