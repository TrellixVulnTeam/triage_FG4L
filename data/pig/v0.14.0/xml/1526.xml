<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:04:26 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1526/PIG-1526.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1526] HiveColumnarLoader Partitioning Support</title>
                <link>https://issues.apache.org/jira/browse/PIG-1526</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;I&apos;ve made allot improvements on the HiveColumnarLoader:&lt;br/&gt;
-&amp;gt; Added support for LoadMetadata and data path Partitioning &lt;br/&gt;
-&amp;gt; Improved and simplefied column loading&lt;/p&gt;

&lt;p&gt;Data Path Partitioning:&lt;/p&gt;

&lt;p&gt;Hive stores partitions as folders like to /mytable/partition1=&lt;span class=&quot;error&quot;&gt;&amp;#91;value&amp;#93;&lt;/span&gt;/partition2=&lt;span class=&quot;error&quot;&gt;&amp;#91;value&amp;#93;&lt;/span&gt;. That is the table mytable contains 2 partitions &lt;span class=&quot;error&quot;&gt;&amp;#91;partition1, partition2&amp;#93;&lt;/span&gt;.&lt;br/&gt;
The HiveColumnarLoader will scan the inputpath /mytable and add to the PigSchema the columns partition2 and partition2. &lt;br/&gt;
These columns can then be used in filtering. &lt;br/&gt;
For example: We&apos;ve got year,month,day,hour partitions in our data uploads.&lt;br/&gt;
So a table might look like mytable/year=2010/month=02/day=01.&lt;br/&gt;
Loading with the HiveColumnarLoader allows our pig scripts do filter by date using the standard pig Filter operator.&lt;/p&gt;

&lt;p&gt;I&apos;ve added 2 classes for this:&lt;br/&gt;
-&amp;gt; PathPartitioner&lt;br/&gt;
-&amp;gt; PathPartitionHelper&lt;/p&gt;

&lt;p&gt;These classes are not hive dependent and could be used by any other loader that wants to support partitioning and helps with implementing the LoadMetadata interface.&lt;br/&gt;
For this reason I though it best to put it into the package org.apache.pig.piggybank.storage.partition.&lt;br/&gt;
What would be nice is in the future have the PigStorage also use these 2 classes to provide automatic path partitioning support. &lt;/p&gt;

</description>
                <environment></environment>
        <key id="12470501">PIG-1526</key>
            <summary>HiveColumnarLoader Partitioning Support</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gerritjvv">Gerrit Jansen van Vuuren</assignee>
                                    <reporter username="gerritjvv">Gerrit Jansen van Vuuren</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Jul 2010 11:11:37 +0100</created>
                <updated>Fri, 17 Dec 2010 22:45:00 +0000</updated>
                            <resolved>Thu, 5 Aug 2010 01:40:15 +0100</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12894087" author="hadoopqa" created="Fri, 30 Jul 2010 18:45:28 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12450900/PIG-1526.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12450900/PIG-1526.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 980276.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    -1 contrib tests.  The patch failed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/367/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/367/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/367/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/367/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/367/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/367/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12894719" author="olgan" created="Mon, 2 Aug 2010 22:33:51 +0100"  >&lt;p&gt;Is this ready to be committed?&lt;/p&gt;</comment>
                            <comment id="12894867" author="gerritjvv" created="Tue, 3 Aug 2010 11:52:57 +0100"  >&lt;p&gt;The previous patch did not use the UDFContext signature which caused the partition keys and expression to be overwritten if the loader was used for more than one table. That is fixed now.&lt;br/&gt;
Also added to PathPatitionHelper filtering out of hidden files i.e. files or directories starting with &quot;_&quot; are ignored now.&lt;/p&gt;</comment>
                            <comment id="12894868" author="gerritjvv" created="Tue, 3 Aug 2010 11:55:41 +0100"  >&lt;p&gt;Hi, &lt;/p&gt;

&lt;p&gt;I&apos;ve made the above changes to this patch, but the logic and classes remain the same.&lt;br/&gt;
If your ok with the tests passing this is ok for committing from my side.&lt;/p&gt;

&lt;p&gt;I&apos;ve been testing this new release for the last 48 hours on continuous queries running, and haven&apos;t seen any new errors or bugs appear.&lt;/p&gt;

&lt;p&gt;I ran the tests manually locally and it all passed.&lt;/p&gt;
</comment>
                            <comment id="12894933" author="hadoopqa" created="Tue, 3 Aug 2010 17:53:13 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12451115/PIG-1526-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12451115/PIG-1526-2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 980930.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    -1 contrib tests.  The patch failed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/369/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/369/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/369/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/369/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/369/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/369/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12895493" author="olgan" created="Thu, 5 Aug 2010 01:40:15 +0100"  >&lt;p&gt;patch committed to the trunk. Thanks Gerrit!&lt;/p&gt;</comment>
                            <comment id="12896117" author="daijy" created="Fri, 6 Aug 2010 19:46:43 +0100"  >&lt;p&gt;Hi, Gerrit, &lt;br/&gt;
Piggybank test TestHiveColumnarLoader, TestPathPartitionHelper and TestPathPartitioner fail. Can you take a look? I will temporary drop these test cases from trunk until it is fixed.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="12896177" author="gerritjvv" created="Fri, 6 Aug 2010 23:34:28 +0100"  >&lt;p&gt;I&apos;ve attached the 3 test source files.&lt;/p&gt;</comment>
                            <comment id="12896232" author="daijy" created="Sat, 7 Aug 2010 08:16:36 +0100"  >&lt;p&gt;Hi, Gerrit,&lt;br/&gt;
TestHiveColumnarLoader is due to OOM on my machine, I increase heap size in build.xml to solve it. &lt;/p&gt;

&lt;p&gt;I also find TestPathPartitionHelper and TestPathPartitioner does not work if I have a hadoop-site file in classpath. So I add the following code to deal with it:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
File oldConf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;user.home&quot;&lt;/span&gt;)+&lt;span class=&quot;code-quote&quot;&gt;&quot;/pigtest/conf/hadoop-site.xml&quot;&lt;/span&gt;);
oldConf.delete();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please take a look of attached patch, if it is Ok, I will commit it.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="12896248" author="gerritjvv" created="Sat, 7 Aug 2010 12:37:15 +0100"  >&lt;p&gt;Looks good. Thanks.&lt;/p&gt;</comment>
                            <comment id="12896458" author="daijy" created="Mon, 9 Aug 2010 06:28:58 +0100"  >&lt;p&gt;Fix committed. Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12451115" name="PIG-1526-2.patch" size="114157" author="gerritjvv" created="Tue, 3 Aug 2010 11:52:57 +0100"/>
                            <attachment id="12451493" name="PIG-1526-fix.patch" size="27651" author="daijy" created="Sat, 7 Aug 2010 08:16:36 +0100"/>
                            <attachment id="12450900" name="PIG-1526.patch" size="113493" author="gerritjvv" created="Fri, 30 Jul 2010 12:44:48 +0100"/>
                            <attachment id="12451471" name="TestHiveColumnarLoader.java" size="16592" author="gerritjvv" created="Fri, 6 Aug 2010 23:34:28 +0100"/>
                            <attachment id="12451473" name="TestPathPartitionHelper.java" size="4752" author="gerritjvv" created="Fri, 6 Aug 2010 23:34:28 +0100"/>
                            <attachment id="12451472" name="TestPathPartitioner.java" size="2993" author="gerritjvv" created="Fri, 6 Aug 2010 23:34:28 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 30 Jul 2010 17:45:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>165009</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyardj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96746</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1526&quot; title=&quot;HiveColumnarLoader Partitioning Support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1526&quot;&gt;&lt;strike&gt;PIG-1526&lt;/strike&gt;&lt;/a&gt;-2.patch</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>