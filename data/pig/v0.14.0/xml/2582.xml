<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:03:01 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2582/PIG-2582.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2582] Store size in bytes (not mbytes) in ResourceStatistics</title>
                <link>https://issues.apache.org/jira/browse/PIG-2582</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;http://svn.apache.org/viewvc/pig/trunk/src/org/apache/pig/ResourceStatistics.java?view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ResourceStatistics.java&lt;/a&gt; we see mBytes is public, and has a public getter/setter.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
47	    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; mBytes; &lt;span class=&quot;code-comment&quot;&gt;// size in megabytes
&lt;/span&gt;
196	    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; getmBytes() {
197	        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; mBytes;
198	    }
199	    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ResourceStatistics setmBytes(&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; mBytes) {
200	        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.mBytes = mBytes;
201	        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;;
202	    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Typically sizes are stored as bytes, potentially having convenience functions to return with different units.&lt;/p&gt;

&lt;p&gt;If mBytes can be marked private without causing woes it might be worth storing size as bytes instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12546285">PIG-2582</key>
            <summary>Store size in bytes (not mbytes) in ResourceStatistics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prkommireddi">Prashant Kommireddi</assignee>
                                    <reporter username="traviscrawford">Travis Crawford</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Mar 2012 20:21:12 +0000</created>
                <updated>Mon, 14 Oct 2013 17:46:40 +0100</updated>
                            <resolved>Thu, 8 Nov 2012 06:23:42 +0000</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13478755" author="prkommireddi" created="Thu, 18 Oct 2012 08:26:52 +0100"  >&lt;p&gt;Hi Travis, trying to understand the goal here. Seems like ResourceStatistics has a method getSizeInBytes(), what would be the advantage of storing size in bytes and instead have getmBytes() do the reverse calculation? Is it for clarity and conforming with the norm? &lt;/p&gt;</comment>
                            <comment id="13479102" author="traviscrawford" created="Thu, 18 Oct 2012 17:10:53 +0100"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prkommireddi&quot; class=&quot;user-hover&quot; rel=&quot;prkommireddi&quot;&gt;Prashant Kommireddi&lt;/a&gt;, this came up while working on &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2573&quot; title=&quot;Automagically setting parallelism based on input file size does not work with HCatalog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2573&quot;&gt;&lt;del&gt;PIG-2573&lt;/del&gt;&lt;/a&gt;. Basically it felt a bit janky to round the size to MB rather than just keep the size in bytes. Feel free to close if the consensus is to keep it as-is.&lt;/p&gt;</comment>
                            <comment id="13479181" author="prkommireddi" created="Thu, 18 Oct 2012 18:48:00 +0100"  >&lt;p&gt;I agree on storing size in bytes, just wanted to make sure I understand all the reasons you had in mind. It wouldn&apos;t be a huge change to make it happen, but changing the scope might be tricky if someone is using it outside of the Pig project. What do you think about marking the setter &quot;setmBytes(Long)&quot; deprecated and creating a new setter for bytes? To start with, we can atleast have Pig refer to byte-based methods.&lt;/p&gt;</comment>
                            <comment id="13479191" author="traviscrawford" created="Thu, 18 Oct 2012 19:00:30 +0100"  >&lt;p&gt;Sounds good!&lt;/p&gt;</comment>
                            <comment id="13479236" author="prkommireddi" created="Thu, 18 Oct 2012 19:51:39 +0100"  >&lt;p&gt;Should methods like getAvgRecordSize() be returning size in bytes? Its not called from within the project, but not sure if such a change would be acceptable to users.&lt;/p&gt;</comment>
                            <comment id="13479478" author="prasanth_j" created="Fri, 19 Oct 2012 00:30:00 +0100"  >&lt;p&gt;I am using ResourceStatistics to store intermediate stats in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2831&quot; title=&quot;MR-Cube implementation (Distributed cubing for holistic measures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2831&quot;&gt;PIG-2831&lt;/a&gt;. I am not using getmBytes() method but I use getAvgRecordSize() for storing and returning average record size in bytes. &lt;/p&gt;</comment>
                            <comment id="13479488" author="prkommireddi" created="Fri, 19 Oct 2012 00:44:52 +0100"  >&lt;p&gt;Hi Prasanth, I looked at &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2831&quot; title=&quot;MR-Cube implementation (Distributed cubing for holistic measures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2831&quot;&gt;PIG-2831&lt;/a&gt;. The current impl of getAvgRecordSize in trunk returns size in MB. That is not what you want?&lt;br/&gt;
Also, it might be better to access the values from getters instead of directly accessing them. That will allow us to clean-up the class further in future. Those members should really be private.&lt;/p&gt;</comment>
                            <comment id="13479506" author="prasanth_j" created="Fri, 19 Oct 2012 01:01:56 +0100"  >&lt;p&gt;I am not using setmBytes() or mBytes at all. So as per the implementation logic, only if mBytes!=null and numRecords!=null it will return the size in MB else it will return whatever it contains which in my case works fine. I also din&apos;t see any places using this. Please let me know if there is going to be any changes to the APIs, so that I will modify the patch accordingly. &lt;/p&gt;</comment>
                            <comment id="13479528" author="prkommireddi" created="Fri, 19 Oct 2012 01:23:11 +0100"  >&lt;p&gt;Sure. &lt;/p&gt;

&lt;p&gt;&quot;So as per the implementation logic, only if mBytes!=null and numRecords!=null it will return the size in MB else it will return whatever it contains which in my case works fine.&quot; - this works but might be confusing/inconsistent though. I will wait for Travis/others to comment on this patch and let&apos;s stay in touch on how this might affect &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2831&quot; title=&quot;MR-Cube implementation (Distributed cubing for holistic measures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2831&quot;&gt;PIG-2831&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13481261" author="prkommireddi" created="Mon, 22 Oct 2012 09:26:17 +0100"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=traviscrawford&quot; class=&quot;user-hover&quot; rel=&quot;traviscrawford&quot;&gt;Travis Crawford&lt;/a&gt;, can you please review the patch when you get a chance?&lt;/p&gt;</comment>
                            <comment id="13481569" author="jcoveney" created="Mon, 22 Oct 2012 19:11:48 +0100"  >&lt;p&gt;Thanks for handling this, ya&apos;ll. I&apos;ll +1 and commit, pending this making Travis happy.&lt;/p&gt;</comment>
                            <comment id="13481572" author="prasanth_j" created="Mon, 22 Oct 2012 19:17:25 +0100"  >&lt;p&gt;Hi Prashant&lt;/p&gt;

&lt;p&gt;Looks like some of the class member variables are still public. Is there any reason to leave it public? &lt;/p&gt;</comment>
                            <comment id="13481588" author="prkommireddi" created="Mon, 22 Oct 2012 19:30:12 +0100"  >&lt;p&gt;Hey Prasanth, the reason is that we don&apos;t want to break backward compatibility in case these member variables are accessed directly and not through getters. There are no such references from within the Pig project, but I&apos;m being wary of any users who use this from outside of it.&lt;/p&gt;

&lt;p&gt;The interface stability is marked Unstable on this, so I am ok if all decide its cool to change the scope of these variables &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="13481589" author="billgraham" created="Mon, 22 Oct 2012 19:30:40 +0100"  >&lt;p&gt;As much as we&apos;d love to make these members private, we should resist the urge and keep them public for backward compatibility.&lt;/p&gt;</comment>
                            <comment id="13481590" author="billgraham" created="Mon, 22 Oct 2012 19:32:26 +0100"  >&lt;p&gt;I didn&apos;t notice the Unstable annotation. I&apos;m ok changing scope if others agree.&lt;/p&gt;</comment>
                            <comment id="13485449" author="rohini" created="Sat, 27 Oct 2012 16:08:56 +0100"  >&lt;p&gt;Agree with Bill. It would be good to make them private. Also the getters and setters were already available and the interface is marked unstable. We can wait another week to see if anyone disagrees, else we can go ahead with a patch that makes the member variables private but retains the getter/setter for mBytes marked deprecated.&lt;/p&gt;

&lt;p&gt;setmBytes also needs to set the bytes. If we are making the variables private we can remove mbytes variable altogether and only retain bytes.&lt;/p&gt;</comment>
                            <comment id="13486396" author="jcoveney" created="Mon, 29 Oct 2012 21:43:36 +0000"  >&lt;p&gt;Given it is unstable, I say just go ahead with the plan to make it private, and have the deprecated getter/setter&lt;/p&gt;</comment>
                            <comment id="13486410" author="prkommireddi" created="Mon, 29 Oct 2012 21:59:26 +0000"  >&lt;p&gt;Also, there is a common theme of returning the object &quot;return this;&quot; on all setters. I don&apos;t think this should exist, but we should probably tackle that in the next release to make sure we are fine with the existing changes at first.&lt;/p&gt;</comment>
                            <comment id="13486494" author="prkommireddi" created="Mon, 29 Oct 2012 23:28:39 +0000"  >&lt;p&gt;Making instance variables private. The setter on mBytes is being made deprecated, however getter can be thought of as a convenience method going forward and the implementation changed once we get rid of &quot;mBytes&quot; variable in the next iteration. We cannot &lt;b&gt;safely&lt;/b&gt; get rid of mBytes until the setter is completely taken out of this class.&lt;/p&gt;</comment>
                            <comment id="13486529" author="jcoveney" created="Mon, 29 Oct 2012 23:58:37 +0000"  >&lt;p&gt;As long as the instance variables are private, then how come we can&apos;t get rid of the mBytes variable?&lt;/p&gt;</comment>
                            <comment id="13486543" author="prkommireddi" created="Tue, 30 Oct 2012 00:15:28 +0000"  >&lt;p&gt;What would we have the deprecated mBytes setter set the value on?&lt;/p&gt;</comment>
                            <comment id="13486552" author="jcoveney" created="Tue, 30 Oct 2012 00:37:11 +0000"  >&lt;p&gt;Couldn&apos;t it just set realBytes = mBytes * 1024 * 1024 ? There would be no loss of precision. And if they happened to do getMBytes we just divided (in this case, we can in fact even just do shifts).&lt;/p&gt;</comment>
                            <comment id="13486561" author="prkommireddi" created="Tue, 30 Oct 2012 00:47:28 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;If we are ok with abusing this setter for now, we need to definitely open a JIRA to completely get rid of the deprecated method in 0.12.&lt;/p&gt;</comment>
                            <comment id="13488007" author="prkommireddi" created="Wed, 31 Oct 2012 17:49:00 +0000"  >&lt;p&gt;Making member variables private, and eliminating mBytes. Reviewers, please take a look.&lt;/p&gt;</comment>
                            <comment id="13488091" author="prasanth_j" created="Wed, 31 Oct 2012 18:56:29 +0000"  >&lt;p&gt;Once this is committed.. i will fix &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2831&quot; title=&quot;MR-Cube implementation (Distributed cubing for holistic measures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2831&quot;&gt;PIG-2831&lt;/a&gt; to reflect the change..&lt;/p&gt;</comment>
                            <comment id="13488484" author="prkommireddi" created="Thu, 1 Nov 2012 05:42:02 +0000"  >&lt;p&gt;Thanks for keeping an eye out on this, Prasanth!&lt;/p&gt;</comment>
                            <comment id="13489488" author="billgraham" created="Fri, 2 Nov 2012 15:35:09 +0000"  >&lt;p&gt;+1 LGTM. I can commit after the weekend unless anyone else has comments.&lt;/p&gt;</comment>
                            <comment id="13490795" author="prkommireddi" created="Mon, 5 Nov 2012 18:28:05 +0000"  >&lt;p&gt;Thanks Bill.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12549742" name="PIG-2582.patch" size="5948" author="prkommireddi" created="Thu, 18 Oct 2012 20:32:21 +0100"/>
                            <attachment id="12551277" name="PIG-2582_1.patch" size="7805" author="prkommireddi" created="Mon, 29 Oct 2012 23:28:39 +0000"/>
                            <attachment id="12551587" name="PIG-2582_2.patch" size="7671" author="prkommireddi" created="Wed, 31 Oct 2012 17:49:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Oct 2012 07:26:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy49nz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>58722</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Committed, thanks Prashant!</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>