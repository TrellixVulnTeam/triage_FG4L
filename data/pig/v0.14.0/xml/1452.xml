<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:57:06 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1452/PIG-1452.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1452] to remove hadoop20.jar from lib and use hadoop from the apache maven repo.</title>
                <link>https://issues.apache.org/jira/browse/PIG-1452</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;pig use ivy for dependency management. But still it uses hadoop20.jar from the lib folder. &lt;br/&gt;
Now that we have the hadoop-0.20.2 artifacts available in the maven repo, pig should leverage ivy for resolving/retrieving hadoop artifacts.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12467071">PIG-1452</key>
            <summary>to remove hadoop20.jar from lib and use hadoop from the apache maven repo.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gkesavan">Giridharan Kesavan</assignee>
                                    <reporter username="gkesavan">Giridharan Kesavan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Jun 2010 09:43:26 +0100</created>
                <updated>Fri, 17 Dec 2010 22:44:34 +0000</updated>
                            <resolved>Wed, 18 Aug 2010 18:30:22 +0100</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="12879308" author="gkesavan" created="Wed, 16 Jun 2010 12:21:18 +0100"  >&lt;p&gt;this patch deletes the hadoop20.jar from the lib folder and resolves/retrieves hadoop from maven repository using ivy.&lt;/p&gt;
</comment>
                            <comment id="12879414" author="hadoopqa" created="Wed, 16 Jun 2010 18:45:19 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12447216/PIG-1452.PATCH&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12447216/PIG-1452.PATCH&lt;/a&gt;&lt;br/&gt;
  against trunk revision 955028.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    -1 contrib tests.  The patch failed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/339/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/339/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/339/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/339/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/339/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/339/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12879440" author="cos" created="Wed, 16 Jun 2010 19:34:08 +0100"  >&lt;p&gt;I am wondering if these dependencies&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+    &amp;lt;dependency org=&quot;log4j&quot; name=&quot;log4j&quot; rev=&quot;${log4j.version}&quot;
+      conf=&quot;compile-&amp;gt;master&quot;/&amp;gt;
...
+    &amp;lt;dependency org=&quot;org.mortbay.jetty&quot; name=&quot;jetty-util&quot; rev=&quot;${jetty-util.version}&quot;
+      conf=&quot;compile-&amp;gt;master&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;won&apos;t be automatically retrieved via Hadoop&apos;s POM as it requires them anyway?&lt;/p&gt;</comment>
                            <comment id="12879478" author="gkesavan" created="Wed, 16 Jun 2010 20:46:33 +0100"  >&lt;p&gt;Yes actually hadoop would resolve/retrieve its transient dependencies. But I added these dependencies b&apos;coz pig directly depends on these. &lt;br/&gt;
When we remove these new set of dependencies pig build would fail even before failing for not having hadoop. &lt;/p&gt;

&lt;p&gt;(Here ivy is smart enough so it woudnt retrieve these artifacts, though they are transient dependencies of hadoop again)&lt;/p&gt;</comment>
                            <comment id="12879512" author="olgan" created="Wed, 16 Jun 2010 22:28:39 +0100"  >&lt;p&gt;I tested the patch and it works fine. I think Pig&apos;s direct dependencies should be included since in general we can&apos;t know what packages we get indirectly.&lt;/p&gt;

&lt;p&gt;I am ready to commit this unless I hear otherwise.&lt;/p&gt;</comment>
                            <comment id="12879600" author="cos" created="Thu, 17 Jun 2010 01:50:17 +0100"  >&lt;blockquote&gt;&lt;p&gt;But I added these dependencies b&apos;coz pig directly depends on these&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Makes sense. Thanks. &lt;br/&gt;
+1 patch looks good (although I&apos;m not a Pig committer)&lt;/p&gt;</comment>
                            <comment id="12886971" author="olgan" created="Sat, 10 Jul 2010 02:20:58 +0100"  >&lt;p&gt;Giri, can you commit this?&lt;/p&gt;</comment>
                            <comment id="12887863" author="gkesavan" created="Tue, 13 Jul 2010 18:23:36 +0100"  >&lt;p&gt;I just committed this!&lt;/p&gt;</comment>
                            <comment id="12887933" author="daijy" created="Tue, 13 Jul 2010 20:01:02 +0100"  >&lt;p&gt;Hi, Giri,&lt;br/&gt;
With this change, pig.jar only bundle core hadoop classes. We may not want to change pig.jar. We still want pig.jar contain all dependencies so we can run it directly. Can you fix it?&lt;/p&gt;</comment>
                            <comment id="12887943" author="jeffbowles" created="Tue, 13 Jul 2010 20:22:54 +0100"  >&lt;p&gt;You should be able to get those needed files from the maven/ivy repository. That hadoop-all sort of jar creates all sorts of maintenance heads, starting with the basics of keeping your static-copy up-to-date and continuing from there.&lt;/p&gt;</comment>
                            <comment id="12887944" author="olgan" created="Tue, 13 Jul 2010 20:28:25 +0100"  >&lt;p&gt;That&apos;s fine. We already providing users and unbundled version; however, for convinience we also provided an bundled one and this patch broke this comptaibility&lt;/p&gt;</comment>
                            <comment id="12887948" author="daijy" created="Tue, 13 Jul 2010 20:37:09 +0100"  >&lt;p&gt;I temporarily rollback &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1452&quot; title=&quot;to remove hadoop20.jar from lib and use hadoop from the apache maven repo.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1452&quot;&gt;&lt;del&gt;PIG-1452&lt;/del&gt;&lt;/a&gt; since all builds will fail (piggybank, zebra, nightly). &lt;/p&gt;</comment>
                            <comment id="12893578" author="gkesavan" created="Thu, 29 Jul 2010 11:33:42 +0100"  >&lt;p&gt;Attached patch would add hadoop and transient dependencies to the pig.jar file as well resolve hadoop from maven repo.&lt;/p&gt;</comment>
                            <comment id="12893793" author="hadoopqa" created="Thu, 29 Jul 2010 20:42:46 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12450812/PIG-1452V2.PATCH&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12450812/PIG-1452V2.PATCH&lt;/a&gt;&lt;br/&gt;
  against trunk revision 980276.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    -1 contrib tests.  The patch failed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/365/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/365/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/365/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/365/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/365/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/365/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12893942" author="daijy" created="Fri, 30 Jul 2010 07:23:15 +0100"  >&lt;p&gt;Now we pack everything in ivy lib, the size of pig.jar increase from 11M to 26M. It is better not to change the content of pig.jar, only change the way we generate it after patch. Can bring back the old pig.jar content? (only pack hadoop and its dependent classes, and the libraries listed in build.xml)&lt;/p&gt;</comment>
                            <comment id="12893959" author="daijy" created="Fri, 30 Jul 2010 08:55:36 +0100"  >&lt;p&gt;Or we can include an exclusion list. We will exclude some known jars (such as jython.jar, etc) in pig.jar.&lt;/p&gt;</comment>
                            <comment id="12894077" author="cos" created="Fri, 30 Jul 2010 18:16:58 +0100"  >&lt;p&gt;Normally, it isn&apos;t a good idea at all to include any jars into a production jar file. If you need extra jars to be delivered they are better be delivered separately, i.e. through Ivy dependencies. So, I believe the build needs to be changed a bit especially in this line&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            &amp;lt;zipgroupfileset dir=&quot;${ivy.lib.dir}&quot; includes=&quot;*.jar&quot; /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;While I am not suggesting how Pig needs to deliver its stuff having dependency jars packed into the same gigantic jar file doesn&apos;t seem right. &lt;/p&gt;</comment>
                            <comment id="12894106" author="daijy" created="Fri, 30 Jul 2010 19:52:34 +0100"  >&lt;p&gt;We shall retain the old pig.jar. There are two way to achieve it:&lt;br/&gt;
1. List all jars we needed for pig.jar. We need to track all hadoop dependent jars, I am not sure if it is realistic.&lt;br/&gt;
2. Pack all jars in ivy lib, but exclude files Pig brings but we don&apos;t want in pig.jar. By doing this we will not miss any hadoop dependent jars. I can give you a list of excluded jars if we decide to take this route.&lt;/p&gt;</comment>
                            <comment id="12894651" author="gkesavan" created="Mon, 2 Aug 2010 19:57:27 +0100"  >&lt;p&gt;we can just include the list of jars that you may want it as part of the pig jar. &lt;/p&gt;

&lt;p&gt;Only reason I didnt do it in first place is that I didnt want to write 15 to 20 lines of  zipfileset. Looks like its necessary for the given scenario. &lt;br/&gt;
As long as someone can give me the list of jars that should go into the pig.jar, I shall add it to the pig.jar&lt;/p&gt;</comment>
                            <comment id="12894721" author="daijy" created="Mon, 2 Aug 2010 22:39:29 +0100"  >&lt;p&gt;Hi, Giri,&lt;br/&gt;
I think approach 2 may be simpler. We only need to exclude three jars which are pulled by Pig:&lt;br/&gt;
hsqldb.jar&lt;br/&gt;
jython.jar&lt;br/&gt;
javacc.jar&lt;/p&gt;

&lt;p&gt;Besides that, I see some more jars pulled along with hadoop, eg: core-3.1.1.jar, ftpserver-deprecated-1.0.0-M2.jar, etc, which we never see before and it drastically increase the size of pig.jar. Do you know what&apos;s happen? How can we exclude these jars?&lt;/p&gt;</comment>
                            <comment id="12894807" author="gkesavan" created="Tue, 3 Aug 2010 04:49:23 +0100"  >

&lt;blockquote&gt;&lt;p&gt;Besides that, I see some more jars pulled along with hadoop, eg: core-3.1.1.jar, ftpserver-deprecated-1.0.0-M2.jar, etc, which we never see before and it drastically increase the size of pig.jar. Do you know what&apos;s happen? How can we exclude these jars?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;These are transient dependencies of hadoop-test.jar&lt;/p&gt;</comment>
                            <comment id="12894809" author="gkesavan" created="Tue, 3 Aug 2010 04:53:14 +0100"  >

&lt;blockquote&gt;&lt;p&gt;We only need to exclude three jars which are pulled by Pig: &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;hsqldb.jar &lt;br/&gt;
jython.jar &lt;br/&gt;
javacc.jar &lt;/p&gt;


&lt;p&gt;I remember that hadoop depends on  hsqldb.jar. &lt;br/&gt;
Is there any reason why we dont want it to be added to the pig.jar?&lt;/p&gt;</comment>
                            <comment id="12895045" author="daijy" created="Tue, 3 Aug 2010 22:28:48 +0100"  >&lt;p&gt;hsqldb.jar is pulled by Pig only for unit test. I am not sure if hadoop also depend on it or not, if that&apos;s the case, then we should retain it. For those transient dependencies, can we exclude them from pig.jar? Some jars such as core-3.1.1.jar is really big. Since pig.jar will be shipped to every backend node, we really want to keep it smaller. &lt;/p&gt;</comment>
                            <comment id="12899210" author="rding" created="Tue, 17 Aug 2010 01:41:07 +0100"  >&lt;p&gt;I resynced the patch with the trunk and the size of pig.jar now is about 8M.&lt;/p&gt;</comment>
                            <comment id="12899520" author="rding" created="Tue, 17 Aug 2010 19:42:55 +0100"  >&lt;p&gt;New patch fixing the contrib projects. &lt;/p&gt;</comment>
                            <comment id="12899560" author="daijy" created="Tue, 17 Aug 2010 21:15:30 +0100"  >&lt;p&gt;Shall we do the same thing to the target &quot;buildJar-withouthadoop&quot;?&lt;/p&gt;</comment>
                            <comment id="12899631" author="rding" created="Tue, 17 Aug 2010 23:49:33 +0100"  >&lt;p&gt;The target &quot;buildJar-withouthadoop&quot; doesn&apos;t depend on hadoop20.jar so this change doesn&apos;t affect this target.&lt;/p&gt;</comment>
                            <comment id="12899639" author="daijy" created="Tue, 17 Aug 2010 23:56:11 +0100"  >&lt;p&gt;Richard is right. +1 for the patch once test pass.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12447216" name="PIG-1452.PATCH" size="6179" author="gkesavan" created="Wed, 16 Jun 2010 12:21:18 +0100"/>
                            <attachment id="12450812" name="PIG-1452V2.PATCH" size="4968" author="gkesavan" created="Thu, 29 Jul 2010 11:33:42 +0100"/>
                            <attachment id="12452303" name="PIG-1452V4.PATCH" size="8333" author="rding" created="Tue, 17 Aug 2010 19:42:54 +0100"/>
                            <attachment id="12452235" name="PIG-1452_3.patch" size="5842" author="rding" created="Tue, 17 Aug 2010 01:41:07 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 16 Jun 2010 17:45:19 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164941</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaqlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96620</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>