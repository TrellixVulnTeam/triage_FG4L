<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:10:50 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3210/PIG-3210.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3210] Pig fails to start when it cannot write log to log files</title>
                <link>https://issues.apache.org/jira/browse/PIG-3210</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig will check whether logFileName is null or not before setting to pig.logfile property in some places. But forget to check in other places.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt; 
381         pigContext.getProperties().setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;pig.logfile&quot;&lt;/span&gt;, (logFileName == null? &quot;&quot;: logFileName));
...
451         pigContext.getProperties().setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;pig.logfile&quot;&lt;/span&gt;, logFileName);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt; 
12/12/25 16:38:00 WARN pig.Main: Need write permission in the directory: /opt/trend/hadooppet/sanity-tm-6/result to create log file.
 14 2012-12-25 16:38:00,372 [main] INFO org.apache.pig.Main - Apache Pig version 0.10.1.tm6 (rexported) compiled Oct 22 2012, 11:11:02
 15 2012-12-25 16:38:01,712 [main] WARN org.apache.pig.Main - Cannot write to log file: /opt/trend/hadooppet/sanity-tm-6/result//akamai.pig1356453481712.log
 16 2012-12-25 16:38:01,727 [main] ERROR org.apache.pig.Main - ERROR 2999: Unexpected internal error. null
 17 2012-12-25 16:38:01,727 [main] WARN org.apache.pig.Main - There is no log file to write to.
 18 2012-12-25 16:38:01,727 [main] ERROR org.apache.pig.Main - java.lang.NullPointerException
 19 at java.util.Hashtable.put(Hashtable.java:394)
 20 at java.util.Properties.setProperty(Properties.java:143)
 21 at org.apache.pig.Main.run(Main.java:542)
 22 at org.apache.pig.Main.main(Main.java:115)
 23 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 24 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 25 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 26 at java.lang.reflect.Method.invoke(Method.java:597)
 27 at org.apache.hadoop.util.RunJar.main(RunJar.java:208)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </description>
                <environment></environment>
        <key id="12633537">PIG-3210</key>
            <summary>Pig fails to start when it cannot write log to log files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mengsungwu">Meng-Sung Wu</assignee>
                                    <reporter username="mengsungwu">Meng-Sung Wu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Feb 2013 02:31:55 +0000</created>
                <updated>Mon, 14 Oct 2013 17:45:57 +0100</updated>
                            <resolved>Fri, 26 Jul 2013 10:41:36 +0100</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13586111" author="dvryaboy" created="Mon, 25 Feb 2013 18:40:26 +0000"  >&lt;p&gt;what happens down the line if pig.logfile is empty?&lt;/p&gt;</comment>
                            <comment id="13586612" author="mengsungwu" created="Tue, 26 Feb 2013 01:54:46 +0000"  >&lt;p&gt;NullPointerException will occur since it will put a null value into Hashtable.&lt;/p&gt;</comment>
                            <comment id="13586654" author="dvryaboy" created="Tue, 26 Feb 2013 02:49:45 +0000"  >&lt;p&gt;I should&apos;ve phrased my question better &amp;#8211; what happens if the value of pig.logfile is an empty string? Do we know nothing bad will happen in that case (like trying to open &quot;&quot; for writing)?&lt;/p&gt;</comment>
                            <comment id="13720576" author="cheolsoo" created="Fri, 26 Jul 2013 10:36:52 +0100"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;To answer Dmitriy&apos;s question, the value of pig.logfile is an empty string, nothing is logged. Here is the relevant code in LogUtils.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;LogUtils.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(logFileName == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || logFileName.equals(&quot;&quot;)) {
    &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; exec is invoked programmatically then logFileName will be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/span&gt;    log.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;There is no log file to write to.&quot;&lt;/span&gt;);
    log.error(bs.toString());
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13720579" author="cheolsoo" created="Fri, 26 Jul 2013 10:41:36 +0100"  >&lt;p&gt;Committed to trunk. Thank you Meng-Sung!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12570407" name="PIG-3210.patch" size="992" author="mengsungwu" created="Fri, 22 Feb 2013 02:34:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 25 Feb 2013 18:40:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314032</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzc1if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314377</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>