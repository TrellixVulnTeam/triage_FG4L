<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:11:30 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1293/PIG-1293.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1293] pig wrapper script tends to fail if pig is in the path and PIG_HOME isn&apos;t set</title>
                <link>https://issues.apache.org/jira/browse/PIG-1293</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;If PIG_HOME isn&apos;t set and pig is in the path, the pig wrapper script can&apos;t find its home.  Setting PIG_HOME makes it hard to support multiple versions of pig. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12458875">PIG-1293</key>
            <summary>pig wrapper script tends to fail if pig is in the path and PIG_HOME isn&apos;t set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aw">Allen Wittenauer</assignee>
                                    <reporter username="aw">Allen Wittenauer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Mar 2010 00:39:52 +0000</created>
                <updated>Fri, 14 May 2010 07:47:25 +0100</updated>
                            <resolved>Wed, 17 Mar 2010 23:42:26 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12844300" author="aw" created="Fri, 12 Mar 2010 00:41:22 +0000"  >&lt;p&gt;Since we require bash, we can cheat a bit.  BASH_SOURCE should contain the full path to the script that we are executing.  This means we can ... piggyback... off of that variable to figure out where our real PIG_HOME is at.&lt;/p&gt;</comment>
                            <comment id="12844481" author="hadoopqa" created="Fri, 12 Mar 2010 12:35:06 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12438558/PIG-1293.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12438558/PIG-1293.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 922097.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/245/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/245/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/245/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/245/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/245/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/245/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12844551" author="aw" created="Fri, 12 Mar 2010 15:55:56 +0000"  >&lt;p&gt;Let&apos;s try submitting again, since it seems my test results disappeared.  Not surprised at the missing test, but core failing? that&apos;s seems unlikely.&lt;/p&gt;</comment>
                            <comment id="12844670" author="hadoopqa" created="Fri, 12 Mar 2010 20:41:45 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12438558/PIG-1293.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12438558/PIG-1293.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 922169.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/236/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/236/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/236/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/236/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/236/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/236/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12846226" author="alangates" created="Wed, 17 Mar 2010 00:12:34 +0000"  >&lt;p&gt;Allen,&lt;/p&gt;

&lt;p&gt;I&apos;m having trouble reproducing this issue, so I&apos;m not sure how to test your fix.  If I take top of trunk and install it, then do:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
gates&amp;gt; echo $PIG_HOME

gates&amp;gt; PATH=/usr/bin:/usr/local/bin:/bin:./bin which pig
/home/gates/tmp/pig-0.7.0-dev/bin/pig
gates&amp;gt; PATH=/usr/bin:/usr/local/bin:/bin:./bin pig -x local ~/pig/scripts/Checkin_2.local.pig
10/03/16 17:09:24 INFO pig.Main: Logging error messages to: /home/gates/tmp/pig-0.7.0-dev/pig_1268784564902.log
2010-03-16 17:09:25,205 [main] INFO  org.apache.pig.backend.hadoop.executionengine.HExecutionEngine - Connecting to hadoop file system at: file:&lt;span class=&quot;code-comment&quot;&gt;///
&lt;/span&gt;2010-03-16 17:09:26,047 [main] WARN  org.apache.pig.PigServer - Encountered Warning IMPLICIT_CAST_TO_INT 2 time(s).
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What am I doing wrong here?&lt;/p&gt;</comment>
                            <comment id="12846236" author="aw" created="Wed, 17 Mar 2010 00:31:59 +0000"  >&lt;p&gt;You likely have PIG_HOME configured.&lt;/p&gt;

&lt;p&gt;Unset it, then try running bash -x pig and the message about being unable to find pig-env.sh won&apos;t be hidden by bash.  BTW, the hadoop equiv jira is &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-6630&quot; title=&quot;hadoop-config.sh fails to get executed if hadoop wrapper scripts are in path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-6630&quot;&gt;&lt;del&gt;HADOOP-6630&lt;/del&gt;&lt;/a&gt;, as it suffers from the same problem.&lt;/p&gt;</comment>
                            <comment id="12846243" author="aw" created="Wed, 17 Mar 2010 00:40:10 +0000"  >&lt;p&gt;Err, not PIG_HOME, PIG_CONF_DIR.&lt;/p&gt;</comment>
                            <comment id="12846565" author="aw" created="Wed, 17 Mar 2010 20:18:04 +0000"  >&lt;p&gt;Let&apos;s get a bit more explicit:&lt;/p&gt;

&lt;p&gt;$ cd /tmp&lt;br/&gt;
$ which pig&lt;br/&gt;
/export/apps/hadoop/bin/pig&lt;br/&gt;
$ bash -x pig&lt;br/&gt;
+ cygwin=false&lt;br/&gt;
+ case &quot;`uname`&quot; in&lt;br/&gt;
++ uname&lt;br/&gt;
+ debug=false&lt;br/&gt;
+ this=pig&lt;br/&gt;
+ &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39; -h pig &amp;#39;&amp;#93;&lt;/span&gt;&apos;&lt;br/&gt;
++ dirname pig&lt;br/&gt;
+ bin=.&lt;br/&gt;
++ basename pig&lt;br/&gt;
+ script=pig&lt;br/&gt;
++ unset CDPATH&lt;br/&gt;
++ cd .&lt;br/&gt;
++ pwd&lt;br/&gt;
+ bin=/tmp&lt;br/&gt;
+ this=/tmp/pig&lt;br/&gt;
++ dirname /tmp/pig&lt;br/&gt;
+ export PIG_HOME=/tmp/..&lt;/p&gt;


&lt;p&gt;This is clearly wrong.  After applying the fix:&lt;/p&gt;


&lt;p&gt;+ cygwin=false&lt;br/&gt;
+ case &quot;`uname`&quot; in&lt;br/&gt;
++ uname&lt;br/&gt;
+ debug=false&lt;br/&gt;
+ this=/export/apps/hadoop/bin/pig&lt;br/&gt;
+ &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39; -h /export/apps/hadoop/bin/pig &amp;#39;&amp;#93;&lt;/span&gt;&apos;&lt;br/&gt;
++ ls -ld /export/apps/hadoop/bin/pig&lt;br/&gt;
+ ls=&apos;lrwxrwxrwx   1 root     root          24 Mar  5 09:05 /export/apps/hadoop/bin/pig -&amp;gt; /export/apps/pig/bin/pig&apos;&lt;br/&gt;
++ expr &apos;lrwxrwxrwx   1 root     root          24 Mar  5 09:05 /export/apps/hadoop/bin/pig &lt;del&gt;&amp;gt; /export/apps/pig/bin/pig&apos; : &apos;.&lt;b&gt;&lt;/del&gt;&amp;gt; &amp;#40;.&lt;/b&gt;&amp;#41;$&apos;&lt;br/&gt;
+ link=/export/apps/pig/bin/pig&lt;br/&gt;
+ expr /export/apps/pig/bin/pig : &apos;.&lt;b&gt;/.&lt;/b&gt;&apos;&lt;br/&gt;
+ this=/export/apps/pig/bin/pig&lt;br/&gt;
+ &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39; -h /export/apps/pig/bin/pig &amp;#39;&amp;#93;&lt;/span&gt;&apos;&lt;br/&gt;
++ dirname /export/apps/pig/bin/pig&lt;br/&gt;
+ bin=/export/apps/pig/bin&lt;br/&gt;
++ basename /export/apps/pig/bin/pig&lt;br/&gt;
+ script=pig&lt;br/&gt;
++ unset CDPATH&lt;br/&gt;
++ cd /export/apps/pig/bin&lt;br/&gt;
++ pwd&lt;br/&gt;
+ bin=/export/apps/pig/bin&lt;br/&gt;
+ this=/export/apps/pig/bin/pig&lt;br/&gt;
++ dirname /export/apps/pig/bin/pig&lt;br/&gt;
+ export PIG_HOME=/export/apps/pig/bin/..&lt;/p&gt;

&lt;p&gt;This is correct, even dealing with the symlink in the process, as expected.&lt;/p&gt;</comment>
                            <comment id="12846675" author="alangates" created="Wed, 17 Mar 2010 23:42:26 +0000"  >&lt;p&gt;Thanks, that last comment helped me reproduce the issue.  Patch checked in.  Thanks Allen for the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12438558" name="PIG-1293.txt" size="334" author="aw" created="Fri, 12 Mar 2010 00:41:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Mar 2010 12:35:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164796</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaos7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96326</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>