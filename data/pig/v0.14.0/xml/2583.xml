<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:03:00 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2583/PIG-2583.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2583] Add Grunt command to list the statements in cache</title>
                <link>https://issues.apache.org/jira/browse/PIG-2583</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;It is convenient to list statements in cache:&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; a = load &apos;1.txt&apos;;         &lt;br/&gt;
grunt&amp;gt; b = foreach a generate $0, $1;&lt;br/&gt;
grunt&amp;gt; list&lt;br/&gt;
a = load &apos;1.txt&apos;;&lt;br/&gt;
b = foreach a generate $0, $1;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12546329">PIG-2583</key>
            <summary>Add Grunt command to list the statements in cache</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xalan">Allan Avenda&#241;o</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Tue, 13 Mar 2012 23:26:39 +0000</created>
                <updated>Fri, 22 Feb 2013 04:53:30 +0000</updated>
                            <resolved>Tue, 18 Dec 2012 21:30:39 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13228925" author="billgraham" created="Wed, 14 Mar 2012 03:40:22 +0000"  >&lt;p&gt;Great idea. What about &lt;tt&gt;history&lt;/tt&gt; instead of &lt;tt&gt;list&lt;/tt&gt;? It&apos;s similar to bash and groovy shell. I couldn&apos;t find an irb equivalent.&lt;/p&gt;</comment>
                            <comment id="13228963" author="daijy" created="Wed, 14 Mar 2012 04:39:26 +0000"  >&lt;p&gt;Sounds good.&lt;/p&gt;</comment>
                            <comment id="13264858" author="xalan" created="Mon, 30 Apr 2012 11:05:42 +0100"  >&lt;p&gt;I added an arraylist that works as cache of statements executed so far.&lt;/p&gt;</comment>
                            <comment id="13265551" author="daijy" created="Tue, 1 May 2012 01:42:30 +0100"  >&lt;p&gt;Thanks, I will take a look.&lt;/p&gt;</comment>
                            <comment id="13269877" author="daijy" created="Mon, 7 May 2012 19:47:20 +0100"  >&lt;p&gt;It is right to put in command cache only if it is a Pig statement not a command. However, if an alias is get reused, we should show the last definition, not all. I think we should make use of Graph.scriptCache to do it.&lt;/p&gt;</comment>
                            <comment id="13270879" author="xalan" created="Tue, 8 May 2012 23:04:45 +0100"  >&lt;p&gt;I was working on this, but I found something particular if we show the last definition for the alias, for example on this sequence:&lt;/p&gt;

&lt;p&gt;A = load &apos;data/abs&apos; using PigStorage(&apos;|&apos;) as (name:chararray, id1:int, id2:int, id3:int);&lt;br/&gt;
D = group A by id1;&lt;br/&gt;
A = load &apos;data/abs&apos; using PigStorage(&apos;|&apos;) as (name:chararray, x:int, y:int, z:int); &lt;/p&gt;


&lt;p&gt;With modifications on the patch that I attach, the following history is shown (according to historical modifications on aliases):&lt;/p&gt;

&lt;p&gt;D = group A by id1;&lt;br/&gt;
A = load &apos;data/abs&apos; using PigStorage(&apos;|&apos;) as (name:chararray, x:int, y:int, z:int);&lt;/p&gt;


&lt;p&gt;But, D will work on previous schema of A, and not with the last definition. And maybe, we are missing this other historical point of view. &lt;/p&gt;</comment>
                            <comment id="13270888" author="azaroth" created="Tue, 8 May 2012 23:16:57 +0100"  >&lt;p&gt;Probably it is fine anyway.&lt;br/&gt;
The order in which they are defined (and printed) will tell you that D got defined before A.&lt;/p&gt;

&lt;p&gt;One use case I see for this history command is to build a Pig script interactively step by step.&lt;br/&gt;
The output of the history can be then copy-pasted to a file to save the script.&lt;br/&gt;
In this case you would need to repeat the D = ... statement anyway to get the correct order.&lt;br/&gt;
To do this for more than one statement you could simply use the output of history, and copy-paste it in grunt up to (excluding) the last A = ... statement.&lt;/p&gt;</comment>
                            <comment id="13270899" author="prkommireddi" created="Tue, 8 May 2012 23:29:34 +0100"  >&lt;p&gt;Should we let the behavior be similar to standard &quot;history&quot; command on UNIX shell?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
localhost:~ pkommireddi$ pwd
/Users/pkommireddi
localhost:~ pkommireddi$ date
Tue May  8 15:26:26 PDT 2012
localhost:~ pkommireddi$ whoami
pkommireddi
localhost:~ pkommireddi$ pwd
/Users/pkommireddi

localhost:~ pkommireddi$ history
  541  pwd
  542  date
  543  whoami
  544  pwd
  545  history
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It might be useful for users while developing/debugging to be able to look at all declarations of an alias.&lt;/p&gt;</comment>
                            <comment id="13270977" author="daijy" created="Wed, 9 May 2012 01:37:36 +0100"  >&lt;p&gt;I take back the &quot;last definition&quot; part. If people keep reusing the same alias, we shall keep the complete history:&lt;br/&gt;
A = load ...&lt;br/&gt;
A = foreach A ...&lt;br/&gt;
A = filter A by ...&lt;/p&gt;

&lt;p&gt;It is possible to detect complete dead statement, but I don&apos;t want to complicate the implementation.&lt;/p&gt;

&lt;p&gt;However, we shall reuse scriptCache instead of introducing a new data structure.&lt;/p&gt;</comment>
                            <comment id="13271439" author="xalan" created="Wed, 9 May 2012 15:15:31 +0100"  >&lt;p&gt;History of operators used so far. Is used Graph.scriptCache&lt;/p&gt;</comment>
                            <comment id="13271440" author="xalan" created="Wed, 9 May 2012 15:16:33 +0100"  >&lt;p&gt;History of operators used so far. Is used Graph.scriptCache&lt;/p&gt;</comment>
                            <comment id="13271822" author="daijy" created="Wed, 9 May 2012 22:21:57 +0100"  >&lt;p&gt;Looks good. Another request however, we shall print line number, but we can optionally turn it off (history -n sounds good?)&lt;/p&gt;</comment>
                            <comment id="13271937" author="xalan" created="Thu, 10 May 2012 00:25:40 +0100"  >&lt;p&gt;Something like this?&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; history -n&lt;br/&gt;
(1) A = load &apos;data/abs&apos; using PigStorage(&apos;|&apos;) as (name:chararray, id1:int, id2:int, id3:int);&lt;br/&gt;
(2) B = group A by id1;&lt;br/&gt;
(3) C = order A by id2;&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; history&lt;br/&gt;
A = load &apos;data/abs&apos; using PigStorage(&apos;|&apos;) as (name:chararray, id1:int, id2:int, id3:int);&lt;br/&gt;
B = rank A by id1;&lt;br/&gt;
C = order A by id2;&lt;/p&gt;
</comment>
                            <comment id="13271959" author="daijy" created="Thu, 10 May 2012 00:54:59 +0100"  >&lt;p&gt;Fine for me.&lt;/p&gt;</comment>
                            <comment id="13271965" author="prkommireddi" created="Thu, 10 May 2012 01:05:09 +0100"  >&lt;p&gt;Not a huge deal, but again replicating Unix &apos;history&apos; behavior (no parenthesis) would be ideal in my opinion. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
pkommireddi@pkommireddi-wsl:~$ pwd
/home/pkommireddi
pkommireddi@pkommireddi-wsl:~$ date
Wed May  9 17:01:37 PDT 2012
pkommireddi@pkommireddi-wsl:~$ pwd
/home/pkommireddi
pkommireddi@pkommireddi-wsl:~$ whoami
pkommireddi
pkommireddi@pkommireddi-wsl:~$ history

 2989  pwd
 2990  date
 2991  pwd
 2992  whoami
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13272066" author="daijy" created="Thu, 10 May 2012 05:00:43 +0100"  >&lt;p&gt;Yes, that&apos;s better, and let&apos;s make show line number the default option.&lt;/p&gt;</comment>
                            <comment id="13272158" author="xalan" created="Thu, 10 May 2012 08:39:53 +0100"  >&lt;p&gt;Last patch shows by default an enumerated history, this can be omitted with &quot;-n&quot;&lt;/p&gt;</comment>
                            <comment id="13272944" author="daijy" created="Fri, 11 May 2012 01:33:42 +0100"  >&lt;p&gt;+1. Patch committed to trunk. Thanks Allan!&lt;/p&gt;</comment>
                            <comment id="13272949" author="prkommireddi" created="Fri, 11 May 2012 01:39:59 +0100"  >&lt;p&gt;Thanks Allan for the contribution!&lt;/p&gt;</comment>
                            <comment id="13470202" author="xalan" created="Fri, 5 Oct 2012 10:47:36 +0100"  >&lt;p&gt;I would like to make some changes on the format to show the list of statements. For example, I make it to display the statements with an indentation like history command does on Unix. &lt;/p&gt;</comment>
                            <comment id="13470204" author="xalan" created="Fri, 5 Oct 2012 10:52:35 +0100"  >&lt;p&gt;Changes on the displaying format of list of statements used so far.&lt;/p&gt;</comment>
                            <comment id="13500589" author="julienledem" created="Mon, 19 Nov 2012 20:02:42 +0000"  >&lt;p&gt;Please open a new ticket for this and resolve this one&lt;/p&gt;</comment>
                            <comment id="13535355" author="julienledem" created="Tue, 18 Dec 2012 21:30:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xalan&quot; class=&quot;user-hover&quot; rel=&quot;xalan&quot;&gt;Allan Avenda&#241;o&lt;/a&gt; I&apos;m closing this ticket as it has been committed.&lt;br/&gt;
Please open a new ticket to further improve your contribution.&lt;br/&gt;
Thanks again&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12525054" name="gruntHistory.patch" size="3975" author="xalan" created="Mon, 30 Apr 2012 11:06:48 +0100"/>
                            <attachment id="12526054" name="gruntHistory1.patch" size="4790" author="xalan" created="Tue, 8 May 2012 23:06:56 +0100"/>
                            <attachment id="12526164" name="gruntHistory2.patch" size="3654" author="xalan" created="Wed, 9 May 2012 15:16:33 +0100"/>
                            <attachment id="12526312" name="gruntHistory3.patch" size="4659" author="xalan" created="Thu, 10 May 2012 08:22:38 +0100"/>
                            <attachment id="12547962" name="gruntHistory4.patch" size="717" author="xalan" created="Fri, 5 Oct 2012 10:52:35 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Mar 2012 03:40:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231487</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxwv93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15550</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Add new grunt command:&lt;br/&gt;
history [-n]: Display the list statements in cache. -n means hiding line numbers.&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>