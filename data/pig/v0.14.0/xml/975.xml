<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:01:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-975/PIG-975.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-975] Need a databag that does not register with SpillableMemoryManager and spill data pro-actively</title>
                <link>https://issues.apache.org/jira/browse/PIG-975</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;POPackage uses DefaultDataBag during reduce process to hold data. It is registered with SpillableMemoryManager and prone to OutOfMemoryException.  It&apos;s better to pro-actively managers the usage of the memory. The bag fills in memory to a specified amount, and dump the rest the disk.  The amount of memory to hold tuples is configurable. This can avoid out of memory error.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12436531">PIG-975</key>
            <summary>Need a databag that does not register with SpillableMemoryManager and spill data pro-actively</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yinghe">Ying He</assignee>
                                    <reporter username="yinghe">Ying He</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Sep 2009 21:04:12 +0100</created>
                <updated>Wed, 24 Mar 2010 22:15:55 +0000</updated>
                            <resolved>Tue, 6 Oct 2009 01:46:47 +0100</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12759234" author="yinghe" created="Thu, 24 Sep 2009 21:09:34 +0100"  >&lt;p&gt;implement a new bag and use it in POPackage&lt;/p&gt;</comment>
                            <comment id="12759253" author="yinghe" created="Thu, 24 Sep 2009 21:54:56 +0100"  >&lt;p&gt;remove System.out.println&lt;/p&gt;</comment>
                            <comment id="12759284" author="olgan" created="Thu, 24 Sep 2009 22:59:28 +0100"  >&lt;p&gt;Couple of questions comments on the patch:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Why do we need to synchronize in add. Who else is accessing the bag since it is no longer managed by spillable manager?&lt;/li&gt;
	&lt;li&gt;Memory fraction should be a java property so that users can control it they choose so&lt;/li&gt;
	&lt;li&gt;Why do we have limit of only 100 tuples in memory since we already have memory limit? Also, if we do need it, shouldn&apos;t it be configurable?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12759299" author="yinghe" created="Thu, 24 Sep 2009 23:46:38 +0100"  >&lt;p&gt;Answer to Olga&apos;s questions:&lt;/p&gt;

&lt;p&gt;1. The synchronization can be removed. &lt;br/&gt;
2. Memory fraction is configurable. the property name is pig.cachedbag.memusage, default value is 0.5&lt;br/&gt;
3. The first 100 tuples are used to calculate tuple size in memory to determine how many tuples can fit into the configured memusage. It&apos;s not the number of tuples kept in memory&lt;/p&gt;</comment>
                            <comment id="12759322" author="olgan" created="Fri, 25 Sep 2009 00:27:07 +0100"  >&lt;p&gt;Ok, then lets remove the synchronization. The rest looks good. Could you also put perf numbers that you see with this change&lt;/p&gt;</comment>
                            <comment id="12759619" author="yinghe" created="Fri, 25 Sep 2009 17:42:06 +0100"  >&lt;p&gt;remove synchronization&lt;/p&gt;</comment>
                            <comment id="12759622" author="yinghe" created="Fri, 25 Sep 2009 17:51:19 +0100"  >&lt;p&gt;performance numbers &lt;/p&gt;</comment>
                            <comment id="12759645" author="pkamath" created="Fri, 25 Sep 2009 18:40:53 +0100"  >&lt;p&gt;I think it might be a good idea to have a config parameter (maybe a java -D property) which can allow users to choose between spillableBagForReduce and NonSpillableBagForReduce with the Non spillable one being the default. This way if for some reason users find the spillablebag better for their query they can use it.&lt;/p&gt;</comment>
                            <comment id="12759681" author="yinghe" created="Fri, 25 Sep 2009 19:35:00 +0100"  >&lt;p&gt;I think this is too implementation specific to expose to end user. Frankly, I don&apos;t think user cares which class we use for the data bags. &lt;/p&gt;</comment>
                            <comment id="12759689" author="olgan" created="Fri, 25 Sep 2009 19:43:36 +0100"  >&lt;p&gt;Ying, what Pradeep is asking for is more like a safety switch - to give users a way to go back to the old implementation if they run into problem with new. Once we verify that the new code is as stable as the old, we would remove the switch. We would also not expose it to users unless they do run into trouble.&lt;/p&gt;</comment>
                            <comment id="12759741" author="yinghe" created="Fri, 25 Sep 2009 21:57:32 +0100"  >&lt;p&gt;Add switch to old bag.  Setting property pig.cachedbag.type=default  would switch to old default bag. If not specified, use InternalCachedBag.l&lt;/p&gt;</comment>
                            <comment id="12760485" author="hadoopqa" created="Tue, 29 Sep 2009 04:23:00 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12420603/PIG-975.patch4&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12420603/PIG-975.patch4&lt;/a&gt;&lt;br/&gt;
  against trunk revision 819691.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 406 javac compiler warnings (more than the trunk&apos;s current 403 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 278 release audit warnings (more than the trunk&apos;s current 277 warnings).&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/10/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/10/testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/10/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/10/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/10/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/10/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/10/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/10/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12762472" author="olgan" created="Tue, 6 Oct 2009 01:46:47 +0100"  >&lt;p&gt;patch committed. Thanks, Ying&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12413330">PIG-636</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12437654">PIG-1000</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12420482" name="PIG-975.patch" size="10737" author="yinghe" created="Thu, 24 Sep 2009 21:09:33 +0100"/>
                            <attachment id="12420486" name="PIG-975.patch2" size="10706" author="yinghe" created="Thu, 24 Sep 2009 21:54:56 +0100"/>
                            <attachment id="12420570" name="PIG-975.patch3" size="10586" author="yinghe" created="Fri, 25 Sep 2009 17:42:06 +0100"/>
                            <attachment id="12420603" name="PIG-975.patch4" size="11479" author="yinghe" created="Fri, 25 Sep 2009 21:57:31 +0100"/>
                            <attachment id="12420571" name="internalbag.xls" size="81920" author="yinghe" created="Fri, 25 Sep 2009 17:51:19 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Sep 2009 21:59:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164512</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyal2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95725</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>