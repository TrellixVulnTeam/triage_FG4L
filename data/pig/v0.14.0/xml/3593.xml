<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:01:05 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3593/PIG-3593.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3593] Import jython standard module fail on cluster</title>
                <link>https://issues.apache.org/jira/browse/PIG-3593</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The following script fail on cluster:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; urllib

@outputSchema(&lt;span class=&quot;code-quote&quot;&gt;&quot;url:chararray&quot;&lt;/span&gt;)
def urlDecode(str):
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; urllib.unquote_plus( str )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
register &apos;126.py&apos; using jython as myfuncs;

a = load &apos;studenttab10k&apos; using PigStorage() as (name:chararray, age:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, gpa:&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;);
b = foreach a generate myfuncs.urlDecode(name);
dump b;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Error stack:&lt;/p&gt;

&lt;p&gt;java.io.IOException: Deserialization error: could not instantiate &apos;org.apache.pig.scripting.jython.JythonFunction&apos; with arguments &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;127.py, resplit&amp;#93;&lt;/span&gt;&apos;&lt;br/&gt;
	at org.apache.pig.impl.util.ObjectSerializer.deserialize(ObjectSerializer.java:59)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.setup(PigGenericMapBase.java:180)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:255)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:394)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:249)&lt;br/&gt;
Caused by: java.lang.RuntimeException: could not instantiate &apos;org.apache.pig.scripting.jython.JythonFunction&apos; with arguments &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;127.py, resplit&amp;#93;&lt;/span&gt;&apos;&lt;br/&gt;
	at org.apache.pig.impl.PigContext.instantiateFuncFromSpec(PigContext.java:727)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.instantiateFunc(POUserFunc.java:126)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.readObject(POUserFunc.java:567)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:979)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:349)&lt;br/&gt;
	at java.util.ArrayList.readObject(ArrayList.java:593)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:979)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:349)&lt;br/&gt;
	at java.util.HashMap.readObject(HashMap.java:1030)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:979)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1970)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1895)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1970)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1895)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:349)&lt;br/&gt;
	at java.util.ArrayList.readObject(ArrayList.java:593)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:979)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1970)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1895)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:349)&lt;br/&gt;
	at java.util.HashMap.readObject(HashMap.java:1030)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:979)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1970)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1895)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:349)&lt;br/&gt;
	at org.apache.pig.impl.util.ObjectSerializer.deserialize(ObjectSerializer.java:57)&lt;br/&gt;
	... 9 more&lt;br/&gt;
Caused by: java.lang.reflect.InvocationTargetException&lt;br/&gt;
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)&lt;br/&gt;
	at java.lang.reflect.Constructor.newInstance(Constructor.java:513)&lt;br/&gt;
	at org.apache.pig.impl.PigContext.instantiateFuncFromSpec(PigContext.java:695)&lt;br/&gt;
	... 75 more&lt;br/&gt;
Caused by: java.lang.IllegalStateException: Could not initialize: 127.py&lt;br/&gt;
	at org.apache.pig.scripting.jython.JythonFunction.&amp;lt;init&amp;gt;(JythonFunction.java:92)&lt;br/&gt;
	... 80 more&lt;br/&gt;
Caused by: org.apache.pig.backend.executionengine.ExecException: ERROR 1121: Python Error. Traceback (most recent call last):&lt;br/&gt;
  File &quot;127.py&quot;, line 2, in &amp;lt;module&amp;gt;&lt;br/&gt;
    import re&lt;br/&gt;
  File &quot;_&lt;em&gt;pyclasspath&lt;/em&gt;_/re$py.class&quot;, line 279, in &amp;lt;module&amp;gt;&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: 10&lt;br/&gt;
	at org.python.objectweb.asm.ClassReader.a(Unknown Source)&lt;br/&gt;
	at org.python.objectweb.asm.ClassReader.accept(Unknown Source)&lt;br/&gt;
	at org.python.objectweb.asm.ClassReader.accept(Unknown Source)&lt;br/&gt;
	at org.python.core.AnnotationReader.&amp;lt;init&amp;gt;(AnnotationReader.java:44)&lt;br/&gt;
	at org.python.core.imp.readCode(imp.java:219)&lt;br/&gt;
	at org.python.core.util.importer.getModuleCode(importer.java:202)&lt;br/&gt;
	at org.python.core.util.importer.importer_load_module(importer.java:95)&lt;br/&gt;
	at org.python.core.ClasspathPyImporter.ClasspathPyImporter_load_module(ClasspathPyImporter.java:63)&lt;br/&gt;
	at org.python.core.ClasspathPyImporter$ClasspathPyImporter_load_module_exposer._&lt;em&gt;call&lt;/em&gt;_(Unknown Source)&lt;br/&gt;
	at org.python.core.PyBuiltinMethodNarrow._&lt;em&gt;call&lt;/em&gt;_(PyBuiltinMethodNarrow.java:47)&lt;br/&gt;
	at org.python.core.imp.loadFromLoader(imp.java:518)&lt;br/&gt;
	at org.python.core.imp.find_module(imp.java:472)&lt;br/&gt;
	at org.python.core.imp.import_next(imp.java:718)&lt;br/&gt;
	at org.python.core.imp.import_module_level(imp.java:827)&lt;br/&gt;
	at org.python.core.imp.importName(imp.java:917)&lt;br/&gt;
	at org.python.core.ImportFunction._&lt;em&gt;call&lt;/em&gt;&lt;em&gt;(&lt;/em&gt;&lt;em&gt;builtin&lt;/em&gt;_.java:1220)&lt;br/&gt;
	at org.python.core.PyObject._&lt;em&gt;call&lt;/em&gt;_(PyObject.java:357)&lt;br/&gt;
	at org.python.core._&lt;em&gt;builtin&lt;/em&gt;&lt;em&gt;.&lt;/em&gt;&lt;em&gt;import&lt;/em&gt;&lt;em&gt;(&lt;/em&gt;&lt;em&gt;builtin&lt;/em&gt;_.java:1173)&lt;br/&gt;
	at org.python.core.imp.importOne(imp.java:936)&lt;br/&gt;
	at re$py.f$0(/home/frank/hg/jython/jython/dist/Lib/re.py:289)&lt;br/&gt;
	at re$py.call_function(/home/frank/hg/jython/jython/dist/Lib/re.py)&lt;br/&gt;
	at org.python.core.PyTableCode.call(PyTableCode.java:165)&lt;br/&gt;
	at org.python.core.PyCode.call(PyCode.java:18)&lt;br/&gt;
	at org.python.core.imp.createFromCode(imp.java:391)&lt;br/&gt;
	at org.python.core.util.importer.importer_load_module(importer.java:109)&lt;br/&gt;
	at org.python.core.ClasspathPyImporter.ClasspathPyImporter_load_module(ClasspathPyImporter.java:63)&lt;br/&gt;
	at org.python.core.ClasspathPyImporter$ClasspathPyImporter_load_module_exposer._&lt;em&gt;call&lt;/em&gt;_(Unknown Source)&lt;br/&gt;
	at org.python.core.PyBuiltinMethodNarrow._&lt;em&gt;call&lt;/em&gt;_(PyBuiltinMethodNarrow.java:47)&lt;br/&gt;
	at org.python.core.imp.loadFromLoader(imp.java:518)&lt;br/&gt;
	at org.python.core.imp.find_module(imp.java:472)&lt;br/&gt;
	at org.python.core.imp.import_next(imp.java:718)&lt;br/&gt;
	at org.python.core.imp.import_module_level(imp.java:827)&lt;br/&gt;
	at org.python.core.imp.importName(imp.java:917)&lt;br/&gt;
	at org.python.core.ImportFunction._&lt;em&gt;call&lt;/em&gt;&lt;em&gt;(&lt;/em&gt;&lt;em&gt;builtin&lt;/em&gt;_.java:1220)&lt;br/&gt;
	at org.python.core.PyObject._&lt;em&gt;call&lt;/em&gt;_(PyObject.java:357)&lt;br/&gt;
	at org.python.core._&lt;em&gt;builtin&lt;/em&gt;&lt;em&gt;.&lt;/em&gt;&lt;em&gt;import&lt;/em&gt;&lt;em&gt;(&lt;/em&gt;&lt;em&gt;builtin&lt;/em&gt;_.java:1173)&lt;br/&gt;
	at org.python.core.imp.importOne(imp.java:936)&lt;br/&gt;
	at org.python.pycode._pyx3.f$0(127.py:3)&lt;br/&gt;
	at org.python.pycode._pyx3.call_function(127.py)&lt;br/&gt;
	at org.python.core.PyTableCode.call(PyTableCode.java:165)&lt;br/&gt;
	at org.python.core.PyCode.call(PyCode.java:18)&lt;br/&gt;
	at org.python.core.Py.runCode(Py.java:1275)&lt;br/&gt;
	at org.python.util.PythonInterpreter.execfile(PythonInterpreter.java:235)&lt;br/&gt;
	at org.apache.pig.scripting.jython.JythonScriptEngine$Interpreter.execfile(JythonScriptEngine.java:217)&lt;br/&gt;
	at org.apache.pig.scripting.jython.JythonScriptEngine$Interpreter.init(JythonScriptEngine.java:163)&lt;br/&gt;
	at org.apache.pig.scripting.jython.JythonScriptEngine.getFunction(JythonScriptEngine.java:388)&lt;br/&gt;
	at org.apache.pig.scripting.jython.JythonFunction.&amp;lt;init&amp;gt;(JythonFunction.java:55)&lt;br/&gt;
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)&lt;br/&gt;
	at java.lang.reflect.Constructor.newInstance(Constructor.java:513)&lt;br/&gt;
	at org.apache.pig.impl.PigContext.instantiateFuncFromSpec(PigContext.java:695)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.instantiateFunc(POUserFunc.java:126)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.readObject(POUserFunc.java:567)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:979)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:349)&lt;br/&gt;
	at java.util.ArrayList.readObject(ArrayList.java:593)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:979)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:349)&lt;br/&gt;
	at java.util.HashMap.readObject(HashMap.java:1030)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:979)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1970)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1895)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1970)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1895)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:349)&lt;br/&gt;
	at java.util.ArrayList.readObject(ArrayList.java:593)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:979)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1970)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1895)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:349)&lt;br/&gt;
	at java.util.HashMap.readObject(HashMap.java:1030)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:979)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1970)&lt;br/&gt;
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1895)&lt;br/&gt;
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)&lt;br/&gt;
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:349)&lt;br/&gt;
	at org.apache.pig.impl.util.ObjectSerializer.deserialize(ObjectSerializer.java:57)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.setup(PigGenericMapBase.java:180)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:255)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:394)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:249)&lt;/p&gt;

&lt;p&gt;Seems objectweb asm does not like repackaged jython libraries. &lt;/p&gt;

&lt;p&gt;We have similar tests in TestScriptUDF with MiniCluster but those are running fine. Those are added by &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1824&quot; title=&quot;Support import modules in Jython UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1824&quot;&gt;&lt;del&gt;PIG-1824&lt;/del&gt;&lt;/a&gt; and that ticket seems solves the issue. But I check all released versions since 0.10.0, none is working on cluster. I am not sure whether we fixed issue once in a while then break it, or we didn&apos;t solve the issue on the cluster.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681656">PIG-3593</key>
            <summary>Import jython standard module fail on cluster</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Nov 2013 20:56:25 +0000</created>
                <updated>Tue, 15 Apr 2014 21:45:00 +0100</updated>
                            <resolved>Thu, 28 Nov 2013 22:53:09 +0000</resolved>
                                                    <fixVersion>0.12.1</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13834138" author="daijy" created="Wed, 27 Nov 2013 20:59:44 +0000"  >&lt;p&gt;asm does not complain if we ship jython.jar as a single unit and put in distributed cache. Attach patch. Since this issue only manifest on cluster, and similar tests on MiniCluster pass, I don&apos;t include a test case here.&lt;/p&gt;</comment>
                            <comment id="13834149" author="rohini" created="Wed, 27 Nov 2013 21:09:03 +0000"  >&lt;p&gt;+1. Just a minor comment. You don&apos;t have to do scriptJar.toString() as it is already a string&lt;/p&gt;</comment>
                            <comment id="13834157" author="rohini" created="Wed, 27 Nov 2013 21:21:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;I am not sure whether we fixed issue once in a while then break it, or we didn&apos;t solve the issue on the cluster.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;  This issue does not happen always. Only happens when there are imports within the module that you are importing and happens in special cases. We also hit a similar error, but that went away when we did a register of the jython jar in the script. This would help get rid of the extra register we did to workaround the problem. &lt;/p&gt;</comment>
                            <comment id="13835097" author="daijy" created="Thu, 28 Nov 2013 22:53:09 +0000"  >&lt;p&gt;In my case, even register fail. job.jar always take precedence.&lt;/p&gt;

&lt;p&gt;Patch committed to 0.12 branch and trunk. Thanks Rohini for quick review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12616116" name="PIG-3593-1.patch" size="1783" author="daijy" created="Wed, 27 Nov 2013 20:59:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Nov 2013 21:09:03 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360920</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzk287:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361219</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>