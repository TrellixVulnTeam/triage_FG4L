<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:03:25 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3435/PIG-3435.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3435] Custom Partitioner not working with MultiQueryOptimizer</title>
                <link>https://issues.apache.org/jira/browse/PIG-3435</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;When looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3385&quot; title=&quot;DISTINCT no longer uses custom partitioner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3385&quot;&gt;&lt;del&gt;PIG-3385&lt;/del&gt;&lt;/a&gt;, noticed some issues in handling of custom partitioner with multi-query optimization.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C1 = group B1 by col1 PARTITION BY
       org.apache.pig.test.utils.SimpleCustomPartitioner parallel 2;
C2 = group B2 by col1 PARTITION BY
       org.apache.pig.test.utils.SimpleCustomPartitioner parallel 2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This seems to be merged to one mapreduce job correctly but custom partitioner information was lost.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C1 = group B1 by col1 PARTITION BY org.apache.pig.test.utils.SimpleCustomPartitioner parallel 2;
C2 = group B2 by col1 parallel 2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This seems to be merged even though they should run on two different partitioner.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12664924">PIG-3435</key>
            <summary>Custom Partitioner not working with MultiQueryOptimizer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knoguchi">Koji Noguchi</assignee>
                                    <reporter username="knoguchi">Koji Noguchi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Aug 2013 22:53:05 +0100</created>
                <updated>Mon, 14 Oct 2013 17:46:38 +0100</updated>
                            <resolved>Wed, 28 Aug 2013 01:35:54 +0100</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                    <fixVersion>0.11.2</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13747999" author="knoguchi" created="Thu, 22 Aug 2013 23:34:06 +0100"  >&lt;p&gt;Looking at the multi-query optimization code and documents.  I chickened out. &lt;/p&gt;

&lt;p&gt;Taking the same approach as &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1108&quot; title=&quot;Incorrect map output key type in MultiQuery optimization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1108&quot;&gt;&lt;del&gt;PIG-1108&lt;/del&gt;&lt;/a&gt; and simply skipping the MR jobs with custom partitioner.&lt;/p&gt;

&lt;p&gt;Attaching the test case soon.&lt;/p&gt;</comment>
                            <comment id="13748823" author="knoguchi" created="Fri, 23 Aug 2013 19:26:20 +0100"  >&lt;p&gt;While looking at the testcase, found &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2627&quot; title=&quot;Custom partitioner not set when POSplit is involved in Plan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2627&quot;&gt;&lt;del&gt;PIG-2627&lt;/del&gt;&lt;/a&gt; where it fixed one of the issues with custom-partitioner and multiquery optimization (but not all).&lt;/p&gt;

&lt;p&gt;Specific case mentioned on that ticket is handled on that jira and it works, but my patch here simply skips multiquery optimization for ALL custom partitioner jobs.&lt;/p&gt;

&lt;p&gt;Since it&apos;s sort of a correctness issue, I want this fix to be back-ported to 0.11.  And for that, I kept the change to be simple.&lt;/p&gt;

&lt;p&gt;Can we create a separate jira for reviving custom-partitioner + multiquery optimization for later releases?&lt;/p&gt;</comment>
                            <comment id="13751950" author="daijy" created="Wed, 28 Aug 2013 01:31:30 +0100"  >&lt;p&gt;custom-partitioner + multiquery optimization should be a valid use case, we shall open a Jira ticket for it.&lt;/p&gt;

&lt;p&gt;But correctness first, +1 for the patch.&lt;/p&gt;</comment>
                            <comment id="13751955" author="daijy" created="Wed, 28 Aug 2013 01:35:54 +0100"  >&lt;p&gt;Patch committed to trunk. Opened &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3440&quot; title=&quot;MultiQuery to work with custom partitioner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3440&quot;&gt;PIG-3440&lt;/a&gt; to track the custom partitioner + multiquery optimization. Thanks Koji!&lt;/p&gt;</comment>
                            <comment id="13751999" author="knoguchi" created="Wed, 28 Aug 2013 02:32:05 +0100"  >&lt;p&gt;Thanks Daniel!  &lt;br/&gt;
Can we back-port this patch to 0.11? &lt;br/&gt;
(That was one of the motivation for me to keep the patch simple.)&lt;/p&gt;

&lt;p&gt;I&apos;ll work on &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3440&quot; title=&quot;MultiQuery to work with custom partitioner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3440&quot;&gt;PIG-3440&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13752824" author="daijy" created="Wed, 28 Aug 2013 21:41:46 +0100"  >&lt;p&gt;Committed to 0.11 branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12599525" name="pig-3435-v01.patch" size="1029" author="knoguchi" created="Thu, 22 Aug 2013 23:34:06 +0100"/>
                            <attachment id="12599679" name="pig-3435-v02_skipcustompatitioner_for_merge.patch" size="3969" author="knoguchi" created="Fri, 23 Aug 2013 19:26:20 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 28 Aug 2013 00:31:30 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344867</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzhbcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>345168</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>