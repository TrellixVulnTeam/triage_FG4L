<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:00:44 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-4135/PIG-4135.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-4135] Fetch optimization should be disabled if plan contains no limit</title>
                <link>https://issues.apache.org/jira/browse/PIG-4135</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;After deploying fetch optimization in production, a couple of users ran into this situation. They had fairly large input data, but after filtering it by a regular expression, it becomes small. So they didn&apos;t add limit to the query. &lt;/p&gt;

&lt;p&gt;The problem is that even though the output is small, processing the input must be done in the cluster not in the client. However, fetch optimization blindly fetches the entire input into the client since the plan is map-only job and finishes with dump.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12735593">PIG-4135</key>
            <summary>Fetch optimization should be disabled if plan contains no limit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Aug 2014 00:27:08 +0100</created>
                <updated>Fri, 21 Nov 2014 05:59:12 +0000</updated>
                            <resolved>Thu, 21 Aug 2014 22:24:49 +0100</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="14104795" author="cheolsoo" created="Thu, 21 Aug 2014 00:33:39 +0100"  >&lt;p&gt;Uploading a patch that marks the plan as fetchable only if it&apos;s map-only job, finishes with dump, and includes limit. I also updated the Pig docs about this condition.&lt;/p&gt;</comment>
                            <comment id="14105067" author="daijy" created="Thu, 21 Aug 2014 06:31:13 +0100"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14105186" author="lbendig" created="Thu, 21 Aug 2014 09:28:48 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;, thanks for pointing out this issue. Filter is a good safeguard, but it also reduces the use cases of fetch.&lt;br/&gt;
I&apos;m wondering, whether we can have an input size estimation instead, like pig.auto.local.input.maxbytes ?&lt;/p&gt;</comment>
                            <comment id="14105535" author="cheolsoo" created="Thu, 21 Aug 2014 17:25:34 +0100"  >&lt;p&gt;Won&apos;t the input size reduce the use cases more than limit? For example, if fetch optimizer is disabled when input size &amp;gt; 100MB, the example that I described in this jira won&apos;t use fetch optimization even with limit. In fact, it will be disabled in most cases. On the other hand, limit is effective since it is pushed down into the load, no more records than the limit will be loaded.&lt;/p&gt;

&lt;p&gt;I think the main use case of fetch optimization is to peek a few sample records from input files quickly. Requiring a limit doesn&apos;t reduce the use cases, does it?&lt;/p&gt;</comment>
                            <comment id="14105879" author="lbendig" created="Thu, 21 Aug 2014 21:15:08 +0100"  >&lt;p&gt;Yes, that&apos;s the intended use case. I suddenly was thinking of some other examples but you are correct, using filter should be the cleanest and safest way to pick those map-only jobs that can be quickly fetched from grunt. So +1, thank you for the fix!&lt;/p&gt;</comment>
                            <comment id="14105983" author="cheolsoo" created="Thu, 21 Aug 2014 22:24:49 +0100"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;

&lt;p&gt;Thank you Daniel and Lorand for the review!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12686477">PIG-3642</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12663269" name="PIG-4135-1.patch" size="2980" author="cheolsoo" created="Thu, 21 Aug 2014 00:33:39 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Aug 2014 05:31:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzt0un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>