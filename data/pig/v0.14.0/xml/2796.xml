<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:08:48 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2796/PIG-2796.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2796] Local temporary paths are not always valid HDFS path names.</title>
                <link>https://issues.apache.org/jira/browse/PIG-2796</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;A number of pig scripts follow the pattern:&lt;/p&gt;

&lt;p&gt;File tempFile = File.createTempFile(&quot;this&quot;, &quot;.txt&quot;);&lt;br/&gt;
copyFromLocalToCluster (tempFile.to_string(), tempFile.to_string());&lt;br/&gt;
tempFile.delete();&lt;/p&gt;

&lt;p&gt;The goal, here, seems to be to generate a temp filename to avoid issues on the next run if the file doesn&apos;t get cleaned up.  The problem is that File.createTempFile on Windows creates files with names like C:\users\myuser\App data\local\temp\file.txt.  The problem is that &quot;:&quot; is not a valid DFS character and so the put fails.&lt;/p&gt;

&lt;p&gt;The easy fix on this is to remove colons from the path before upload.  Then we get something like C\users\myuser\App data\local\temp\file.txt which is a valid DFS pathname with minimal impact to the tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12597864">PIG-2796</key>
            <summary>Local temporary paths are not always valid HDFS path names.</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                            <parent id="12597859">PIG-2793</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jgordon">John Gordon</assignee>
                                    <reporter username="jgordon">John Gordon</reporter>
                        <labels>
                    </labels>
                <created>Sat, 7 Jul 2012 01:29:54 +0100</created>
                <updated>Sun, 6 Jan 2013 23:56:59 +0000</updated>
                            <resolved>Wed, 31 Oct 2012 21:25:54 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.11</fixVersion>
                    <fixVersion>0.10.1</fixVersion>
                    <fixVersion>0.12.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13469273" author="jgordon" created="Thu, 4 Oct 2012 11:22:12 +0100"  >&lt;p&gt;Test fixes for local file path usage in HDFS.  Largely, it is removing the colon in windows paths and minimizing the number of direct File.toString() usage to create HDFS paths.&lt;/p&gt;</comment>
                            <comment id="13479176" author="jcoveney" created="Thu, 18 Oct 2012 18:44:46 +0100"  >&lt;p&gt;I feel like the real fix is to use FilerLocalizer.getTemporaryPath(PigContext), no? This gives you a temporary path in HDFS. We can make sure that works on Windows (and should)&lt;/p&gt;</comment>
                            <comment id="13479320" author="jgordon" created="Thu, 18 Oct 2012 21:17:13 +0100"  >&lt;p&gt;That sounds very promising, I will investigate and come back with findings or a patch.&lt;/p&gt;</comment>
                            <comment id="13480944" author="jgordon" created="Sun, 21 Oct 2012 11:14:45 +0100"  >&lt;p&gt;After reviewing the patch, the overall codebase, and the abstraction in question, I think we need another JIRA specifically to refactor temporary file usage with abstract contexts.&lt;/p&gt;

&lt;p&gt;This particular patch applies to a number of different temporary file allocation patterns from pathname only to file+content.  Additionally, there are a number of temporary file allocations that work and aren&apos;t covered in this JIRA.  This JIRA gives us a better baseline to refactor and test on both platforms, and I wouldn&apos;t want to do that refactor without a clean baseline to pick up regressions.&lt;/p&gt;

&lt;p&gt;I do agree that the abstraction should be more widely used for code health and portability.  I just don&apos;t think it should be blended with this patch, which already touches a lot of files.&lt;/p&gt;

&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2995&quot; title=&quot;Refactor unit test temporary file allocation patterns to use FileLocalizer.getTemporaryPath&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2995&quot;&gt;PIG-2995&lt;/a&gt; to track this.&lt;/p&gt;</comment>
                            <comment id="13488247" author="daijy" created="Wed, 31 Oct 2012 21:25:54 +0000"  >&lt;p&gt;+1. We do need refactory to use FileLocalizer.createTempFile, but that can improve later.&lt;/p&gt;

&lt;p&gt;Patch committed to 0.10/0.11/trunk.&lt;/p&gt;

&lt;p&gt;Thanks John!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12547708" name="0006-Local-Remote-file-mapping-for-tests-with-temps.patch" size="29076" author="jgordon" created="Thu, 4 Oct 2012 11:22:12 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Oct 2012 17:44:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>240216</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxut27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3527</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>