<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:52:45 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-812/PIG-812.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-812] COUNT(*) does not work </title>
                <link>https://issues.apache.org/jira/browse/PIG-812</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig script to count the number of rows in a studenttab10k file which contains 10k records.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
studenttab = LOAD &apos;studenttab10k&apos; AS (name:chararray, age:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,gpa:&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;);

X2 = GROUP studenttab ALL;

describe X2;

Y2 = FOREACH X2 GENERATE COUNT(*);

explain Y2;

DUMP Y2;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;returns the following error&lt;br/&gt;
================================================================&lt;br/&gt;
ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1066: Unable to open iterator for alias Y2&lt;br/&gt;
Details at logfile: /homes/viraj/pig-svn/trunk/pig_1242783700970.log&lt;br/&gt;
================================================================&lt;/p&gt;

&lt;p&gt;If you look at the log file:&lt;br/&gt;
================================================================&lt;br/&gt;
Caused by: java.lang.ClassCastException&lt;br/&gt;
        at org.apache.pig.builtin.COUNT$Initial.exec(COUNT.java:76)&lt;br/&gt;
        at org.apache.pig.builtin.COUNT$Initial.exec(COUNT.java:68)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNext(POUserFunc.java:201)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNext(POUserFunc.java:235)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.processPlan(POForEach.java:254)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.getNext(POForEach.java:204)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.PhysicalOperator.processInput(PhysicalOperator.java:231)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POLocalRearrange.getNext(POLocalRearrange.java:223)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapBase.runPipeline(PigMapBase.java:245)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapBase.map(PigMapBase.java:236)&lt;br/&gt;
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapReduce$Map.map(PigMapReduce.java:88)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:47)&lt;br/&gt;
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:227)&lt;br/&gt;
================================================================&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425873">PIG-812</key>
            <summary>COUNT(*) does not work </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="breed">Benjamin Reed</assignee>
                                    <reporter username="viraj">Viraj Bhat</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 May 2009 02:45:33 +0100</created>
                <updated>Wed, 24 Mar 2010 22:04:18 +0000</updated>
                            <resolved>Fri, 21 Aug 2009 19:35:19 +0100</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.2.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12710967" author="viraj" created="Wed, 20 May 2009 02:46:21 +0100"  >&lt;p&gt;Input file&lt;/p&gt;</comment>
                            <comment id="12710972" author="viraj" created="Wed, 20 May 2009 03:04:16 +0100"  >&lt;p&gt;The workaround is to use:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Y2 = FOREACH X2 GENERATE COUNT(studenttab);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please update the documentation at &lt;a href=&quot;http://hadoop.apache.org/pig/docs/r0.2.0/piglatin.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/pig/docs/r0.2.0/piglatin.html&lt;/a&gt;  if COUNT&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; is actually supported in the latest release.  This is definitely a regression from the previous releases.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Viraj&lt;/p&gt;</comment>
                            <comment id="12711448" author="olgan" created="Thu, 21 May 2009 02:29:58 +0100"  >&lt;p&gt;The fact that this worked in earlier code was a bug. Now pig has a consistent implementation of *.&lt;/p&gt;

&lt;p&gt;From the beginning, Pig chose a different semantics for * than SQL. (it is unfortunate that we chose to use &quot;*&quot; for this but is something we need to leave in for consistency and backward compatibility.)&lt;/p&gt;

&lt;p&gt;&quot;*&quot; in SQL means a relation while in pig it means a tuple passed to an operator. So in Pig you can order on the entire row by saying&lt;/p&gt;

&lt;p&gt;B = order A by *;&lt;/p&gt;

&lt;p&gt;You can also pass the entire row to a UDF by doing myUDF&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;In this context COUNT&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; makes no sense.&lt;/p&gt;</comment>
                            <comment id="12711786" author="gmavromatis" created="Thu, 21 May 2009 21:32:03 +0100"  >&lt;p&gt;Olga&apos;s clarification makes sens but it is missing from the pig latin spec. Even Viraj did not know it. How can users know it?&lt;/p&gt;

&lt;p&gt;In order for this to be resolved in the right manner the following must added in the &lt;a href=&quot;http://hadoop.apache.org/pig/docs/r0.2.0/piglatin.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hadoop.apache.org/pig/docs/r0.2.0/piglatin.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1) The semantics of * as explained by Olga.&lt;br/&gt;
2) An example of GROUP ALL&lt;/p&gt;

&lt;p&gt;Otherwise people will waste their time doing the same (documentation-caused) mistakes again.&lt;/p&gt;</comment>
                            <comment id="12729030" author="breed" created="Thu, 9 Jul 2009 04:39:41 +0100"  >&lt;p&gt;updating the docs to reflect this semantics.&lt;/p&gt;</comment>
                            <comment id="12729062" author="breed" created="Thu, 9 Jul 2009 07:01:53 +0100"  >&lt;p&gt;i&apos;ve modified the doc to better explain the expressions that can be used in the functions and how flatten works. for convenience for reviewing i&apos;ve attached a pdf of the changed pages.&lt;/p&gt;</comment>
                            <comment id="12729115" author="hadoopqa" created="Thu, 9 Jul 2009 10:10:49 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12412966/PIG-812.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12412966/PIG-812.pdf&lt;/a&gt;&lt;br/&gt;
  against trunk revision 792368.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/118/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/118/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12729472" author="hadoopqa" created="Fri, 10 Jul 2009 01:42:39 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12413067/PIG-812.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12413067/PIG-812.pdf&lt;/a&gt;&lt;br/&gt;
  against trunk revision 792663.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/119/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/119/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12729523" author="breed" created="Fri, 10 Jul 2009 06:18:09 +0100"  >&lt;p&gt;Reattaching the patch so that it gets applied rather than the PDF.&lt;/p&gt;</comment>
                            <comment id="12729550" author="hadoopqa" created="Fri, 10 Jul 2009 08:07:44 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12413078/PIG-812.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12413078/PIG-812.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 792663.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/121/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/121/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/121/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/121/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/121/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/121/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12734694" author="olgan" created="Thu, 23 Jul 2009 19:42:20 +0100"  >&lt;p&gt;Ben, thanks for updating the docs. A couple of comments/suggestions:&lt;/p&gt;

&lt;p&gt;(1) In Star expression section, I think it would be helpful to explain the difference between *  in Pig and SQL in more details.&lt;br/&gt;
(2) Boolean, tuple, field, and general expression sections seems a little brief and I am not sure they add much to the user&apos;s understanding of the language. Perhaps examples would be helpful?&lt;br/&gt;
(3) Description of map dereferencing has key while the Symbol column says &apos;key&apos;. I think that&apos;s confusing. &lt;br/&gt;
(4) The flatten description for a bag is not very clear and I also think has a typo: (&lt;/p&gt;
{(b,c),(d,e)}
&lt;p&gt;) - I think the parenthesis are wrong - I think you meant  to have a bag with a tuple that contains other tuples, right?&lt;br/&gt;
(5) Group vs. Cogroup - I think we should put all the information under COUGROUP because we always sold that as the general case and GROUP as &quot;alias&quot; for 1 relation case. &lt;/p&gt;
</comment>
                            <comment id="12744865" author="breed" created="Wed, 19 Aug 2009 04:52:53 +0100"  >&lt;p&gt;small changes suggested by Corinne.&lt;/p&gt;</comment>
                            <comment id="12744868" author="breed" created="Wed, 19 Aug 2009 05:04:28 +0100"  >&lt;p&gt;@olga&lt;br/&gt;
1) can you suggest some text, i&apos;m not a sql guru&lt;br/&gt;
2) this patch is focused on documenting * and flatten. i didn&apos;t really change the documentation for boolean, tuple, field, and general expression&lt;br/&gt;
3) you are saying that i should have &apos;key&apos; in the description correct?&lt;br/&gt;
4) i don&apos;t think that is a typo. it is a tuple with one field that is a bag of tuples, when you flatten the bag field the individual tuples will pop out. can you suggest how to make it more clear?&lt;br/&gt;
5) it&apos;s easy enough to switch around, but it seemed that group was the more general term (if such a term could be used since they are aliases of each other &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; where cogroup implies more than one. don&apos;t you think?&lt;/p&gt;</comment>
                            <comment id="12745158" author="gmavromatis" created="Wed, 19 Aug 2009 19:26:22 +0100"  >&lt;p&gt;First, I have to say that the updated documentation specifies adequately further undocumented but important details of pig syntax and behavior (e.g. dereference) in addition to the ones mentioned in this ticket. Very good job! This will improve usability of pig significantly. Thank you.&lt;/p&gt;

&lt;p&gt;Regarding the particular points in this ticket:&lt;/p&gt;

&lt;p&gt;1) Description is adequate for pig. Contrast with sql is nice to have, not crucial.&lt;br/&gt;
2) These parts were probably edited by Corinne. Examples may help, but again the spec is important to have and that was addressed.&lt;br/&gt;
3) &apos;key&apos; or key should be consistent in both &quot;symbol&quot; and &quot;notes&quot; sections.&lt;br/&gt;
4) I think the parenthesis pair is correct. This specification of flatten is quite clear!&lt;br/&gt;
5) No opinion.&lt;/p&gt;</comment>
                            <comment id="12745584" author="olgan" created="Thu, 20 Aug 2009 20:20:26 +0100"  >&lt;p&gt;+1. There seems to be a consensus that this patch is an improvement. Ben, please, commit. We can make incremental improvements later&lt;/p&gt;</comment>
                            <comment id="12746133" author="breed" created="Fri, 21 Aug 2009 19:35:19 +0100"  >&lt;p&gt;Committed revision 806668.&lt;/p&gt;</comment>
                            <comment id="12746706" author="hudson" created="Mon, 24 Aug 2009 01:41:33 +0100"  >&lt;p&gt;Integrated in Pig-trunk #530 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-trunk/530/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-trunk/530/&lt;/a&gt;)&lt;br/&gt;
    . COUNT&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; does not work&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12426055">PIG-813</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12426055">PIG-813</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12426642">PIG-822</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12416961" name="PIG-812.patch" size="21085" author="breed" created="Wed, 19 Aug 2009 04:52:53 +0100"/>
                            <attachment id="12413078" name="PIG-812.patch" size="21101" author="breed" created="Fri, 10 Jul 2009 06:18:09 +0100"/>
                            <attachment id="12413067" name="PIG-812.pdf" size="40958" author="breed" created="Fri, 10 Jul 2009 01:35:03 +0100"/>
                            <attachment id="12408544" name="studenttab10k" size="219190" author="viraj" created="Wed, 20 May 2009 02:46:21 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 May 2009 01:29:58 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaj6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95418</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>