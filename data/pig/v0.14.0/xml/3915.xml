<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:57:18 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3915/PIG-3915.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3915] MapReduce queries in Pigmix outputs different results than Pig&apos;s</title>
                <link>https://issues.apache.org/jira/browse/PIG-3915</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;The Pigmix benchmark has 17 queries comparing Pig to MapReduce Java. Some of these queries are not outputting the same results in Pig and MapReduce. Looking into the outputs, it seems the errors reside in the MapReduce  code. For example, L6 has no output because the output of the map function sends the wrong key to the reducer: &quot;query_term&quot; (field 3) instead of &quot;timespent&quot; (field 2). Hence an exception is thrown, and there is no output to the query in MapReduce. I am planning to submit a patch once I fixed all the queries in MapReduce &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Keren  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12711811">PIG-3915</key>
            <summary>MapReduce queries in Pigmix outputs different results than Pig&apos;s</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kereno">Keren Ouaknine</assignee>
                                    <reporter username="keren3000">Keren Ouaknine</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 May 2014 22:53:06 +0100</created>
                <updated>Thu, 30 Oct 2014 00:39:02 +0000</updated>
                            <resolved>Thu, 29 May 2014 06:13:59 +0100</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13997080" author="keren3000" created="Wed, 14 May 2014 01:15:31 +0100"  >&lt;p&gt;Bug fixes for Pigmix queries based on the mapred(old) API&lt;/p&gt;</comment>
                            <comment id="13997082" author="keren3000" created="Wed, 14 May 2014 01:17:10 +0100"  >&lt;p&gt;Thanks to Kerim Yasin Oktay for his help &amp;amp; code review!&lt;/p&gt;</comment>
                            <comment id="13998311" author="keren3000" created="Thu, 15 May 2014 01:23:35 +0100"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/21475/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/21475/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14007632" author="keren3000" created="Fri, 23 May 2014 21:02:49 +0100"  >&lt;p&gt;Patch for the Pigmix queries - already reviewed by Daniel Dai on:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/21475/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/21475/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14012073" author="daijy" created="Thu, 29 May 2014 06:13:59 +0100"  >&lt;p&gt;Run pigmix with the patch, all query runs and number looks reasonable. Patch committed to 0.13 branch and trunk. &lt;/p&gt;

&lt;p&gt;Also need to mention Pigmix datagenerator is broken by &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3967&quot; title=&quot;Grunt fail if we running more statement after first store&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3967&quot;&gt;&lt;del&gt;PIG-3967&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14188626" author="ssatish" created="Wed, 29 Oct 2014 17:30:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt; - When I use runpigmix.pl related to a map-reduce job on a hadoop-0.20.2 core, I get this error - &lt;/p&gt;

&lt;p&gt;hadoop jar /opt/mapr/pig/pig-0.13/pigperf.jar org.apache.pig.test.pigmix.mapreduce.L1 /pigmix /pigmixresults/mapreduce 40&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.VerifyError: (class: org/apache/pig/test/pigmix/mapreduce/L1, method: main signature: ([Ljava/lang/String;)V) Incompatible argument to function&lt;br/&gt;
	at java.lang.Class.forName0(Native Method)&lt;br/&gt;
	at java.lang.Class.forName(Class.java:270)&lt;br/&gt;
	at org.apache.hadoop.util.RunJar.main(RunJar.java:190)&lt;/p&gt;

&lt;p&gt;Was wondering since this change set is based on mapred(old) API (as per &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=keren3000&quot; class=&quot;user-hover&quot; rel=&quot;keren3000&quot;&gt;Keren Ouaknine&lt;/a&gt;&apos;s 1st comment) its causing some byte code incompatibilities?&lt;/p&gt;</comment>
                            <comment id="14188646" author="daijy" created="Wed, 29 Oct 2014 17:38:03 +0000"  >&lt;p&gt;It should not be. Both old/new API should be ok to run mapreduce.&lt;/p&gt;</comment>
                            <comment id="14188668" author="ssatish" created="Wed, 29 Oct 2014 17:49:24 +0000"  >&lt;p&gt;just to clarify, we are running pig-0.13 after compiling against hadoop-core.version=1.0.3 in ivy/libraries.properties&lt;br/&gt;
No problems so far running regular pig scripts (after a small change to HadoopShims). &lt;/p&gt;

&lt;p&gt;Just wanted to know the environment where you tested the org.apache.pig.test.pigmix.mapreduce.L*.java&lt;br/&gt;
Which version of hadoop-core did you compile &amp;amp; run against? &lt;/p&gt;</comment>
                            <comment id="14188692" author="daijy" created="Wed, 29 Oct 2014 18:00:34 +0000"  >&lt;p&gt;I&apos;ve tested 2.4.0 and 1.0.4. The error message complaining about L1.main, sounds like a Java issue not a hadoop issue. Which version of java are you using?&lt;/p&gt;</comment>
                            <comment id="14188694" author="keren3000" created="Wed, 29 Oct 2014 18:02:13 +0000"  >&lt;p&gt;Hi Suhas,&lt;/p&gt;

&lt;p&gt;I am running Pig version 13 on Hadoop version 1.2.1.&lt;br/&gt;
It&apos;s running without editing version properties.&lt;/p&gt;

&lt;p&gt;There&apos;s a patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4004&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-4004&lt;/a&gt; in case you wanted to upgrade your MR Pigmix queries to the new API.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Keren&lt;/p&gt;

</comment>
                            <comment id="14189388" author="ssatish" created="Thu, 30 Oct 2014 00:39:02 +0000"  >&lt;p&gt;Thanks for the reply guys. The issue turned out to be that the jar containing the pigmix classes was compiled against hadoop-2 and was being run against hadoop-1. After building 2 separate jars 1 against hadoop-1 and another against hadoop-2 and using the appropriate one solved the issue. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12646589" name="PIG-3915.2.patch" size="27099" author="keren3000" created="Fri, 23 May 2014 21:02:49 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 May 2014 05:13:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390132</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzp1xz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390369</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Bug fixes for the Pigmix queries</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>