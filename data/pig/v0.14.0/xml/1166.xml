<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:11:19 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1166/PIG-1166.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1166] A bit change of the interface of Tuple &amp; DataBag ( make the set and append method return this)</title>
                <link>https://issues.apache.org/jira/browse/PIG-1166</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;When people write unit test for UDF, they always need to build a tuple or bag. If we change the interface of Tuple and DataBag,  make the set and append method return this, it can decrease the code size.  e.g. Now people have to write the following code to build a Tuple:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Tuple tuple=TupleFactory.getInstance().newTuple(3);
tuple.set(0,&lt;span class=&quot;code-quote&quot;&gt;&quot;item_0&quot;&lt;/span&gt;);
tuple.set(1,&lt;span class=&quot;code-quote&quot;&gt;&quot;item_1&quot;&lt;/span&gt;);
tuple.set(2,&lt;span class=&quot;code-quote&quot;&gt;&quot;item_2&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If we change the interface,  make the set and append method return this, we can rewrite the above code like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Tuple tuple=TupleFactory.getInstance().newTuple(3);
tuple.set(0,&lt;span class=&quot;code-quote&quot;&gt;&quot;item_0&quot;&lt;/span&gt;).set(1,&lt;span class=&quot;code-quote&quot;&gt;&quot;item_1&quot;&lt;/span&gt;).set(2,&lt;span class=&quot;code-quote&quot;&gt;&quot;item_2&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This interface change won&apos;t have back compatibility problem and I think there&apos;s no performance problem too.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12443896">PIG-1166</key>
            <summary>A bit change of the interface of Tuple &amp; DataBag ( make the set and append method return this)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="zjffdu">Jeff Zhang</assignee>
                                    <reporter username="zjffdu">Jeff Zhang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Dec 2009 08:14:42 +0000</created>
                <updated>Mon, 3 Sep 2012 00:18:04 +0100</updated>
                            <resolved>Mon, 3 Sep 2012 00:18:04 +0100</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12793118" author="zjffdu" created="Mon, 21 Dec 2009 08:28:51 +0000"  >&lt;p&gt;A better example of illustrating my idea is to build a DataBag.&lt;/p&gt;

&lt;p&gt;The current method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
BagFactory BAGFACTORY = BagFactory.getInstance();
TupleFactory TUPLEFACTORY = TupleFactory.getInstance();
DataBag bag = BAGFACTORY.newDefaultBag();
Tuple tuple_1 = TUPLEFACTORY.newTuple(1);
tuple_1.set(0, &lt;span class=&quot;code-quote&quot;&gt;&quot;item_1&quot;&lt;/span&gt;);
bag.add(tuple_1);
Tuple tuple_2 = TUPLEFACTORY.newTuple(1);
tuple_2.set(0, &lt;span class=&quot;code-quote&quot;&gt;&quot;item_2&quot;&lt;/span&gt;);
bag.add(tuple_2);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and if we change the interface, we can write the code as following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
BagFactory BAGFACTORY = BagFactory.getInstance();
TupleFactory TUPLEFACTORY = TupleFactory.getInstance();
DataBag bag = BAGFACTORY.newDefaultBag();
bag.add(TUPLEFACTORY.newTuple(1).set(0,&lt;span class=&quot;code-quote&quot;&gt;&quot;item_1&quot;&lt;/span&gt;)).add(TUPLEFACTORY.newTuple(1).set(0,&lt;span class=&quot;code-quote&quot;&gt;&quot;item_2&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The second piece of code snippet is more readable and concise in my opinion.&lt;/p&gt;</comment>
                            <comment id="12793350" author="dvryaboy" created="Mon, 21 Dec 2009 20:42:34 +0000"  >&lt;p&gt;+1 to the idea, and we don&apos;t have to stop at Tuple and Bag factories. There are plenty of other places that this can be useful in (like all of the Logical and Physical operators).&lt;/p&gt;</comment>
                            <comment id="12794204" author="hadoopqa" created="Wed, 23 Dec 2009 20:08:21 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12428831/Pig_1166.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12428831/Pig_1166.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 893373.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 420 release audit warnings (more than the trunk&apos;s current 413 warnings).&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/155/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/155/testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/155/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/155/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/155/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/155/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/155/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h8.grid.sp2.yahoo.net/155/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12794301" author="zjffdu" created="Thu, 24 Dec 2009 02:55:27 +0000"  >&lt;p&gt;I meet this release audit problem several times, could anyone tell me what things does release audit include, so I would be more careful the next time.&lt;/p&gt;</comment>
                            <comment id="12794461" author="olgan" created="Thu, 24 Dec 2009 17:15:11 +0000"  >&lt;p&gt;The warnings in html files are ok.&lt;/p&gt;

&lt;p&gt;Also, since this is an incompatible change we need to discuss this on the user list. This can cause issues for people who have their own implementation of tuples and we need to find out if those people exist first.&lt;/p&gt;</comment>
                            <comment id="12796676" author="zjffdu" created="Tue, 5 Jan 2010 14:41:22 +0000"  >&lt;p&gt;Olga&#65292;so should I initiate a voting on the user mail list ?&lt;/p&gt;</comment>
                            <comment id="12796762" author="olgan" created="Tue, 5 Jan 2010 16:54:21 +0000"  >&lt;p&gt;Jeff,&lt;/p&gt;

&lt;p&gt;This would not be really a vote - just ask users if they have written there own Tuple implementaion and if this change would have major impact on them. My guess is that the answer would be no but we should check with users/developers first&lt;/p&gt;</comment>
                            <comment id="12802051" author="zjffdu" created="Tue, 19 Jan 2010 02:39:09 +0000"  >&lt;p&gt;I have commit this patch, this is my fist time of committing patch, hope I didn&apos;t make any mistake.&lt;/p&gt;
</comment>
                            <comment id="12803366" author="alangates" created="Thu, 21 Jan 2010 17:15:31 +0000"  >&lt;p&gt;In testing this we found that forces a recompile of all UDFs.  We initially thought that it would not, but it does.  Since that&apos;s a backward incompatibility I&apos;m going to revert the change for now, while we discuss when we want to check this in.  I&apos;m not saying we won&apos;t check it in, but we want to decide on when to inflict this pain on the users.&lt;/p&gt;</comment>
                            <comment id="12803378" author="dvryaboy" created="Thu, 21 Jan 2010 17:29:47 +0000"  >&lt;p&gt;Aren&apos;t we looking at inflicting major pain with 0.7 anyway?&lt;/p&gt;</comment>
                            <comment id="12803435" author="alangates" created="Thu, 21 Jan 2010 19:16:34 +0000"  >&lt;p&gt;Alright, I&apos;ve reverted the patch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Aren&apos;t we looking at inflicting major pain with 0.7 anyway? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, but so far only on load and store function writers.  I don&apos;t believe we&apos;ve done anything to force eval func writers (which vastly outnumber load and store func writers) to recompile their code.  This is tied to &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1017&quot; title=&quot;Converts strings to text in Pig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1017&quot;&gt;&lt;del&gt;PIG-1017&lt;/del&gt;&lt;/a&gt;, which I&apos;d love to check in since it will improve memory management but will also inflict pain (and more than just a recompile) on eval func writers.  We need to decide whether to inflict pain on both groups in 0.7 or just on load and store writers in 0.7 and on eval func writers at some later point.  I also think we need criteria for deciding when we do and don&apos;t break backwards compatibility.  I&apos;ll start a thread on this on the pig-dev list.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12428831" name="Pig_1166.patch" size="14804" author="zjffdu" created="Wed, 23 Dec 2009 15:53:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 21 Dec 2009 20:42:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164683</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyanbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96088</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>