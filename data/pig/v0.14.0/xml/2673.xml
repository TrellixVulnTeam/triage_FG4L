<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:10:41 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2673/PIG-2673.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2673] Allow Merge join to follow an ORDER statement</title>
                <link>https://issues.apache.org/jira/browse/PIG-2673</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Currently, we insist that data for a merge join must come from an OrderedLoadFunc.&lt;br/&gt;
We can relax this condition and allow explicit ordering operations to precede a MergeJoin.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12553220">PIG-2673</key>
            <summary>Allow Merge join to follow an ORDER statement</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dvryaboy">Dmitriy V. Ryaboy</assignee>
                                    <reporter username="dvryaboy">Dmitriy V. Ryaboy</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Apr 2012 00:16:46 +0100</created>
                <updated>Fri, 22 Feb 2013 04:53:39 +0000</updated>
                            <resolved>Tue, 26 Jun 2012 18:30:58 +0100</resolved>
                                                    <fixVersion>0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                <comments>
                            <comment id="13264088" author="dvryaboy" created="Sat, 28 Apr 2012 00:19:39 +0100"  >&lt;p&gt;Attaching patch that relaxes the sanity checks and updates the documentation.&lt;/p&gt;

&lt;p&gt;Note that while working on this patch I discovered we never enforced a stated condition for the merge join, which is that you cannot call UDFs on the data between a load and a merge join. This is also fixed in this patch. This fix may break people&apos;s script in cases when they were using UDFs and unwittingly violating the documented constraint.&lt;/p&gt;</comment>
                            <comment id="13264101" author="ashutoshc" created="Sat, 28 Apr 2012 00:25:18 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-959&quot; title=&quot;Merge Join fails when there is a blocking operator before it in query.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-959&quot;&gt;&lt;del&gt;PIG-959&lt;/del&gt;&lt;/a&gt; relaxes the condition for all non-blocking operators too. May be these too should be done in conjunction.&lt;/p&gt;</comment>
                            <comment id="13264102" author="ashutoshc" created="Sat, 28 Apr 2012 00:26:02 +0100"  >&lt;p&gt;Aah.. blocking.. not non-blocking.&lt;/p&gt;</comment>
                            <comment id="13264117" author="dvryaboy" created="Sat, 28 Apr 2012 00:41:10 +0100"  >&lt;p&gt;I don&apos;t think you can relax the conditions around distinct, since that involves hashing the input across reducers?&lt;/p&gt;</comment>
                            <comment id="13265410" author="dvryaboy" created="Mon, 30 Apr 2012 22:48:17 +0100"  >&lt;p&gt;Ashutosh, can you review this? Think you are the person most familiar with the Merge join code.&lt;/p&gt;</comment>
                            <comment id="13265434" author="ashutoshc" created="Mon, 30 Apr 2012 23:06:58 +0100"  >&lt;p&gt;Yeah, will take a look at it.&lt;/p&gt;</comment>
                            <comment id="13270713" author="ashutoshc" created="Tue, 8 May 2012 19:54:11 +0100"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think you can relax the conditions around distinct, since that involves hashing the input across reducers?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, thats right. For other blocking operators:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Order-by: obv we can relax it.&lt;/li&gt;
	&lt;li&gt;Join/Cogroup: We can relax for map-side joins &amp;amp; cogroups i.e., FR,Merge Join and cogroup, but not the ones having reducers.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="13270719" author="ashutoshc" created="Tue, 8 May 2012 19:58:00 +0100"  >&lt;p&gt;I took a quick look at your patch. For chaining together of MR jobs (i.e., order-by MR job feeding into merge-join MR job), you will need changes in MRCompiler which are outlined in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-959&quot; title=&quot;Merge Join fails when there is a blocking operator before it in query.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-959&quot;&gt;&lt;del&gt;PIG-959&lt;/del&gt;&lt;/a&gt; patch. I don&apos;t see any of that in your patch. There must be something which I am missing here.&lt;/p&gt;</comment>
                            <comment id="13270723" author="dvryaboy" created="Tue, 8 May 2012 20:01:13 +0100"  >&lt;p&gt;Patch is incomplete right now.. only fixes the LP blocks, but it does need the MRCompiler changes. Will need some more work. Hackday! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13285255" author="dvryaboy" created="Wed, 30 May 2012 00:26:55 +0100"  >&lt;p&gt;This seems to work (verified manually in addition to running tests). Ready for review again &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13285256" author="ashutoshc" created="Wed, 30 May 2012 00:30:15 +0100"  >&lt;p&gt;Seems like you ran git pull after a long while.&lt;/p&gt;</comment>
                            <comment id="13285259" author="dvryaboy" created="Wed, 30 May 2012 00:31:27 +0100"  >&lt;p&gt;Now, without git prefixes.&lt;/p&gt;</comment>
                            <comment id="13285260" author="dvryaboy" created="Wed, 30 May 2012 00:36:32 +0100"  >&lt;p&gt;sigh.&lt;/p&gt;</comment>
                            <comment id="13396106" author="julienledem" created="Mon, 18 Jun 2012 19:24:14 +0100"  >&lt;p&gt;for some reason the review board did not post my review back to the JIRA.&lt;br/&gt;
FYI: &lt;a href=&quot;https://reviews.apache.org/r/5280/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://reviews.apache.org/r/5280/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13400226" author="dvryaboy" created="Mon, 25 Jun 2012 00:28:42 +0100"  >&lt;p&gt;Addressed review comments. TestMergeJoin passes (and takes 30 minutes...)&lt;/p&gt;</comment>
                            <comment id="13401099" author="jcoveney" created="Tue, 26 Jun 2012 02:47:20 +0100"  >&lt;p&gt;LGTM. I&apos;m +1. Julien, you satisfied with the responses?&lt;/p&gt;</comment>
                            <comment id="13401514" author="julienledem" created="Tue, 26 Jun 2012 17:59:59 +0100"  >&lt;p&gt;LGTM. &lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="13401547" author="dvryaboy" created="Tue, 26 Jun 2012 18:30:58 +0100"  >&lt;p&gt;Committed to 0.11 (trunk)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12549430">PIG-2632</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12435667">PIG-959</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12533231" name="PIG-2673.2.patch" size="21366" author="dvryaboy" created="Mon, 25 Jun 2012 00:28:42 +0100"/>
                            <attachment id="12524947" name="PIG-2673_0.patch" size="11314" author="dvryaboy" created="Sat, 28 Apr 2012 00:19:39 +0100"/>
                            <attachment id="12530112" name="PIG-2673_1.patch" size="279227" author="dvryaboy" created="Wed, 30 May 2012 00:26:55 +0100"/>
                            <attachment id="12530114" name="PIG-2673_1_noprefix.patch" size="278523" author="dvryaboy" created="Wed, 30 May 2012 00:31:27 +0100"/>
                            <attachment id="12530115" name="PIG-2673_1_noprefix_now_with_merge.patch" size="17850" author="dvryaboy" created="Wed, 30 May 2012 00:36:32 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 Apr 2012 23:25:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>237297</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxwog7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14448</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>