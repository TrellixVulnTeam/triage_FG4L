<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:06:28 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1248/PIG-1248.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1248] [piggybank] useful String functions</title>
                <link>https://issues.apache.org/jira/browse/PIG-1248</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig ships with very few evalFuncs for working with strings. This jira is for adding a few more.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12456973">PIG-1248</key>
            <summary>[piggybank] useful String functions</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dvryaboy">Dmitriy V. Ryaboy</assignee>
                                    <reporter username="dvryaboy">Dmitriy V. Ryaboy</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Feb 2010 06:24:26 +0000</created>
                <updated>Fri, 14 May 2010 07:46:59 +0100</updated>
                            <resolved>Tue, 9 Mar 2010 06:30:37 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="12836526" author="dvryaboy" created="Mon, 22 Feb 2010 06:42:08 +0000"  >&lt;p&gt;This patch cleans up some of the existing string functions and adds new ones.&lt;br/&gt;
The existing functions are modified to favor returning null instead of throwing exceptions (and thus breaking the whole job).&lt;br/&gt;
SUBSTRING is modified to not fail when the input string is shorter than offset+desired width, as per discussion on the user list.&lt;/p&gt;

&lt;p&gt;New functions are added:&lt;/p&gt;

&lt;p&gt;LcFirst&lt;br/&gt;
UcFirst&lt;br/&gt;
LENGTH&lt;br/&gt;
Reverse&lt;br/&gt;
Split&lt;br/&gt;
RegexExtractAll&lt;/p&gt;
</comment>
                            <comment id="12836584" author="hadoopqa" created="Mon, 22 Feb 2010 11:33:44 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12436549/PIG_1248.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12436549/PIG_1248.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision 912064.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 15 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 526 release audit warnings (more than the trunk&apos;s current 517 warnings).&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/210/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/210/testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/210/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/210/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/210/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/210/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/210/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/210/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12836709" author="dvryaboy" created="Mon, 22 Feb 2010 16:45:15 +0000"  >&lt;p&gt;This patch is identical to the previous, except for a one-line comment change to make javadoc happier.&lt;/p&gt;

&lt;p&gt;The test failures appear to be unrelated. Please review.&lt;/p&gt;</comment>
                            <comment id="12836838" author="alangates" created="Mon, 22 Feb 2010 19:17:37 +0000"  >&lt;p&gt;Some of these methods use all caps, some camel case.  Is there some reasoning here?  We should pick one convention.  The convention in Pig seems to be all caps (COUNT, etc.), so we should use that.&lt;/p&gt;

&lt;p&gt;I would like to see SUBSTRING match SQL semantics, where the 3rd argument is the length of the substring instead of the terminal index.  Since this is a change in interface I&apos;m open to delaying that until we pull SUBSTRING in as a Pig builtin.&lt;/p&gt;

&lt;p&gt;The javadocs for the Split class appear to have been copied from SUBSTRING.&lt;/p&gt;

&lt;p&gt;Should Split return a tuple of chararrays or a bag of tuples, each containing one chararray?  The advantage I can see for the latter is it&apos;s possible to a priori determine the full schema of splits output, while in the former you cannot.  (You can say that this returns a tuple, but you don&apos;t know what&apos;s in the tuple.  So when that tuple is flattened, the schema will become unknown.)  Since lack of schema is contagious, this could cause problems for Pig features (such as optimization, metadata, certain storage mechanisms like Zebra) that do much better with schemas.  The same question applies to RegexExtractAll.&lt;/p&gt;





</comment>
                            <comment id="12837064" author="dvryaboy" created="Tue, 23 Feb 2010 03:44:25 +0000"  >&lt;p&gt;I&apos;ll fix up the javadocs.&lt;br/&gt;
I didn&apos;t modify substring behavior except to make it be nice to short strings, which I think is what people tend to expect.&lt;br/&gt;
The contract should probably stay the same for backwards compatibility? We can change on migration, but that&apos;d be confusing. &lt;/p&gt;

&lt;p&gt;I am returning tuples instead of bags because they are ordered, and bags are not. You are right about the flattening issue.. I guess a user could call the hypothetial tupleToBag udf if that was the use case, though.  &lt;/p&gt;

&lt;p&gt;-D&lt;/p&gt;</comment>
                            <comment id="12837307" author="dvryaboy" created="Tue, 23 Feb 2010 16:50:46 +0000"  >&lt;p&gt;Changes to Split javadoc.&lt;/p&gt;

&lt;p&gt;Regarding capitalization &amp;#8211; the only new udf that uses all-caps is LENGTH. I think they should all be camel-cased; it&apos;s easier on the eyes. Since the old functions are already all-caps, and Java does not support multiple classes with the same name but different capitalization, we can&apos;t change from all-caps to camel-case without losing backwards compatibility. I chose to make LENGTH all-caps because it intuitively seems like a &quot;basic functionality&quot; function, as opposed to something like UcFirst.  I agree that it&apos;s somewhat arbitrary.&lt;/p&gt;</comment>
                            <comment id="12839891" author="alangates" created="Mon, 1 Mar 2010 22:26:38 +0000"  >&lt;p&gt;I agree camel case is easier on the eyes (and on the fingers).  But we seem to have chosen all caps for built in functions.  Some of these we&apos;ll eventually want to move into builtins for Pig.  I really don&apos;t want to bring in builtins that aren&apos;t all caps.  For functions we think we might want to bring into builtin someday it seems like it would be better to start them out in all caps now rather than changing them later.&lt;/p&gt;

&lt;p&gt;One other thought on the tuples via bags.  If you have a script like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = load &apos;bla&apos; using TextLoader();
B = foreach A generate flatten(Split($0));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Assume a file that contains : &quot;Mary had a little lamb&quot;.  If Split returns tuples then B will return 1 record, &quot;Mary had a little lamb&quot;.  If Split returns a bag, then B will generate 5 records (&quot;Mary&quot;, &quot;had&quot;, &quot;a&quot;, &quot;little&quot;, &quot;lamb&quot;).  I don&apos;t have any guess of which of those users will want more.&lt;/p&gt;</comment>
                            <comment id="12840130" author="gerritjvv" created="Tue, 2 Mar 2010 11:45:24 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I think returning bag on split makes more sense given that,&lt;br/&gt;
normally when you split a string you expect to have some type &lt;br/&gt;
that allows you to iterate through the split values one at a time.  &lt;/p&gt;


</comment>
                            <comment id="12840279" author="billgraham" created="Tue, 2 Mar 2010 18:54:41 +0000"  >&lt;p&gt;How exactly would split differ from the TOKENIZE function if split returned a bag? TOKENIZE returns an unordered bag of words. Having a function that returns an ordered tuple of words is very useful IMO. I had to write my own version of a tokenize UDF to do this. &lt;/p&gt;</comment>
                            <comment id="12841779" author="gerritjvv" created="Fri, 5 Mar 2010 09:37:07 +0000"  >&lt;p&gt;Yep, I didn&apos;t think of Tokenize.&lt;/p&gt;

&lt;p&gt;As I see it there is need for 2 functionalities here, something that splits a string and returns a bag, and another that returns a tuple. If Tokenize does solve the earlier then Split should be made to solve the later. &lt;/p&gt;

&lt;p&gt;Just as a thought and seeing that Tokenize returns an un ordered bag:&lt;/p&gt;

&lt;p&gt;Shouldn&apos;t we have 2 implementations on Split, &lt;br/&gt;
1: Returns ordered bag of items&lt;br/&gt;
2: Returns ordered tuple of items&lt;br/&gt;
Something like: SplitToBag, SplitToTuple ?&lt;/p&gt;

</comment>
                            <comment id="12841789" author="dvryaboy" created="Fri, 5 Mar 2010 09:51:53 +0000"  >&lt;p&gt;Gerrit, as far as Pig the language is concerned, all bags are unordered.&lt;/p&gt;

&lt;p&gt;Alan, re capitalization &amp;#8211; I see your point, and agree (even made LENGTH all-caps originally).&lt;br/&gt;
Can we put off renaming these until we copy them into builtins? Users will change the paths to take advantage of them anyway (from piggybank to builtin), so changing the capitalization shouldn&apos;t be a big deal.&lt;br/&gt;
I think it should be a copy, not a move, by the way, so as not to break existing scripts. Perhaps we can deprecate the piggybank classes when we copy them to builtin.&lt;/p&gt;</comment>
                            <comment id="12841804" author="gerritjvv" created="Fri, 5 Mar 2010 10:32:46 +0000"  >&lt;p&gt;Ah, my misunderstanding then.&lt;/p&gt;

&lt;p&gt;So Tokenize would give the to bag functionality.  and then it makes sense for Split to give the ordered Tuple return functionality.&lt;/p&gt;</comment>
                            <comment id="12841930" author="alangates" created="Fri, 5 Mar 2010 16:55:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can we put off renaming these until we copy them into builtins? Users will change the paths to take advantage of them anyway (from piggybank to builtin), so changing the capitalization shouldn&apos;t be a big deal.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think that&apos;s fine.  It may even help reduce confusion for users, given the next point.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think it should be a copy, not a move, by the way, so as not to break existing scripts. Perhaps we can deprecate the piggybank classes when we copy them to builtin.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1, we want to make life as easy as possible for users.&lt;/p&gt;

&lt;p&gt;So at this point, I&apos;m +1 on committing this patch.&lt;/p&gt;</comment>
                            <comment id="12842933" author="dvryaboy" created="Tue, 9 Mar 2010 06:30:15 +0000"  >&lt;p&gt;Patch committed given Alan&apos;s +1.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12436721" name="PIG_1248.diff" size="39654" author="dvryaboy" created="Tue, 23 Feb 2010 16:50:46 +0000"/>
                            <attachment id="12436591" name="PIG_1248.diff" size="39315" author="dvryaboy" created="Mon, 22 Feb 2010 16:45:15 +0000"/>
                            <attachment id="12436549" name="PIG_1248.diff" size="39315" author="dvryaboy" created="Mon, 22 Feb 2010 06:42:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 22 Feb 2010 11:33:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>41718</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyao93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>