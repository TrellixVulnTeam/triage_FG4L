<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:53:31 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1238/PIG-1238.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1238] Dump does not respect the schema</title>
                <link>https://issues.apache.org/jira/browse/PIG-1238</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;For complex data type and certain sequence of operations dump produces results with non-existent field in the relation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12456415">PIG-1238</key>
            <summary>Dump does not respect the schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rding">Richard Ding</assignee>
                                    <reporter username="ankur">Ankur</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Feb 2010 10:36:48 +0000</created>
                <updated>Fri, 14 May 2010 07:46:57 +0100</updated>
                            <resolved>Mon, 22 Mar 2010 18:14:40 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12834151" author="ankur" created="Tue, 16 Feb 2010 10:45:23 +0000"  >&lt;p&gt;Here is a script to reproduce the issue:-&lt;/p&gt;

&lt;p&gt;A = LOAD &apos;two.txt&apos; USING PigStorage();&lt;br/&gt;
B = FOREACH A GENERATE &lt;a href=&quot;#&amp;#39;12&amp;#39;&quot;&gt;&apos;a&apos;#&apos;12&apos;&lt;/a&gt; as b:map[], [&apos;b&apos;#&lt;a href=&quot;#&amp;#39;12&amp;#39;&quot;&gt;&apos;c&apos;#&apos;12&apos;&lt;/a&gt;] as mapFields;&lt;br/&gt;
C = FOREACH B GENERATE(CHARARRAY) mapFields#&apos;b&apos;#&apos;c&apos; AS f1, RANDOM() AS f2;&lt;br/&gt;
D = ORDER C BY f2 PARALLEL 10;&lt;br/&gt;
E = LIMIT D 20;&lt;br/&gt;
F = FOREACH E GENERATE f1;&lt;br/&gt;
describe F;&lt;br/&gt;
dump F;&lt;/p&gt;

&lt;p&gt;With the above script here is a snippet of the logs that might be useful&lt;br/&gt;
...&lt;br/&gt;
...&lt;br/&gt;
2010-02-16 10:42:44,814 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 90% complete&lt;br/&gt;
2010-02-16 10:42:55,966 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - 100% complete&lt;br/&gt;
2010-02-16 10:42:55,981 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Successfully stored result in: &quot;hdfs://foo/tmp/temp-1870551954/tmp-470213889&quot;&lt;br/&gt;
2010-02-16 10:42:55,991 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; WARN  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Encountered Warning ACCESSING_NON_EXISTENT_FIELD 1 time(s).&lt;br/&gt;
2010-02-16 10:42:55,991 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Records written : 1&lt;br/&gt;
2010-02-16 10:42:55,991 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Bytes written : 14&lt;br/&gt;
2010-02-16 10:42:55,991 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Success!&lt;br/&gt;
(12,)&lt;/p&gt;

&lt;p&gt;Note:- If we remove &quot;PARALLEL 10&quot; from Order by correct results are produced and NO warning is thrown.&lt;/p&gt;</comment>
                            <comment id="12834422" author="daijy" created="Tue, 16 Feb 2010 20:02:14 +0000"  >&lt;p&gt;Hi, Ankur, I encounter syntax error in &quot;B = FOREACH A GENERATE &apos;a&apos;#&apos;12&apos; as b:map[], &lt;a href=&quot;#&amp;#39;c&amp;#39;#&amp;#39;12&amp;#39;&quot;&gt;&apos;b&apos;#&apos;c&apos;#&apos;12&apos;&lt;/a&gt; as mapFields;&quot;. Can you verity the script?&lt;/p&gt;</comment>
                            <comment id="12834642" author="ankur" created="Wed, 17 Feb 2010 04:50:00 +0000"  >&lt;p&gt;Daniel the correct syntax is - [&apos;b&apos;#&lt;a href=&quot;#&amp;#39;12&amp;#39;&quot;&gt;&apos;c&apos;#&apos;12&apos;&lt;/a&gt;] as mapFields.&lt;/p&gt;</comment>
                            <comment id="12834643" author="ankur" created="Wed, 17 Feb 2010 04:51:59 +0000"  >&lt;p&gt;Seems like inner [] are making parts of it appear underlined. Correct syntax is&lt;br/&gt;
[&apos;b&apos;# &lt;a href=&quot;#&amp;#39;12&amp;#39;&quot;&gt;&apos;c&apos;#&apos;12&apos;&lt;/a&gt; ] as mapFields&lt;/p&gt;</comment>
                            <comment id="12834644" author="ankur" created="Wed, 17 Feb 2010 04:54:14 +0000"  >&lt;p&gt;Sigh....&lt;br/&gt;
Enclose &apos;c&apos;#&apos;12&apos; in a square bracket and then enclose &apos;b&apos;# ... in another square bracket&lt;/p&gt;</comment>
                            <comment id="12835086" author="daijy" created="Thu, 18 Feb 2010 01:34:30 +0000"  >&lt;p&gt;Do an explain, the last limit job is :&lt;/p&gt;

&lt;p&gt;MapReduce node 1-99&lt;br/&gt;
Map Plan&lt;br/&gt;
Local Rearrange&lt;span class=&quot;error&quot;&gt;&amp;#91;tuple&amp;#93;&lt;/span&gt;&lt;/p&gt;
{double}(false) - 1-103&lt;br/&gt;
|   |&lt;br/&gt;
|   Project&lt;span class=&quot;error&quot;&gt;&amp;#91;double&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; - 1-102&lt;br/&gt;
|&lt;br/&gt;
|---Limit - 1-101&lt;br/&gt;
    |&lt;br/&gt;
    |--&lt;del&gt;Load(&lt;a href=&quot;file:/tmp/temp-513510662/tmp1311900615:org.apache.pig.builtin.BinStorage&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/tmp/temp-513510662/tmp1311900615:org.apache.pig.builtin.BinStorage&lt;/a&gt;) - 1-100&lt;/del&gt;-------&lt;br/&gt;
Reduce Plan&lt;br/&gt;
Store(fakefile:org.apache.pig.builtin.PigStorage) - 1-109&lt;br/&gt;
|&lt;br/&gt;
|---Limit - 1-108&lt;br/&gt;
    |&lt;br/&gt;
    |---New For Each(true)&lt;span class=&quot;error&quot;&gt;&amp;#91;bag&amp;#93;&lt;/span&gt; - 1-107&lt;br/&gt;
        |   |&lt;br/&gt;
        |   Project&lt;span class=&quot;error&quot;&gt;&amp;#91;tuple&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; - 1-106&lt;br/&gt;
        |&lt;br/&gt;
        |---Package&lt;span class=&quot;error&quot;&gt;&amp;#91;tuple&amp;#93;&lt;/span&gt;{double}
&lt;p&gt; - 1-105--------&lt;br/&gt;
Global sort: false&lt;/p&gt;

&lt;p&gt;The project in the map plan is wrong.&lt;/p&gt;</comment>
                            <comment id="12842871" author="rding" created="Tue, 9 Mar 2010 01:46:48 +0000"  >&lt;p&gt;Pig inserts a new Limit (or Top-K) job with one reducer after a Limit (or Top-K) job with multiple reducers to ensure the output has the right number of records. &lt;/p&gt;

&lt;p&gt;In the case of Top-K, the new job must also preserve the ordering of the original job. Therefore the sorting key must be passed to the new job. This patch moves the last ForEach statement in above script from the original job to the new job so that the sorting keys are not removed by the first job. &lt;/p&gt;</comment>
                            <comment id="12843332" author="daijy" created="Tue, 9 Mar 2010 22:25:57 +0000"  >&lt;p&gt;+1. Please commit once hudson comes back.&lt;/p&gt;</comment>
                            <comment id="12843401" author="hadoopqa" created="Wed, 10 Mar 2010 02:15:04 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12438246/PIG-1238.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12438246/PIG-1238.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 920956.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/230/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/230/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/230/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/230/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/230/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/230/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12847349" author="ankur" created="Fri, 19 Mar 2010 12:53:03 +0000"  >&lt;p&gt;This does not work for me when i take a fresh checkout from the trunk. I still get the same error&lt;/p&gt;</comment>
                            <comment id="12847474" author="rding" created="Fri, 19 Mar 2010 17:57:15 +0000"  >&lt;p&gt;Hi Ankur,&lt;/p&gt;

&lt;p&gt;I run following script&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = LOAD &apos;1.txt&apos; USING PigStorage();
B = FOREACH A GENERATE [&apos;a&apos;#&apos;12&apos;] as b:map[], [&apos;b&apos;#[&apos;c&apos;#&apos;12&apos;]] as mapFields;
C = FOREACH B GENERATE(CHARARRAY) mapFields#&apos;b&apos;#&apos;c&apos; AS f1, RANDOM() AS f2;
D = ORDER C BY f2 PARALLEL 10;
E = LIMIT D 20;
F = FOREACH E GENERATE f1;
dump F;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and it gets the correct result. Can you sync again with the trunk and let me know if the problem still exists?&lt;/p&gt;</comment>
                            <comment id="12848259" author="olgan" created="Mon, 22 Mar 2010 18:14:40 +0000"  >&lt;p&gt;Closing since we have not seen a reproducible case. Please, reopen when/if you have one&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12458308">PIG-1278</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12438246" name="PIG-1238.patch" size="12300" author="rding" created="Tue, 9 Mar 2010 01:46:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 16 Feb 2010 20:02:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164751</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyao5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96224</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>