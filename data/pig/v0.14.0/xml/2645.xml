<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:05:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2645/PIG-2645.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2645] PigSplit does not handle the case where SerializationFactory returns null</title>
                <link>https://issues.apache.org/jira/browse/PIG-2645</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;In PigSplit.java, line 254:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SerializationFactory sf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SerializationFactory(conf);
Serializer s = sf.getSerializer(wrappedSplits[0].getClass());
s.open((OutputStream) os);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;sf.getSerializer returns null when it cannot find a serializer for a given object. Instead of handling this properly, a NPE is thrown when s.open() is called.&lt;/p&gt;

&lt;p&gt;This is easy to encounter when creating a custom InputSplit from the mapreduce package which is an abstract class that DOES NOT implement Writable.&lt;br/&gt;
However it&apos;s easy to miss because InputSplit from the mapred package is an interface that extends Writable, and InputSplits often both extend and implement both the new and old InputSplit abstract class and interface (thereby becoming Writable).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12550577">PIG-2645</key>
            <summary>PigSplit does not handle the case where SerializationFactory returns null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shamib007">Shami B</assignee>
                                    <reporter username="alexlevenson">Alex Levenson</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 11 Apr 2012 21:18:22 +0100</created>
                <updated>Fri, 22 Feb 2013 04:53:46 +0000</updated>
                            <resolved>Fri, 25 Jan 2013 19:08:58 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.11</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13454011" author="shamib007" created="Wed, 12 Sep 2012 15:01:12 +0100"  >&lt;p&gt;We can add a NULL check before the line &lt;br/&gt;
s.open((OutputStream) os);&lt;/p&gt;</comment>
                            <comment id="13454022" author="shamib007" created="Wed, 12 Sep 2012 15:16:17 +0100"  >&lt;p&gt;The code change required at line 254 is :&lt;/p&gt;

&lt;p&gt;if (s != null) &lt;/p&gt;
{
	s.open((OutputStream) os);
}</comment>
                            <comment id="13454183" author="alexlevenson" created="Wed, 12 Sep 2012 19:04:07 +0100"  >&lt;p&gt;The change should be something more like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (s == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
  &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;InputSplits must implement Writable.&quot;&lt;/span&gt;);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Preconditions.checkNotNull(s, &lt;span class=&quot;code-quote&quot;&gt;&quot;InputSplits must implement Writable.&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13456967" author="shamib007" created="Mon, 17 Sep 2012 13:37:48 +0100"  >&lt;p&gt;Thanks Alex. The fix can be implemented as :&lt;/p&gt;

&lt;p&gt;if (s == null) &lt;/p&gt;
{
  throw new IllegalArgumentException(&quot;InputSplits must implement Writable.&quot;);
}
&lt;p&gt; else &lt;/p&gt;
{
  s.open((OutputStream) os);
}</comment>
                            <comment id="13508680" author="shamib007" created="Mon, 3 Dec 2012 12:13:25 +0000"  >&lt;p&gt;Please find the attached file containing the fix for the issue.&lt;/p&gt;</comment>
                            <comment id="13508684" author="shamib007" created="Mon, 3 Dec 2012 12:18:20 +0000"  >&lt;p&gt;Added a NULL check for Serializer before calling open() method on it.&lt;/p&gt;</comment>
                            <comment id="13509101" author="alexlevenson" created="Mon, 3 Dec 2012 22:03:54 +0000"  >&lt;p&gt;Style nitpicks:&lt;br/&gt;
Don&apos;t use a javadoc, use a regular comment&lt;br/&gt;
Comment probably not even needed&lt;br/&gt;
No need for the else clause&lt;/p&gt;

&lt;p&gt;How about:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (s == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
  &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not find serializer &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; class &quot;&lt;/span&gt; 
            + wrappedSplits[0].getClass() 
            + &lt;span class=&quot;code-quote&quot;&gt;&quot;. InputSplits should implement Writable.&quot;&lt;/span&gt;);
}
s.open((OutputStream) os);
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; wrappedSplits.length; i++)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13526384" author="shamib007" created="Fri, 7 Dec 2012 13:33:50 +0000"  >&lt;p&gt;Please find the attached patch after incorporating the review comments.&lt;/p&gt;</comment>
                            <comment id="13526386" author="shamib007" created="Fri, 7 Dec 2012 13:34:34 +0000"  >&lt;p&gt;Please find the patch with the review comments incorporated&lt;/p&gt;</comment>
                            <comment id="13561025" author="alangates" created="Wed, 23 Jan 2013 19:54:40 +0000"  >&lt;p&gt;Reviewing this patch&lt;/p&gt;</comment>
                            <comment id="13562916" author="alangates" created="Fri, 25 Jan 2013 19:08:58 +0000"  >&lt;p&gt;Fix checked into trunk and branch.  Thanks Shami.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12555747" name="PIG-2645.patch" size="1042" author="shamib007" created="Mon, 3 Dec 2012 12:13:25 +0000"/>
                            <attachment id="12559855" name="patch_2645.patch" size="925" author="shamib007" created="Fri, 7 Dec 2012 13:34:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Sep 2012 14:01:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235441</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyayg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97892</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Added a NULL check for Serializer before calling open() method on it.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>