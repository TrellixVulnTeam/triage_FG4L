<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:59:09 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3670/PIG-3670.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3670] Fix assert in Pig script</title>
                <link>https://issues.apache.org/jira/browse/PIG-3670</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3367&quot; title=&quot;Add assert keyword (operator) in pig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3367&quot;&gt;&lt;del&gt;PIG-3367&lt;/del&gt;&lt;/a&gt; introduce &quot;assert&quot; keyword. However, it can only be used in Java embedding, when use registerQuery. In Pig script or Grunt shell, GruntParser will complain.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689328">PIG-3670</key>
            <summary>Fix assert in Pig script</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lbendig">Lorand Bendig</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2014 19:09:59 +0000</created>
                <updated>Mon, 1 Dec 2014 06:22:12 +0000</updated>
                            <resolved>Sat, 8 Feb 2014 18:19:43 +0000</resolved>
                                                    <fixVersion>0.12.1</fixVersion>
                    <fixVersion>0.13.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                <comments>
                            <comment id="13895421" author="cheolsoo" created="Sat, 8 Feb 2014 04:01:39 +0000"  >&lt;p&gt;+1. Thank you for fixing this.&lt;/p&gt;

&lt;p&gt;Your patch didn&apos;t apply cleanly to trunk, so I rebased it. In addition, I replaced the temporary file in the test with ByteArrayInputStream. Since PigServer.registerScript() accepts InputStream, it seems better to avoid to create a temporary file. Let me know if you think otherwise.&lt;/p&gt;</comment>
                            <comment id="13895663" author="daijy" created="Sat, 8 Feb 2014 18:19:43 +0000"  >&lt;p&gt;Patch committed to trunk. I would also like to commit to 0.12 branch since we claim assert work in 0.12.&lt;/p&gt;

&lt;p&gt;Thanks Cheolsoo for review and improve!&lt;/p&gt;</comment>
                            <comment id="13895860" author="lbendig" created="Sun, 9 Feb 2014 09:29:33 +0000"  >&lt;p&gt;Thanks for fixing it! Now ASSERT works fine, however, grammar allows to assign alias to it which may lead to the following issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = load &apos;data.txt&apos; AS (a0:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,a1:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,a2:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
B = ASSERT A by a0 &amp;gt;= 5, &apos;a0 should be &amp;gt;= 5&apos;; 

describe B;                                                                                      
14/02/09 10:21:04 ERROR grunt.Grunt: ERROR 1003: Unable to find an &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; alias B

C = foreach B generate $0;
14/02/09 10:22:08 ERROR grunt.Grunt: ERROR 1200: Pig script failed to parse: 
&amp;lt;line 3, column 4&amp;gt; pig script failed to validate: Unrecognized alias B
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;d address this issue by changing the grammar so that assigning alias will not be possible (similar to SPLIT). &lt;/p&gt;</comment>
                            <comment id="13896262" author="daijy" created="Mon, 10 Feb 2014 06:40:02 +0000"  >&lt;p&gt;Thank Lorand, that is right, there is no alias for assert in document. I committed your patch to trunk and branch 0.12.&lt;/p&gt;</comment>
                            <comment id="13897326" author="aniket486" created="Tue, 11 Feb 2014 00:20:20 +0000"  >&lt;p&gt;JFYI - b = store a into &apos;crap2&apos;; - is also a correct syntax in pig trunk. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;Daniel Dai&lt;/a&gt; does this deserve a jira?&lt;/p&gt;</comment>
                            <comment id="13897437" author="daijy" created="Tue, 11 Feb 2014 01:54:23 +0000"  >&lt;p&gt;Ok, it is better to have an aliased version so that user can weave assert statement into pipeline. Can you open a new ticket for it?&lt;/p&gt;</comment>
                            <comment id="13897546" author="aniket486" created="Tue, 11 Feb 2014 05:32:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;Ok, it is better to have an aliased version so that user can weave assert statement into pipeline.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Do you mean we should support B = ASSERT A by a0 &amp;gt;= 5, &apos;a0 should be &amp;gt;= 5&apos;; ?&lt;/p&gt;</comment>
                            <comment id="13897564" author="daijy" created="Tue, 11 Feb 2014 06:18:04 +0000"  >&lt;p&gt;I think we should allow the following script:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = load &apos;data.txt&apos; AS (a0:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,a1:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,a2:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
B = ASSERT A by a0 &amp;gt;= 5, &apos;a0 should be &amp;gt;= 5&apos;; 
C = foreach B generate xxxx;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;How do you think?&lt;/p&gt;</comment>
                            <comment id="13897728" author="lbendig" created="Tue, 11 Feb 2014 11:03:50 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aniket486&quot; class=&quot;user-hover&quot; rel=&quot;aniket486&quot;&gt;Aniket Mokashi&lt;/a&gt; is right, it shouldn&apos;t be allowed to be able to assign an alias to a STORE, similarly to SPLIT.  However, I also think that an aliased ASSERT makes the interpretation of the pipeline clearer. Then the assigned alias, which initially didn&apos;t have any meaning, could be interpreted in case of a dump/store as &apos;foreach A generate * which fails if a0 &amp;gt; 5&apos; .&lt;/p&gt;
</comment>
                            <comment id="14228567" author="russell.jurney" created="Sat, 29 Nov 2014 00:25:03 +0000"  >&lt;p&gt;Can someone please chime in and tell us what the syntax for ASSERT ended up being?&lt;/p&gt;</comment>
                            <comment id="14229455" author="russell.jurney" created="Mon, 1 Dec 2014 06:22:12 +0000"  >&lt;p&gt;The syntax ended up being:&lt;/p&gt;

&lt;p&gt;ASSERT my_relation BY field1 IS NOT NULL, &apos;Oh no, field1 is null&apos;;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623449" name="PIG-3670-1.patch" size="2185" author="daijy" created="Thu, 16 Jan 2014 19:23:26 +0000"/>
                            <attachment id="12627778" name="PIG-3670-2.patch" size="3053" author="cheolsoo" created="Sat, 8 Feb 2014 04:01:39 +0000"/>
                            <attachment id="12627856" name="PIG-3670-2_addition.patch" size="5743" author="lbendig" created="Sun, 9 Feb 2014 09:29:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 8 Feb 2014 04:01:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368295</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzlbvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368600</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>