<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:50:51 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2208/PIG-2208.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2208] Restrict number of PIG generated Haddop counters </title>
                <link>https://issues.apache.org/jira/browse/PIG-2208</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;PIG 8.0 implemented Hadoop counters to track the number of records read for each input and the number of records written for each output (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1389&quot; title=&quot;Implement Pig counter to track number of rows for each input files &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1389&quot;&gt;&lt;del&gt;PIG-1389&lt;/del&gt;&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1299&quot; title=&quot;Implement Pig counter  to track number of output rows for each output files &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1299&quot;&gt;&lt;del&gt;PIG-1299&lt;/del&gt;&lt;/a&gt;). On the other hand, Hadoop has imposed limit on per job counters (&lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1943&quot; title=&quot;Implement limits on per-job JobConf, Counters, StatusReport, Split-Sizes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1943&quot;&gt;&lt;del&gt;MAPREDUCE-1943&lt;/del&gt;&lt;/a&gt;) and jobs will fail if the counters exceed the limit.&lt;/p&gt;

&lt;p&gt;Therefore we need a way to cap the number of PIG generated counters.&lt;/p&gt;

&lt;p&gt;Here are the two options:&lt;/p&gt;

&lt;p&gt;1. Add a integer property (e.g., pig.counter.limit) to the pig property file (e.g., 20). If the number of inputs of a job exceeds this number, the input counters are disabled. Similarly, if the number of outputs of a job exceeds this number, the output counters are disabled.&lt;/p&gt;

&lt;p&gt;2. Add a boolean property (e.g., pig.disable.counters) to the pig property file (default: false). If this property is set to true, then the PIG generated counters are disabled.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="12518383">PIG-2208</key>
            <summary>Restrict number of PIG generated Haddop counters </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rding">Richard Ding</assignee>
                                    <reporter username="rding">Richard Ding</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Aug 2011 00:05:22 +0100</created>
                <updated>Wed, 5 Oct 2011 18:20:41 +0100</updated>
                            <resolved>Tue, 27 Sep 2011 19:05:06 +0100</resolved>
                                    <version>0.8.1</version>
                    <version>0.9.0</version>
                                    <fixVersion>0.9.1</fixVersion>
                    <fixVersion>0.10.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13081990" author="dvryaboy" created="Wed, 10 Aug 2011 00:19:47 +0100"  >&lt;p&gt;Can I propose that in addition to the above, we augment the grammar of store and load funcs with a &quot;with &lt;span class=&quot;error&quot;&gt;&amp;#91;no&amp;#93;&lt;/span&gt;counters&quot;?&lt;/p&gt;

&lt;p&gt;Sometimes you know which relations you care about and which you do not.&lt;/p&gt;</comment>
                            <comment id="13083842" author="rding" created="Fri, 12 Aug 2011 01:29:01 +0100"  >&lt;p&gt;This patch implements option 2. Augmenting Pig grammar will be more involved and could be done later.&lt;/p&gt;</comment>
                            <comment id="13083882" author="dvryaboy" created="Fri, 12 Aug 2011 03:54:23 +0100"  >&lt;p&gt;This is just trading one issue for another. If we use too many counters, the job is killed by limits. If we don&apos;t, we spam the logs and the tasks are killed for using too much local disk.  We should at least do local aggregation &amp;#8211; keep counters local to task (a simple map), and log what we would otherwise put in counters. &lt;/p&gt;</comment>
                            <comment id="13089330" author="rding" created="Tue, 23 Aug 2011 08:47:34 +0100"  >&lt;p&gt;It only logs once per job in the front end so that user is informed that the multi-inputs (or outputs) counters are disabled. In the back-end the counters are simply disabled without logging. &lt;/p&gt;</comment>
                            <comment id="13114925" author="daijy" created="Mon, 26 Sep 2011 22:05:12 +0100"  >&lt;p&gt;It seems no matter what else we want to do, option 2 is a good addition. I am going to commit the patch, objection?&lt;/p&gt;</comment>
                            <comment id="13114963" author="dvryaboy" created="Mon, 26 Sep 2011 23:00:23 +0100"  >&lt;p&gt;I still don&apos;t like it but it sounds like I am in the minority.&lt;/p&gt;

&lt;p&gt;Can you add the new properties with default values and a bit of docs to pig.properties?&lt;/p&gt;</comment>
                            <comment id="13115003" author="daijy" created="Mon, 26 Sep 2011 23:53:46 +0100"  >&lt;p&gt;Thanks, Dmitriy. We can do something in addition in this case, but I just don&apos;t see any downside to provide a way to disable input counter. How do you think?&lt;/p&gt;</comment>
                            <comment id="13115010" author="dvryaboy" created="Tue, 27 Sep 2011 00:01:55 +0100"  >&lt;p&gt;I just think that we keep relying on the crutch of providing a user-configurable option for things that shouldn&apos;t be issues in the first place. That&apos;s not a long-term strategy, and causes user confusion.&lt;/p&gt;</comment>
                            <comment id="13115040" author="daijy" created="Tue, 27 Sep 2011 00:48:10 +0100"  >&lt;p&gt;I cannot agree more on this. User will have to run a handicapped Pig in some cases, which is not good. However, I cannot find a workaround easier than the proposed option. &lt;/p&gt;

&lt;p&gt;&quot;local aggregation&quot; is a good addition to this approach. When counter is disabled, user can at least check log. But counters are handier than logs, so keeping counters makes sense.&lt;/p&gt;

&lt;p&gt;&quot;with &lt;span class=&quot;error&quot;&gt;&amp;#91;no&amp;#93;&lt;/span&gt;counters&quot; also makes sense when user want finer control. But an overall control should still be there in case user don&apos;t want to change script.&lt;/p&gt;

&lt;p&gt;I will add a comment in the pig.properties to explain &quot;pig.disable.counter&quot; option.&lt;/p&gt;</comment>
                            <comment id="13115120" author="dvryaboy" created="Tue, 27 Sep 2011 02:41:23 +0100"  >&lt;p&gt;It&apos;d be nice if we could flip that bit automatically during runtime, but I suppose that requires changes to MR code.&lt;/p&gt;

&lt;p&gt;Ok, you have my begrudging +1 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13115760" author="daijy" created="Tue, 27 Sep 2011 19:05:06 +0100"  >&lt;p&gt;Thanks Dmitriy!&lt;/p&gt;

&lt;p&gt;All unit tests pass.&lt;/p&gt;

&lt;p&gt;Test-patch result:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; -1 overall.  &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 @author.  The patch does not contain any @author tags.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 tests included.  The patch appears to include 3 new or modified tests.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     -1 release audit.  The applied patch generated 464 release audit warnings (more than the trunk&apos;s current 462 warnings).&lt;/p&gt;

&lt;p&gt;No new files added, ignore release audit warnings.&lt;/p&gt;

&lt;p&gt;Patch committed to both trunk and 0.9 branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12490200" name="PIG-2208.patch" size="12657" author="rding" created="Fri, 12 Aug 2011 01:29:01 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 9 Aug 2011 23:19:47 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2078</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaw5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97519</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>