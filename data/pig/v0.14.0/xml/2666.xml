<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:08:55 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2666/PIG-2666.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2666] LoadFunc.setLocation() is not called when pig script only has Order By</title>
                <link>https://issues.apache.org/jira/browse/PIG-2666</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;HCatLoader.setLocation() needs setLocation() called on the frontend. This doesn&apos;t happen with this pig script:&lt;/p&gt;

&lt;p&gt;A = LOAD &apos;foo&apos; USING org.apache.hcatalog.pig.HCatLoader();&lt;br/&gt;
B = ORDER A BY id;&lt;br/&gt;
DUMP B;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12552434">PIG-2666</key>
            <summary>LoadFunc.setLocation() is not called when pig script only has Order By</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="toffer">Francis Liu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Apr 2012 21:54:31 +0100</created>
                <updated>Sun, 6 Jan 2013 23:57:07 +0000</updated>
                            <resolved>Fri, 11 May 2012 02:00:21 +0100</resolved>
                                    <version>0.9.3</version>
                                    <fixVersion>0.9.3</fixVersion>
                    <fixVersion>0.11</fixVersion>
                    <fixVersion>0.10.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13261078" author="daijy" created="Tue, 24 Apr 2012 23:11:44 +0100"  >&lt;p&gt;Yes, we does not call setLocation in some cases. Specifically in JobControlCompiler:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
LoadFunc lf = ld.getLoadFunc();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lf !=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    lf.setLocation(ld.getLFile().getFileName(), nwJob);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It can be null when doing sampler job and order by job. we can solve it by forcing getLoadFunc() instantiate LoadFunc.&lt;/p&gt;

&lt;p&gt;Note in the design of LoadFunc, setLocation is not guaranteed to be called in the frontend. But seems now some LoadFunc depends on it. Shall we make the statement that setLocation should be called in the frontend?&lt;/p&gt;</comment>
                            <comment id="13261910" author="daijy" created="Wed, 25 Apr 2012 19:35:08 +0100"  >&lt;p&gt;Francis, can you try the patch?&lt;/p&gt;</comment>
                            <comment id="13262068" author="toffer" created="Wed, 25 Apr 2012 21:51:23 +0100"  >&lt;p&gt;It would make sense to have something that guarantees to be get called on the FE so that there&apos;s a way to pass information to the inputformat as well as to the MR job. Not unless there&apos;s already something existing that does this?&lt;/p&gt;</comment>
                            <comment id="13262119" author="daijy" created="Wed, 25 Apr 2012 22:23:38 +0100"  >&lt;p&gt;Yes, that&apos;s the motivation of the patch. It try to always call setLocation on FE.&lt;/p&gt;</comment>
                            <comment id="13262134" author="toffer" created="Wed, 25 Apr 2012 22:32:32 +0100"  >&lt;p&gt;tested patch, still failing for me.&lt;/p&gt;</comment>
                            <comment id="13262370" author="jcoveney" created="Thu, 26 Apr 2012 05:11:29 +0100"  >&lt;p&gt;In the short term, it seems fair to ensure setLocation is called on the frontend...in the (ideally near) future, though, we need to work on working some lifecycle into LoadFunc. The fact that there is a convention of stuffing a bunch of logic in setLocation is pretty confusing and suboptimal.&lt;/p&gt;</comment>
                            <comment id="13263254" author="toffer" created="Fri, 27 Apr 2012 00:37:29 +0100"  >&lt;blockquote&gt;&lt;p&gt;In the short term, it seems fair to ensure setLocation is called on the frontend...in the (ideally near) future, though, we need to work on working some lifecycle into LoadFunc. The fact that there is a convention of stuffing a bunch of logic in setLocation is pretty confusing and suboptimal.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That would be great. StoreFunc needs to be taken care of as well. I haven&apos;t used the other UDF interfaces.&lt;/p&gt;</comment>
                            <comment id="13266291" author="toffer" created="Wed, 2 May 2012 03:01:30 +0100"  >&lt;p&gt;patch calls SampleLoader.setLocation-&amp;gt;HCatLoader.setLocation and it does not propagate values set in UDFProperties&lt;/p&gt;</comment>
                            <comment id="13270966" author="daijy" created="Wed, 9 May 2012 01:18:37 +0100"  >&lt;p&gt;Can you try &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2666&quot; title=&quot;LoadFunc.setLocation() is not called when pig script only has Order By&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2666&quot;&gt;&lt;del&gt;PIG-2666&lt;/del&gt;&lt;/a&gt;-1.patch?&lt;/p&gt;</comment>
                            <comment id="13271873" author="daijy" created="Wed, 9 May 2012 23:15:39 +0100"  >&lt;p&gt;Adding test case.&lt;/p&gt;</comment>
                            <comment id="13272955" author="thejas" created="Fri, 11 May 2012 01:50:48 +0100"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13272959" author="daijy" created="Fri, 11 May 2012 02:00:21 +0100"  >&lt;p&gt;Patch committed to 0.9/0.10/trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12551653">HCATALOG-380</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12524318" name="PIG-2666-0.patch" size="2564" author="daijy" created="Wed, 25 Apr 2012 19:35:08 +0100"/>
                            <attachment id="12526075" name="PIG-2666-1.patch" size="2638" author="daijy" created="Wed, 9 May 2012 01:18:37 +0100"/>
                            <attachment id="12526224" name="PIG-2666-2.patch" size="5002" author="daijy" created="Wed, 9 May 2012 23:15:39 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 24 Apr 2012 22:11:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>237011</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxwojr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14464</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>