<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:09:45 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1510/PIG-1510.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1510] Add `deepCopy` for LogicalExpressions</title>
                <link>https://issues.apache.org/jira/browse/PIG-1510</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;It would be useful to have a way to `deepCopy` an expression. `deepCopy` will create a new object so that changes made to one object will not reflect in the copy. There are 2 reasons why we don&apos;t override clone.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;It may be better to use `deepCopy` since the copy semantics are explicit (since deepCopy may be expensive).&lt;/li&gt;
	&lt;li&gt;A second important reason for defining `deepCopy` as a separate routine is that it can be passed a plan as an argument which will be updated as the expression is copied (through plan.add and plan.connect).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The usage would look like the following:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;LogicalExpressionPlan logicalPlan = new LogicalExpressionPlan();
LogicalExpression copyExpression = origExpression.deepCopy( logicalPlan );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;An immediate motivation for this would be for constructing the expressions that constitute the CNF form of an expression.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12469797">PIG-1510</key>
            <summary>Add `deepCopy` for LogicalExpressions</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="swati.j">Swati Jain</assignee>
                                    <reporter username="swati.j">Swati Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jul 2010 10:16:36 +0100</created>
                <updated>Fri, 17 Dec 2010 22:44:55 +0000</updated>
                            <resolved>Mon, 23 Aug 2010 23:06:40 +0100</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>data</component>
                        <due>Tue, 27 Jul 2010 04:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12890777" author="daijy" created="Wed, 21 Jul 2010 18:03:57 +0100"  >&lt;p&gt;Yes, this should be a useful functionality. It will be included in the next patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1178&quot; title=&quot;LogicalPlan and Optimizer are too complex and hard to work with&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1178&quot;&gt;&lt;del&gt;PIG-1178&lt;/del&gt;&lt;/a&gt;. I will submit a patch very soon.&lt;/p&gt;</comment>
                            <comment id="12890834" author="swati.j" created="Wed, 21 Jul 2010 20:16:51 +0100"  >&lt;p&gt;Hi Daniel, &lt;/p&gt;

&lt;p&gt;I am ready with this patch and I am using it in ticket 1494. I&apos;ll add the patch over here very soon. Please review that patch. If you want I can also add that patch to &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1178&quot; title=&quot;LogicalPlan and Optimizer are too complex and hard to work with&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1178&quot;&gt;&lt;del&gt;PIG-1178&lt;/del&gt;&lt;/a&gt; too.&lt;/p&gt;</comment>
                            <comment id="12890882" author="daijy" created="Wed, 21 Jul 2010 21:45:12 +0100"  >&lt;p&gt;When I work on 1178, I already added that utility since I will use it in my code. You can use your deepCopy currently, once I submit patch for 1178, you can review the code and see if we can share this code.&lt;/p&gt;</comment>
                            <comment id="12890899" author="swati.j" created="Wed, 21 Jul 2010 22:16:30 +0100"  >&lt;p&gt;I just attached my patch, please see if it is significantly different from what you are planning to add and let me know if it is so I can redesign if required. Also, if this is the same as what you did, and If it helps your work, I could add this as a separate change.&lt;/p&gt;</comment>
                            <comment id="12893568" author="hadoopqa" created="Thu, 29 Jul 2010 10:52:26 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12450096/deepCopy.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12450096/deepCopy.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 980276.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no tests are needed for this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 435 release audit warnings (more than the trunk&apos;s current 406 warnings).&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    -1 contrib tests.  The patch failed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/384/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/384/testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/384/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/384/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/384/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/384/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/384/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-h7.grid.sp2.yahoo.net/384/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12898777" author="swati.j" created="Mon, 16 Aug 2010 03:00:15 +0100"  >&lt;p&gt;Revised patch after merging changes. Also wrote a unit test.&lt;/p&gt;</comment>
                            <comment id="12899197" author="daijy" created="Tue, 17 Aug 2010 01:06:34 +0100"  >&lt;p&gt;Hi, Swati,&lt;br/&gt;
Do we also make a copy of all the instance variables? Such as fieldSchema, ConstantExpression.val, etc?&lt;/p&gt;</comment>
                            <comment id="12899282" author="swati.j" created="Tue, 17 Aug 2010 06:33:19 +0100"  >&lt;p&gt;We make a copy of all instance variables, including fieldSchema variables in expression classes. Exceptions are:&lt;br/&gt;
a) Object val in ConstantExpression. We just copy a reference to the constant object value since the object is constant by definition.&lt;br/&gt;
b) `fieldSchema` and `uidOnlyFieldSchema` in LogicalExpression.java since these can be constructed when required from the expression copy by invoking `getFieldSchema` and don&apos;t need to be copied.&lt;/p&gt;</comment>
                            <comment id="12899498" author="daijy" created="Tue, 17 Aug 2010 19:06:51 +0100"  >&lt;p&gt;You are right about fieldSchema and uidOnlyFieldSchema. For ConstantExpression.val etc, if you only copy the reference, you need to make sure they are readonly in your use case. If that is the case, +1 for the patch.&lt;/p&gt;</comment>
                            <comment id="12901620" author="daijy" created="Mon, 23 Aug 2010 23:06:39 +0100"  >&lt;p&gt;Patch committed to trunk. Thanks Swati for contributing!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12471877">PIG-1549</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12469082">PIG-1494</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12452138" name="deepCopy.patch" size="33516" author="swati.j" created="Mon, 16 Aug 2010 03:00:15 +0100"/>
                            <attachment id="12450096" name="deepCopy.patch" size="22573" author="swati.j" created="Wed, 21 Jul 2010 22:13:12 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 21 Jul 2010 17:03:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164993</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyar7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96719</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>