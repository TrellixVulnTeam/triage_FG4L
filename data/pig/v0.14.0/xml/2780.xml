<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:10:29 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2780/PIG-2780.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2780] MapReduceLauncher should break early when one of the jobs throws an exception</title>
                <link>https://issues.apache.org/jira/browse/PIG-2780</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Right now MapReduceLauncher caches the job exception in jobControlException and only processes it when all the jobs are done:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  jcThread.setUncaughtExceptionHandler(jctExceptionHandler);
  ...
  jcThread.start();
  // Now wait, till we are finished.
  while(!jc.allFinished()){
  ...
  }
  //check for the jobControlException first
  //if the job controller fails before launching the jobs then there are
  //no jobs to check for failure
  if (jobControlException != null) {
    ...
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are two problems with this approach:&lt;br/&gt;
1. There is only one jobControlException variable. If two jobs are throwing exceptions, the first one will be lost.&lt;br/&gt;
2. If there are multiple jobs, the exceptions will not be reported until other jobs are finished, which is a waste of system resource.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12596434">PIG-2780</key>
            <summary>MapReduceLauncher should break early when one of the jobs throws an exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jay23jack">Jie Li</assignee>
                                    <reporter username="pengfeng">Feng Peng</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jun 2012 19:48:34 +0100</created>
                <updated>Fri, 22 Feb 2013 04:53:33 +0000</updated>
                            <resolved>Thu, 12 Jul 2012 08:36:07 +0100</resolved>
                                                    <fixVersion>0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13404213" author="jay23jack" created="Fri, 29 Jun 2012 22:04:23 +0100"  >&lt;p&gt;The jobControlException is different from the job exception. Pig submit jobs in batches and check exceptions at the end of each batch. Jobs without inter-dependency can run in parallel in the same batch, otherwise they are in different batches. Usually the number of jobs in one batch is very small, so checking exception at the end looks acceptable.&lt;/p&gt;

&lt;p&gt;If you specify &quot;-stop_on_failure&quot; in the command line option, then Pig will stop after the failed batch. &lt;/p&gt;

&lt;p&gt;If it doesn&apos;t satisfy your need, i.e. you also want Pig to stop on failure within batch, then please keep this jira open.&lt;/p&gt;</comment>
                            <comment id="13404291" author="pengfeng" created="Fri, 29 Jun 2012 23:48:41 +0100"  >&lt;p&gt;We have an example where Pig tries to submit 4 jobs simultaneously but only reports the exception after all other three jobs are finished (after 6 hours). Neither problem would cause errors in the results, but fixing them would help debugging errors in large complex jobs.  &lt;/p&gt;</comment>
                            <comment id="13408474" author="jay23jack" created="Sat, 7 Jul 2012 01:13:51 +0100"  >&lt;p&gt;Attached a patch that checks frequently whether any job has failed, and if so stops immediately. &lt;/p&gt;

&lt;p&gt;Also includes a unit test where Pig submits three jobs at the same time and one of them will fail. With this patch, Pig will stop without finishing the other two jobs.&lt;/p&gt;</comment>
                            <comment id="13412048" author="jay23jack" created="Wed, 11 Jul 2012 22:57:29 +0100"  >&lt;p&gt;Update the patch to log a early warning for the failure when stop_on_failure is not enabled.&lt;/p&gt;</comment>
                            <comment id="13412585" author="daijy" created="Thu, 12 Jul 2012 08:36:07 +0100"  >&lt;p&gt;Patch committed to trunk. Thanks Jie!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12535480" name="PIG-2780.0.patch" size="5503" author="jay23jack" created="Sat, 7 Jul 2012 01:13:51 +0100"/>
                            <attachment id="12536126" name="PIG-2780.1.patch" size="6354" author="jay23jack" created="Wed, 11 Jul 2012 22:57:29 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Jun 2012 21:04:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256411</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaztz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>98116</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>