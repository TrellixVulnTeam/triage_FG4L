<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:55:17 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2881/PIG-2881.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2881] Add SUBTRACT eval function</title>
                <link>https://issues.apache.org/jira/browse/PIG-2881</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Close to DIFF function but SUBTRACT(bag1, bag2) will subtract elements of bag2 from bag1.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12603834">PIG-2881</key>
            <summary>Add SUBTRACT eval function</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jocosti">Joel Costigliola</assignee>
                                    <reporter username="jocosti">Joel Costigliola</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Aug 2012 10:17:35 +0100</created>
                <updated>Mon, 14 Oct 2013 17:46:42 +0100</updated>
                            <resolved>Thu, 1 Nov 2012 01:01:59 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>piggybank</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="13436627" author="jocosti" created="Fri, 17 Aug 2012 10:24:58 +0100"  >&lt;p&gt;The tests relies on fest assert &lt;a href=&quot;https://github.com/alexruiz/fest-assert-2.x&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/alexruiz/fest-assert-2.x&lt;/a&gt; but can easily be rewritten with Hamcrest I guess.&lt;/p&gt;</comment>
                            <comment id="13442240" author="alangates" created="Mon, 27 Aug 2012 03:03:13 +0100"  >&lt;p&gt;Patch looks fine, except I don&apos;t see a reason to introduce new libraries just for asserts.  We can use the existing assert functionality in junit.&lt;/p&gt;</comment>
                            <comment id="13442327" author="jocosti" created="Mon, 27 Aug 2012 09:00:31 +0100"  >&lt;p&gt;I agree with you, I should have sent tests with basic JUnit assertions.&lt;br/&gt;
Truth is I was just lazy to rewrite it but I have more time now, so I can send you a test version withour Fest assertions.&lt;br/&gt;
You tell em.&lt;/p&gt;</comment>
                            <comment id="13442469" author="jocosti" created="Mon, 27 Aug 2012 16:28:21 +0100"  >&lt;p&gt;new version of test depending only on JUnit assertions.&lt;/p&gt;</comment>
                            <comment id="13467046" author="dvryaboy" created="Mon, 1 Oct 2012 19:21:12 +0100"  >&lt;p&gt;Submitting so it shows up in the patch queue&lt;/p&gt;</comment>
                            <comment id="13481575" author="jcoveney" created="Mon, 22 Oct 2012 19:19:21 +0100"  >&lt;p&gt;Joel,&lt;/p&gt;

&lt;p&gt;This looks fine, but for the final oomph, can you do the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Put it in Pig w/the proper package (either org.apache.pig.builtin or the Piggybank)&lt;/li&gt;
	&lt;li&gt;Generate a diff against trunk&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This will make it so people can download and see exactly what is being applied. We like to avoid cases where many steps need to be taken to exactly replicate what is in trunk.&lt;/p&gt;

&lt;p&gt;Thanks for contributing&lt;br/&gt;
Jon&lt;/p&gt;</comment>
                            <comment id="13484199" author="jocosti" created="Thu, 25 Oct 2012 16:44:23 +0100"  >&lt;p&gt;Hi Jon,&lt;/p&gt;

&lt;p&gt;I&apos;ll try to do that this week end.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Joel&lt;/p&gt;</comment>
                            <comment id="13486497" author="jocosti" created="Mon, 29 Oct 2012 23:31:11 +0000"  >&lt;p&gt;Jon,&lt;/p&gt;

&lt;p&gt;It turns out that the trunk (rev 1403547) did not pass the following tests on my machine &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[junit] Running org.apache.pig.test.TestLoad
[junit] Tests run: 15, Failures: 9, Errors: 0, Time elapsed: 59.125 sec

[junit] Running org.apache.pig.test.TestStore
[junit] Tests run: 17, Failures: 2, Errors: 0, Time elapsed: 406.874 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My environment is : &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Apache Ant(TM) version 1.8.2 compiled on December 3 2011&lt;/li&gt;
	&lt;li&gt;Java version: 1.6.0_17, vendor: Sun Microsystems Inc.&lt;/li&gt;
	&lt;li&gt;Default locale: en_GB, platform encoding: UTF-8&lt;/li&gt;
	&lt;li&gt;OS name: &quot;linux&quot;, version: &quot;3.2.0-33-generic&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I have improved SUBTRACT unit tests, run all the tests and did not have more failing tests than the one I mentioned.&lt;/p&gt;

&lt;p&gt;Question : do you want me to make a patch or wait until all tests pass on my machine ?&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Joel&lt;/p&gt;</comment>
                            <comment id="13486504" author="cheolsoo" created="Mon, 29 Oct 2012 23:38:17 +0000"  >&lt;p&gt;Hi Joel, what errors do you see in the test logs for your test failures?&lt;/p&gt;

&lt;p&gt;build/test/logs/TEST-org.apache.pig.test.TestLoad.txt&lt;br/&gt;
build/test/logs/TEST-org.apache.pig.test.TestStore.txt&lt;/p&gt;

&lt;p&gt;Both tests use MiniCluster, so they may be failing due to environment issues. For example, did you set &quot;umask 0022&quot; in the shell where you&apos;re running tests?&lt;/p&gt;</comment>
                            <comment id="13486519" author="jocosti" created="Mon, 29 Oct 2012 23:50:56 +0000"  >&lt;p&gt;No I did not set umask 0022 because it was not mentioned to do so in the contributor guide : &lt;a href=&quot;https://cwiki.apache.org/PIG/howtocontribute.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/PIG/howtocontribute.html&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;TestStore failures :&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Testcase: testStoreRemoteRel took 0.028 sec
	FAILED
expected:&amp;lt;...&amp;gt; but was:&amp;lt;hdfs://joe-desktop:43074...&amp;gt;

...

Testcase: testStoreRemoteRelScheme took 0.04 sec
	FAILED
expected:&amp;lt;...&amp;gt; but was:&amp;lt;hdfs://joe-desktop:43074...&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;TestLoad failures :&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Testcase: testLoadRemoteRel took 0.333 sec
	FAILED
expected:&amp;lt;[hdfs://joe-desktop:49682]/tmp/test&amp;gt; but was:&amp;lt;[]/tmp/test&amp;gt;
junit.framework.AssertionFailedError: expected:&amp;lt;[hdfs://joe-desktop:49682]/tmp/test&amp;gt; but was:&amp;lt;[]/tmp/test&amp;gt;
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:332)
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:300)
	at org.apache.pig.test.TestLoad.testLoadRemoteRel(TestLoad.java:122)

Testcase: testLoadRemoteAbs took 0.074 sec
Testcase: testLoadRemoteRelScheme took 0.03 sec
	FAILED
expected:&amp;lt;[hdfs://joe-desktop:49682]/tmp/test&amp;gt; but was:&amp;lt;[]/tmp/test&amp;gt;
junit.framework.AssertionFailedError: expected:&amp;lt;[hdfs://joe-desktop:49682]/tmp/test&amp;gt; but was:&amp;lt;[]/tmp/test&amp;gt;
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:332)
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:300)
	at org.apache.pig.test.TestLoad.testLoadRemoteRelScheme(TestLoad.java:139)

Testcase: testLoadRemoteAbsScheme took 27.36 sec
Testcase: testLoadRemoteAbsAuth took 0.083 sec
	FAILED
expected:&amp;lt;[hdfs://joe-desktop:49682]/test&amp;gt; but was:&amp;lt;[]/test&amp;gt;
junit.framework.AssertionFailedError: expected:&amp;lt;[hdfs://joe-desktop:49682]/test&amp;gt; but was:&amp;lt;[]/test&amp;gt;
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:332)
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:300)
	at org.apache.pig.test.TestLoad.testLoadRemoteAbsAuth(TestLoad.java:158)

Testcase: testLoadRemoteNormalize took 0.041 sec
Testcase: testGlobChars took 0.035 sec
	FAILED
expected:&amp;lt;[hdfs://joe-desktop:49682]/tmp/t?s*&amp;gt; but was:&amp;lt;[]/tmp/t?s*&amp;gt;
junit.framework.AssertionFailedError: expected:&amp;lt;[hdfs://joe-desktop:49682]/tmp/t?s*&amp;gt; but was:&amp;lt;[]/tmp/t?s*&amp;gt;
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:332)
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:300)
	at org.apache.pig.test.TestLoad.testGlobChars(TestLoad.java:174)

Testcase: testCommaSeparatedString took 0.031 sec
	FAILED
expected:&amp;lt;[hdfs://joe-desktop:49682/tmp/usr/pig/a,hdfs://joe-desktop:49682]/tmp/usr/pig/b&amp;gt; but was:&amp;lt;[/tmp/usr/pig/a,]/tmp/usr/pig/b&amp;gt;
junit.framework.AssertionFailedError: expected:&amp;lt;[hdfs://joe-desktop:49682/tmp/usr/pig/a,hdfs://joe-desktop:49682]/tmp/usr/pig/b&amp;gt; but was:&amp;lt;[/tmp/usr/pig/a,]/tmp/usr/pig/b&amp;gt;
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:332)
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:300)
	at org.apache.pig.test.TestLoad.testCommaSeparatedString(TestLoad.java:182)

Testcase: testCommaSeparatedString2 took 0.045 sec
	FAILED
expected:&amp;lt;[hdfs://joe-desktop:49682/tmp/t?s*,hdfs://joe-desktop:49682]/tmp/test&amp;gt; but was:&amp;lt;[/tmp/t?s*,]/tmp/test&amp;gt;
junit.framework.AssertionFailedError: expected:&amp;lt;[hdfs://joe-desktop:49682/tmp/t?s*,hdfs://joe-desktop:49682]/tmp/test&amp;gt; but was:&amp;lt;[/tmp/t?s*,]/tmp/test&amp;gt;
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:332)
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:300)
	at org.apache.pig.test.TestLoad.testCommaSeparatedString2(TestLoad.java:190)

Testcase: testCommaSeparatedString3 took 23.653 sec
Testcase: testCommaSeparatedString4 took 0.094 sec
	FAILED
expected:&amp;lt;[hdfs://joe-desktop:49682/tmp/usr/pig/{a,c},hdfs://joe-desktop:49682]/tmp/usr/pig/b&amp;gt; but was:&amp;lt;[/tmp/usr/pig/{a,c},]/tmp/usr/pig/b&amp;gt;
junit.framework.AssertionFailedError: expected:&amp;lt;[hdfs://joe-desktop:49682/tmp/usr/pig/{a,c},hdfs://joe-desktop:49682]/tmp/usr/pig/b&amp;gt; but was:&amp;lt;[/tmp/usr/pig/{a,c},]/tmp/usr/pig/b&amp;gt;
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:332)
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:300)
	at org.apache.pig.test.TestLoad.testCommaSeparatedString4(TestLoad.java:218)

Testcase: testCommaSeparatedString5 took 0.035 sec
	FAILED
expected:&amp;lt;/usr/pig/{a,c},[hdfs://joe-desktop:49682]/tmp/usr/pig/b&amp;gt; but was:&amp;lt;/usr/pig/{a,c},[]/tmp/usr/pig/b&amp;gt;
junit.framework.AssertionFailedError: expected:&amp;lt;/usr/pig/{a,c},[hdfs://joe-desktop:49682]/tmp/usr/pig/b&amp;gt; but was:&amp;lt;/usr/pig/{a,c},[]/tmp/usr/pig/b&amp;gt;
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:332)
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:300)
	at org.apache.pig.test.TestLoad.testCommaSeparatedString5(TestLoad.java:226)

Testcase: testCommaSeparatedString6 took 0.04 sec
	FAILED
expected:&amp;lt;[hdfs://joe-desktop:49682]/tmp/usr/pig/{a,c},/...&amp;gt; but was:&amp;lt;[]/tmp/usr/pig/{a,c},/...&amp;gt;
junit.framework.AssertionFailedError: expected:&amp;lt;[hdfs://joe-desktop:49682]/tmp/usr/pig/{a,c},/...&amp;gt; but was:&amp;lt;[]/tmp/usr/pig/{a,c},/...&amp;gt;
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:332)
	at org.apache.pig.test.TestLoad.checkLoadPath(TestLoad.java:300)
	at org.apache.pig.test.TestLoad.testCommaSeparatedString6(TestLoad.java:246)

Testcase: testNonDfsLocation took 0.06 sec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I can attach the log files if you want (note that TestStore.txt is 1.1MB large).&lt;/p&gt;</comment>
                            <comment id="13486525" author="cheolsoo" created="Mon, 29 Oct 2012 23:53:27 +0000"  >&lt;p&gt;Yes, please attach the logs. Thanks!&lt;/p&gt;</comment>
                            <comment id="13486557" author="jocosti" created="Tue, 30 Oct 2012 00:40:12 +0000"  >&lt;p&gt;Logs attached, resulting from playing the test without umask set to any special value.&lt;/p&gt;
</comment>
                            <comment id="13486674" author="cheolsoo" created="Tue, 30 Oct 2012 06:00:14 +0000"  >&lt;p&gt;Hi Joel,&lt;/p&gt;

&lt;p&gt;I think that I know what&apos;s the problem. In fact, this is an issue with the test code as I see it. Let&apos;s look at one of error messages:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
expected:&amp;lt;[hdfs:&lt;span class=&quot;code-comment&quot;&gt;//joe-desktop:49682]/test&amp;gt; but was:&amp;lt;[]/test&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If you look at the test code in &lt;tt&gt;TestLoad.java&lt;/tt&gt;, &lt;tt&gt;hdfs://joe-desktop:49682/&lt;/tt&gt; is supposed to be replaced by &lt;tt&gt;/&lt;/tt&gt; as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
p.replaceAll(&lt;span class=&quot;code-quote&quot;&gt;&quot;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//[0-9a-zA-Z:\\.]*/&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But it isn&apos;t. Why? Because your hostname &lt;tt&gt;joe-desktop:49682&lt;/tt&gt; includes &lt;tt&gt;-&lt;/tt&gt;, so it doesn&apos;t match the reg. exp. &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0-9a-zA-Z:\\.&amp;#93;&lt;/span&gt;*&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;So either you can change your hostname removing &lt;tt&gt;-&lt;/tt&gt;, or you can fix the reg. exp. so that your hostname can be matched. I would recommend to do the later.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13486869" author="jocosti" created="Tue, 30 Oct 2012 13:49:46 +0000"  >&lt;p&gt;Hi Cheolsoo,&lt;/p&gt;

&lt;p&gt;All tests pass after the regex change, thanks.&lt;/p&gt;

&lt;p&gt;To be more precise, I have made a minor refactoring on the TestLoad to avoid duplication in checkLoadPath, here&apos;s what I&apos;ve changed :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(noConversionExpected) {
    assertEquals(p, expected);
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;  {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; protocol = pc.getExecType() == ExecType.MAPREDUCE ? &lt;span class=&quot;code-quote&quot;&gt;&quot;hdfs&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;file&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-comment&quot;&gt;// regex : A word character, i.e. [a-zA-Z_0-9] or &apos;-&apos; followed by &apos;:&apos; then any characters 
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; regex = &lt;span class=&quot;code-quote&quot;&gt;&quot;[\\-\\w:\\.]&quot;&lt;/span&gt;;
    assertTrue(p.matches(&lt;span class=&quot;code-quote&quot;&gt;&quot;.*&quot;&lt;/span&gt; + protocol + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; + regex + &lt;span class=&quot;code-quote&quot;&gt;&quot;*.*&quot;&lt;/span&gt;));
&lt;/span&gt;    assertEquals(p.replaceAll(protocol + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; + regex + &lt;span class=&quot;code-quote&quot;&gt;&quot;*/&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;), expected);
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you are ok with that, tell I&apos;ll make the patch with SUBTRACT function and those changes.&lt;/p&gt;

&lt;p&gt;Joel  &lt;/p&gt;</comment>
                            <comment id="13487019" author="cheolsoo" created="Tue, 30 Oct 2012 17:03:40 +0000"  >&lt;p&gt;Hi Joel,&lt;/p&gt;

&lt;p&gt;That looks good. Thank you very much for fixing the tests! I assume that you would fix TestStore.java as well?&lt;/p&gt;

&lt;p&gt;One minor comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Please change the assertEquals to the following:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
assertEquals(expected, p.replaceAll(protocol + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; + regex + &lt;span class=&quot;code-quote&quot;&gt;&quot;*/&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;));&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;I noticed that you used 2 spaces to indent code for your original patch. Please use 4 spaces.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I will review and commit it when you upload your patch.&lt;/p&gt;</comment>
                            <comment id="13487049" author="jocosti" created="Tue, 30 Oct 2012 17:44:31 +0000"  >&lt;p&gt;Yes I did fix TestStore.&lt;/p&gt;

&lt;p&gt;I will switch  assertEquals parameters and upload the patch.&lt;/p&gt;</comment>
                            <comment id="13487077" author="jocosti" created="Tue, 30 Oct 2012 18:06:36 +0000"  >&lt;p&gt;Patch attached&lt;/p&gt;</comment>
                            <comment id="13487241" author="cheolsoo" created="Tue, 30 Oct 2012 21:10:29 +0000"  >&lt;p&gt;Hi Joel,&lt;/p&gt;

&lt;p&gt;Thanks for uploading the patch. It looks really good. Two minor comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Can you please use Unix style newline chars?&lt;/li&gt;
	&lt;li&gt;Can you please remove trailing white spaces?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I am not supposed to modify your patch in any way, so please forgive me for asking you do extra work.&lt;/p&gt;

&lt;p&gt;A bigger question that I had was whether we should create a new suite (TestSUBTRACTFunc) or add new test cases to the existing TestBuiltin suite. Given that TestBuiltin is near 3k line long, I like to break this test suite into smaller pieces and make your patch be the 1st step toward that goal. But I need to know what other people think. I probably ask it on the dev mailing list. Please feel free to provide your opinion.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13487295" author="jocosti" created="Tue, 30 Oct 2012 22:13:55 +0000"  >&lt;p&gt;Ok, I&apos;ll do the final modifications to have a clean patch. &lt;/p&gt;

&lt;p&gt;I would definitely split the tests, because it will be easier to find/maintain them and it will also be possible to run only the tests you are working on instead of the complete builtin suite.  &lt;/p&gt;</comment>
                            <comment id="13487312" author="jocosti" created="Tue, 30 Oct 2012 22:27:27 +0000"  >&lt;p&gt;Patch updated.&lt;/p&gt;</comment>
                            <comment id="13487395" author="cheolsoo" created="Wed, 31 Oct 2012 00:18:03 +0000"  >&lt;p&gt;Hi Joel,&lt;/p&gt;

&lt;p&gt;OK, I asked that on the dev list. We should keep the test as a separate file, but we should change its location and change its name.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Please move the test to &lt;tt&gt;o.a.pig.builtin.test&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Please change the name to &lt;tt&gt;TestSUBTRACT.java&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I saw your comment regarding the test name, but if we move it to &lt;tt&gt;o.a.pig.builtin.test&lt;/tt&gt;, we won&apos;t have a confusion since the other &lt;tt&gt;TestSubtract.java&lt;/tt&gt; is under &lt;tt&gt;o.a.pig.test&lt;/tt&gt;. Agreed?&lt;/p&gt;

&lt;p&gt;Here are few other minor comments:&lt;/p&gt;

&lt;p&gt;1) There is a typo in your patch.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;TestSUBTRACTFunc.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.junit.Assert.assertTrueS; &lt;span class=&quot;code-comment&quot;&gt;// &apos;S&apos; should be removed.&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;2) The following import statement is not used. Please remove:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;TestSUBTRACTFunc.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Assert;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;3) Please update the doc. Please look for the &apos;Eval Function&apos; section in &lt;tt&gt;src/docs/src/documentation/content/xdocs/func.xml&lt;/tt&gt;. To build it, run:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant docs -Dforrest.home=&amp;lt;FORREST_HOME&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This will generate &lt;tt&gt;./src/docs/build/site/func.html&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;4) Lastly, it would be better if you could re-name each test case as &quot;testBlah&quot;. I won&apos;t insist on this, so you can leave them as they are if you want to.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13487412" author="jocosti" created="Wed, 31 Oct 2012 00:39:02 +0000"  >&lt;p&gt;I agree, one question though, there is no test directory under test/org/apache/pig/builtin/, should I create one ?&lt;/p&gt;</comment>
                            <comment id="13487415" author="cheolsoo" created="Wed, 31 Oct 2012 00:44:55 +0000"  >&lt;p&gt;I am sorry that I wasn&apos;t clear. I think that we can put the test under &lt;tt&gt;./test/org/apache/pig/builtin/&lt;/tt&gt;. Right now I see one file (&lt;tt&gt;TestFunctionWrapperEvalFunc.java&lt;/tt&gt;) in there. Since &lt;tt&gt;o.a.pig.builtin&lt;/tt&gt; is the package that we&apos;re adding a new file, that seems like the right place to me.&lt;/p&gt;</comment>
                            <comment id="13487746" author="jocosti" created="Wed, 31 Oct 2012 13:12:17 +0000"  >&lt;p&gt;Ok, I have moved TestSUBTRACT to ./test/org/apache/pig/builtin/&lt;/p&gt;

&lt;p&gt;I have updated func.xml but I can&apos;t the site, forrest always throw me this OutOfMemoryError &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     [exec] * [16/28]   [0/0]     10.501s 0b      basic.pdf
     [exec] Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space
     [exec] 	at org.apache.fop.layoutmgr.BlockStackingLayoutManager.wrapPositionElement(BlockStackingLayoutManager.java:1499)
     [exec] 	at org.apache.fop.layoutmgr.BlockStackingLayoutManager.wrapPositionElements(BlockStackingLayoutManager.java:1487)
     [exec] 	at org.apache.fop.layoutmgr.BlockStackingLayoutManager.wrapPositionElements(BlockStackingLayoutManager.java:1471)
     [exec] 	at org.apache.fop.layoutmgr.FlowLayoutManager.getNextKnuthElements(FlowLayoutManager.java:117)
     [exec] 	at org.apache.fop.layoutmgr.PageBreaker.getNextKnuthElements(PageBreaker.java:145)
     [exec] 	at org.apache.fop.layoutmgr.AbstractBreaker.getNextBlockList(AbstractBreaker.java:552)
     [exec] 	at org.apache.fop.layoutmgr.PageBreaker.getNextBlockList(PageBreaker.java:137)
     [exec] 	at org.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:302)
     [exec] 	at org.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:264)
     [exec] 	at org.apache.fop.layoutmgr.PageSequenceLayoutManager.activateLayout(PageSequenceLayoutManager.java:106)
     [exec] 	at org.apache.fop.area.AreaTreeHandler.endPageSequence(AreaTreeHandler.java:234)
     [exec] 	at org.apache.fop.fo.pagination.PageSequence.endOfNode(PageSequence.java:123)
     [exec] 	at org.apache.fop.fo.FOTreeBuilder$MainFOHandler.endElement(FOTreeBuilder.java:340)
     [exec] 	at org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:169)
     [exec] 	at org.apache.cocoon.xml.AbstractXMLPipe.endElement(AbstractXMLPipe.java:112)
     [exec] 	at org.apache.cocoon.xml.AbstractXMLPipe.endElement(AbstractXMLPipe.java:112)
     [exec] 	at org.apache.cocoon.xml.xlink.XLinkPipe.endElement(XLinkPipe.java:212)
     [exec] 	at org.apache.cocoon.xml.AbstractXMLPipe.endElement(AbstractXMLPipe.java:112)
     [exec] 	at org.apache.cocoon.transformation.I18nTransformer.endElement(I18nTransformer.java:1193)
     [exec] 	at org.apache.cocoon.components.EnvironmentChanger.endElement(EnvironmentStack.java:148)
     [exec] 	at org.apache.xml.serializer.ToXMLSAXHandler.endElement(ToXMLSAXHandler.java:263)
     [exec] 	at org.apache.xalan.templates.ElemLiteralResult.execute(ElemLiteralResult.java:1401)
     [exec] 	at org.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2400)
     [exec] 	at org.apache.xalan.templates.ElemLiteralResult.execute(ElemLiteralResult.java:1376)
     [exec] 	at org.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2400)
     [exec] 	at org.apache.xalan.transformer.TransformerImpl.applyTemplateToNode(TransformerImpl.java:2270)
     [exec] 	at org.apache.xalan.transformer.TransformerImpl.transformNode(TransformerImpl.java:1356)
     [exec] 	at org.apache.xalan.transformer.TransformerImpl.run(TransformerImpl.java:3447)
     [exec] 	at org.apache.xalan.transformer.TransformerHandlerImpl.endDocument(TransformerHandlerImpl.java:408)
     [exec] 	at org.apache.cocoon.xml.AbstractXMLPipe.endDocument(AbstractXMLPipe.java:56)
     [exec] 	at org.apache.cocoon.transformation.TraxTransformer.endDocument(TraxTransformer.java:586)
     [exec] 	at org.apache.cocoon.xml.AbstractXMLPipe.endDocument(AbstractXMLPipe.java:56)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I haven&apos;t been able to set Xmx memory options in forrest yet, can you help me on that ?  &lt;br/&gt;
I have to say that the doc process is painful &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13487827" author="jocosti" created="Wed, 31 Oct 2012 14:46:48 +0000"  >&lt;p&gt;Ok, finally found how to set up memory options in forrest (by modifying forrest.build.xml directly which is not that clean).&lt;/p&gt;

&lt;p&gt;Anyway, I have attached the new patch, tell me if it&apos;s ok.&lt;/p&gt;</comment>
                            <comment id="13487984" author="cheolsoo" created="Wed, 31 Oct 2012 17:20:44 +0000"  >&lt;p&gt;Hi Joel,&lt;/p&gt;

&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;Thanks you so much for your patience. The patch looks great! All tests pass too.&lt;/p&gt;

&lt;p&gt;I have a super minor comment on the doc. I think that the functions in the doc are listed in alphabetical order, but your SUBTRACT comes before IsEmpty. I guess that you added it there because SUBTRACT is similar to DIFF? Would it make more sense to follow the order? If you could upload a new patch that fixes the order, that would be great.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;p.s. You don&apos;t have to clean old attached files. In fact, it&apos;s better to keep them since they show how this jira has developed and make it easier for others to understand history. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13488047" author="jocosti" created="Wed, 31 Oct 2012 18:20:36 +0000"  >&lt;p&gt;Sorry for cleaning old attached files, I won&apos;t do that next time.&lt;/p&gt;

&lt;p&gt;I&apos;ll submit a new patch with doc functions in correct order.&lt;/p&gt;</comment>
                            <comment id="13488066" author="jocosti" created="Wed, 31 Oct 2012 18:33:12 +0000"  >&lt;p&gt;Hope it&apos;s the final patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13488148" author="cheolsoo" created="Wed, 31 Oct 2012 19:36:45 +0000"  >&lt;p&gt;Looks good to me. I will wait today just to see if anyone has any concerns. If I don&apos;t hear anything, I will commit it.&lt;/p&gt;

&lt;p&gt;Thanks a lot!&lt;/p&gt;</comment>
                            <comment id="13488396" author="cheolsoo" created="Thu, 1 Nov 2012 01:01:59 +0000"  >&lt;p&gt;Committed to trunk. Thanks Joel!&lt;/p&gt;

&lt;p&gt;Please someone add jocosti to the contributor list. I can&apos;t assign this jira to him.&lt;/p&gt;</comment>
                            <comment id="13488909" author="jocosti" created="Thu, 1 Nov 2012 18:28:07 +0000"  >&lt;p&gt;Thanks Cheolsoo, with your help, we finally made it ! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12551603" name="PIG-2881.patch" size="16188" author="jocosti" created="Wed, 31 Oct 2012 18:33:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 27 Aug 2012 02:03:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242097</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hxwd8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12633</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>