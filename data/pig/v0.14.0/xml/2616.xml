<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:59:39 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2616/PIG-2616.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2616] JobControlCompiler.getInputSizeFromLoader must handle exceptions from LoadFunc.getStatistics.</title>
                <link>https://issues.apache.org/jira/browse/PIG-2616</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2573&quot; title=&quot;Automagically setting parallelism based on input file size does not work with HCatalog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2573&quot;&gt;&lt;del&gt;PIG-2573&lt;/del&gt;&lt;/a&gt; made it possible for &lt;tt&gt;JobControlCompiler&lt;/tt&gt; to get input size from &lt;tt&gt;LoadFuncs&lt;/tt&gt;, but in some cases (i.e. &lt;tt&gt;InterStorage&lt;/tt&gt;), &lt;tt&gt;getStatistics&lt;/tt&gt; throws an exception:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.UnsupportedOperationException
        at org.apache.pig.impl.io.InterStorage.getStatistics(InterStorage.java:189)
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.getInputSizeFromLoader(JobControlCompiler.java:839)
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.getInputSize(JobControlCompiler.java:799)
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.estimateNumberOfReducers(JobControlCompiler.java:777)
        at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.getJob(JobControlCompiler.java:599)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12548058">PIG-2616</key>
            <summary>JobControlCompiler.getInputSizeFromLoader must handle exceptions from LoadFunc.getStatistics.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="billgraham">Bill Graham</assignee>
                                    <reporter username="billgraham">Bill Graham</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Mar 2012 05:43:39 +0100</created>
                <updated>Fri, 22 Feb 2013 04:54:16 +0000</updated>
                            <resolved>Thu, 26 Apr 2012 23:50:48 +0100</resolved>
                                                    <fixVersion>0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13238195" author="daijy" created="Mon, 26 Mar 2012 09:18:28 +0100"  >&lt;p&gt;The fix is fine. You can also drop UnsupportedOperationException in InterStorage.&lt;/p&gt;</comment>
                            <comment id="13238483" author="billgraham" created="Mon, 26 Mar 2012 16:32:01 +0100"  >&lt;p&gt;Here&apos;s a patch that returns null from &lt;tt&gt;InterStorage.getStatistics&lt;/tt&gt;, which aligns with the contract of the &lt;tt&gt;LoadMetadata&lt;/tt&gt; javadoc.&lt;/p&gt;</comment>
                            <comment id="13238613" author="dvryaboy" created="Mon, 26 Mar 2012 18:49:17 +0100"  >&lt;p&gt;+1. Don&apos;t think tests are needed. Will commit later today.&lt;/p&gt;</comment>
                            <comment id="13263133" author="billgraham" created="Thu, 26 Apr 2012 21:53:38 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2574&quot; title=&quot;Make reducer estimator plugable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2574&quot;&gt;&lt;del&gt;PIG-2574&lt;/del&gt;&lt;/a&gt; dealt with half of this patch, which is catching the exception. Attaching a new patch which deals with the other half, which is that &lt;tt&gt;InterStorage.getStatistics(..)&lt;/tt&gt; should return null.&lt;/p&gt;

&lt;p&gt;Will commit this shortly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12524766" name="PIG-2616.3.patch" size="490" author="billgraham" created="Thu, 26 Apr 2012 21:53:38 +0100"/>
                            <attachment id="12519903" name="pig-2616.1.patch" size="1032" author="billgraham" created="Mon, 26 Mar 2012 05:55:30 +0100"/>
                            <attachment id="12519962" name="pig-2616.2.patch" size="1545" author="billgraham" created="Mon, 26 Mar 2012 16:32:01 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 26 Mar 2012 08:18:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233155</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyay6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97848</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>