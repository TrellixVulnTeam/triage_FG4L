<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:55:26 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3905/PIG-3905.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3905] 0.12.1 release can&apos;t be build for Hadoop2</title>
                <link>https://issues.apache.org/jira/browse/PIG-3905</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;While building Pig against &lt;tt&gt;hadoopversion=23&lt;/tt&gt;,  attempts to resolve &lt;tt&gt;hadoop-core&lt;/tt&gt; dependency no matter what. The root cause of the bug is the following lines in ivy.xml&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    &amp;lt;dependency org=&quot;com.sun.jersey&quot; name=&quot;jersey-core&quot; rev=&quot;${jersey-core.version}&quot;
      conf=&quot;hadoop20-&amp;gt;default&quot;/&amp;gt;
    &amp;lt;dependency org=&quot;org.apache.hadoop&quot; name=&quot;hadoop-core&quot; rev=&quot;${hadoop-core.version}&quot;
      conf=&quot;hadoop20-&amp;gt;default&quot;/&amp;gt;
    &amp;lt;dependency org=&quot;org.apache.hadoop&quot; name=&quot;hadoop-test&quot; rev=&quot;${hadoop-test.version}&quot;
      conf=&quot;hadoop20-&amp;gt;default&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;hadoop20 configuration is getting evaluated &lt;em&gt;always&lt;/em&gt;. Unless a build machine has dirty local .m2 repository, the build will fail.&lt;/p&gt;

&lt;p&gt;The bug blocks &lt;a href=&quot;https://issues.apache.org/jira/browse/BIGTOP-1110&quot; title=&quot;Define BOM for 0.8.0 release of Bigtop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BIGTOP-1110&quot;&gt;&lt;del&gt;BIGTOP-1110&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12709375">PIG-3905</key>
            <summary>0.12.1 release can&apos;t be build for Hadoop2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="cos">Konstantin Boudnik</reporter>
                        <labels>
                    </labels>
                <created>Sat, 19 Apr 2014 00:41:45 +0100</created>
                <updated>Mon, 7 Jul 2014 19:08:07 +0100</updated>
                            <resolved>Thu, 24 Apr 2014 23:46:30 +0100</resolved>
                                    <version>0.12.1</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="13974748" author="daijy" created="Sat, 19 Apr 2014 07:16:51 +0100"  >&lt;p&gt;I can build Hadoop2 after wipe out .ivy2 and .m2. Actually there is no change of ivy.xml between 0.12.0 and 0.12.1. Are you able to build Pig 0.12.0?&lt;/p&gt;</comment>
                            <comment id="13974767" author="cos" created="Sat, 19 Apr 2014 08:31:10 +0100"  >&lt;p&gt;I haven&apos;t tried 0.12. However, on a clean VM, I am hitting the above issue. And it is gone with removal of these three lines. I don&apos;t have that setup handy, but I will supply the environment details tomorrow.&lt;/p&gt;</comment>
                            <comment id="13974994" author="cheolsoo" created="Sun, 20 Apr 2014 00:00:18 +0100"  >&lt;p&gt;I think this is a valid bug. Even though the build doesn&apos;t fail for me (because hadoop-core-1.0.0.jar is found in maven repo), hadoop20 and hadoop23 confs are always resolved regardless hadoopversion-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ivy:resolve] :: resolving dependencies :: org.apache.pig#pig;0.12.2-SNAPSHOT
[ivy:resolve] 	confs: [master, &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, runtime, compile, test, javadoc, releaseaudit, jdiff, checkstyle, buildJar, hadoop20, hadoop23, hbase94, hbase95]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This seems wrong to me.&lt;/p&gt;

&lt;p&gt;For example, sqoop only resolves one hadoop conf specified by hadoopversion- &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ivy:resolve] :: resolving dependencies :: com.cloudera.sqoop#sqoop;working@lgml-cheolsoop
[ivy:resolve] 	confs: [hadoop20]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We should fix this. I don&apos;t have an explanation why this becomes an issue in 0.12.1 because it has existed since the beginning.&lt;/p&gt;</comment>
                            <comment id="13975220" author="cos" created="Sun, 20 Apr 2014 19:53:18 +0100"  >&lt;p&gt;Thanks for confirming. It has became an issue as new Bigtop CI is wiping out ~/.m2 repos before each build now. In other words - we are building a clean room process for the Hadoop stack.&lt;/p&gt;</comment>
                            <comment id="13975916" author="daijy" created="Mon, 21 Apr 2014 20:13:31 +0100"  >&lt;p&gt;Attach a patch. Can anyone give a try?&lt;/p&gt;</comment>
                            <comment id="13975932" author="cheolsoo" created="Mon, 21 Apr 2014 20:26:53 +0100"  >&lt;p&gt;+1. It works for me. Thanks for the patch Daniel!&lt;/p&gt;</comment>
                            <comment id="13975935" author="cos" created="Mon, 21 Apr 2014 20:28:07 +0100"  >&lt;p&gt;That seems to be working ok. Thank you Daniel!&lt;/p&gt;</comment>
                            <comment id="13978972" author="daijy" created="Wed, 23 Apr 2014 23:00:42 +0100"  >&lt;p&gt;The previous patch is not proper. conf hadoop20/hadoop23 only resolves Hadoop specific jars. Should use conf compile which extends hadoop20/hadoop23 depends on hadoopversion and include general jars. Attach patch.&lt;/p&gt;</comment>
                            <comment id="13979914" author="cheolsoo" created="Thu, 24 Apr 2014 17:26:48 +0100"  >&lt;p&gt;+1. Good catch.&lt;/p&gt;</comment>
                            <comment id="13980417" author="daijy" created="Thu, 24 Apr 2014 23:46:30 +0100"  >&lt;p&gt;Compilation fail only when use a local maven repository. Commit to trunk first.&lt;/p&gt;

&lt;p&gt;Also the fix speeds up the compilation. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12708957">BIGTOP-1278</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12641102" name="PIG-3905-1.patch" size="653" author="daijy" created="Mon, 21 Apr 2014 20:13:31 +0100"/>
                            <attachment id="12641591" name="PIG-3905-2.patch" size="638" author="daijy" created="Wed, 23 Apr 2014 23:00:42 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 19 Apr 2014 06:16:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387697</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzon3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387958</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>