<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:07:14 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3410/PIG-3410.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3410] LimitOptimizer is applied before PartitionFilterOptimizer</title>
                <link>https://issues.apache.org/jira/browse/PIG-3410</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Consider following script-&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
hcat_load = LOAD &apos;X&apos; using org.apache.hcatalog.pig.HCatLoader();
hcat_filter = FILTER hcat_load BY (part=&apos;Y&apos;);
hcat_limited = limit hcat_filter 5;
dump hcat_limited;                     
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This script is not benefited from LimitOptimizer (pushing limit to loadfunc) because LimitOptimizer is applied before PartitionFilterOptimizer. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12661491">PIG-3410</key>
            <summary>LimitOptimizer is applied before PartitionFilterOptimizer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aniket486">Aniket Mokashi</assignee>
                                    <reporter username="aniket486">Aniket Mokashi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Aug 2013 22:27:43 +0100</created>
                <updated>Mon, 14 Oct 2013 17:46:51 +0100</updated>
                            <resolved>Fri, 16 Aug 2013 22:52:30 +0100</resolved>
                                    <version>0.11.1</version>
                                    <fixVersion>0.12.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13739151" author="cheolsoo" created="Wed, 14 Aug 2013 03:17:31 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aniket486&quot; class=&quot;user-hover&quot; rel=&quot;aniket486&quot;&gt;Aniket Mokashi&lt;/a&gt;, did you run the full unit test suite? I just want to make sure we don&apos;t break anything.&lt;/p&gt;</comment>
                            <comment id="13741240" author="aniket486" created="Thu, 15 Aug 2013 18:34:49 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;Cheolsoo Park&lt;/a&gt;, yes, I did run full test suite. None of failure are related to this (there were a few due to pig not cleaning up files in our environment).&lt;br/&gt;
I haven&apos;t tried e2e, do you have a setup for that?&lt;/p&gt;</comment>
                            <comment id="13741764" author="cheolsoo" created="Fri, 16 Aug 2013 01:56:08 +0100"  >&lt;p&gt;Let me run e2e test.&lt;/p&gt;

&lt;p&gt;I played with your patch a bit, and it works well for me. Basically, I tested the following cases:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;LIMIT is not pushed down&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a = LOAD &apos;prodhive.cheolsoop.foo&apos; USING MyStorage();
b = FILTER a BY part == 1 and nonpart == &apos;a&apos;;
c = LIMIT b 1;
DUMP c;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;LIMIT is pushed down&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
a = LOAD &apos;prodhive.cheolsoop.foo&apos; USING MyStorage();
b = FILTER a BY part == 1;
c = LIMIT b 1;
DUMP c;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13741778" author="aniket486" created="Fri, 16 Aug 2013 02:15:56 +0100"  >&lt;p&gt;I&apos;m planning to play on my side what happens when we do For n times (run all optimizers one after other). Right now, we have run all optimizers m times one after the other, but that&apos;s not helpful.&lt;/p&gt;

&lt;p&gt;Let&apos;s do this as first step.&lt;/p&gt;</comment>
                            <comment id="13741780" author="cheolsoo" created="Fri, 16 Aug 2013 02:18:12 +0100"  >&lt;p&gt;Ok, are you saying you want to do more testing? In that case, I will wait for now.&lt;/p&gt;</comment>
                            <comment id="13741793" author="cheolsoo" created="Fri, 16 Aug 2013 02:24:54 +0100"  >&lt;p&gt;I misn-uderstood Aniket&apos;s comment. I will continue to test/review.&lt;/p&gt;</comment>
                            <comment id="13741794" author="aniket486" created="Fri, 16 Aug 2013 02:24:55 +0100"  >&lt;p&gt;Sorry, I wanted to say that we should solve the real problem (that order of optimizers matter) in another jira. Please review if this looks good.&lt;/p&gt;</comment>
                            <comment id="13742616" author="cheolsoo" created="Fri, 16 Aug 2013 22:27:28 +0100"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;I ran both unit test and e2e test. I saw 2 failures in e2e test, but they&apos;re not related and will open jiras for them.&lt;/p&gt;</comment>
                            <comment id="13742637" author="aniket486" created="Fri, 16 Aug 2013 22:52:07 +0100"  >&lt;p&gt;Committed to trunk. Thanks Cheolsoo for the review!&lt;/p&gt;</comment>
                            <comment id="13742708" author="cheolsoo" created="Sat, 17 Aug 2013 00:18:05 +0100"  >&lt;p&gt;I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3428&quot; title=&quot;e2e Jython_Diagnostics_2 and 4 are broken in trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3428&quot;&gt;&lt;del&gt;PIG-3428&lt;/del&gt;&lt;/a&gt; for the failing e2e tests.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12596950" name="PIG-3410.patch" size="1468" author="aniket486" created="Thu, 8 Aug 2013 22:28:54 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 14 Aug 2013 02:17:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>341680</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzgrr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>341986</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>