<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:09:34 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2403/PIG-2403.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2403] Reduce code duplication in SUM, MAX, MIN udfs</title>
                <link>https://issues.apache.org/jira/browse/PIG-2403</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The current type-specific implementations of Max, Min, and Sum have a lot of duplicated code. We can reduce this significantly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12534141">PIG-2403</key>
            <summary>Reduce code duplication in SUM, MAX, MIN udfs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dvryaboy">Dmitriy V. Ryaboy</assignee>
                                    <reporter username="dvryaboy">Dmitriy V. Ryaboy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Dec 2011 06:14:56 +0000</created>
                <updated>Fri, 22 Feb 2013 04:53:41 +0000</updated>
                            <resolved>Wed, 14 Dec 2011 01:54:33 +0000</resolved>
                                                    <fixVersion>0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13164177" author="dvryaboy" created="Wed, 7 Dec 2011 06:19:00 +0000"  >&lt;p&gt;The attached patch extracts common code from max, sum, and min implementations into a common base class and reuses it across the board.  I&apos;m not totally satisfied &amp;#8211; a lot of boilerplate is still copy-pasted between the long/int/float/double implementations, but it&apos;s a step in the right direction.&lt;/p&gt;

&lt;p&gt;TestBuiltin passes.&lt;/p&gt;

&lt;p&gt;Ready for review.&lt;/p&gt;</comment>
                            <comment id="13164184" author="dvryaboy" created="Wed, 7 Dec 2011 06:33:37 +0000"  >&lt;p&gt;Summary of changes:&lt;/p&gt;

&lt;p&gt;$ git diff apache/trunk --stat&lt;br/&gt;
 .../pig/builtin/AlgebraicByteArrayMathBase.java    |  213 +++++++++++++++++++&lt;br/&gt;
 .../pig/builtin/AlgebraicDoubleMathBase.java       |  166 +++++++++++++++&lt;br/&gt;
 .../apache/pig/builtin/AlgebraicFloatMathBase.java |  165 +++++++++++++++&lt;br/&gt;
 .../apache/pig/builtin/AlgebraicIntMathBase.java   |  167 +++++++++++++++&lt;br/&gt;
 .../apache/pig/builtin/AlgebraicLongMathBase.java  |  168 +++++++++++++++&lt;br/&gt;
 src/org/apache/pig/builtin/AlgebraicMathBase.java  |  127 ++++++++++++&lt;br/&gt;
 src/org/apache/pig/builtin/DoubleAbs.java          |   35 +---&lt;br/&gt;
 src/org/apache/pig/builtin/DoubleMax.java          |  169 +---------------&lt;br/&gt;
 src/org/apache/pig/builtin/DoubleMin.java          |  165 +--------------&lt;br/&gt;
 src/org/apache/pig/builtin/DoubleSum.java          |  168 +--------------&lt;br/&gt;
 src/org/apache/pig/builtin/FloatMax.java           |  166 +--------------&lt;br/&gt;
 src/org/apache/pig/builtin/FloatMin.java           |  165 +--------------&lt;br/&gt;
 src/org/apache/pig/builtin/FloatSum.java           |  210 +-------------------&lt;br/&gt;
 src/org/apache/pig/builtin/IntMax.java             |  167 +--------------&lt;br/&gt;
 src/org/apache/pig/builtin/IntMin.java             |  167 +--------------&lt;br/&gt;
 src/org/apache/pig/builtin/IntSum.java             |  210 +-------------------&lt;br/&gt;
 src/org/apache/pig/builtin/LongMax.java            |  166 +--------------&lt;br/&gt;
 src/org/apache/pig/builtin/LongMin.java            |  165 +--------------&lt;br/&gt;
 src/org/apache/pig/builtin/LongSum.java            |  164 +--------------&lt;br/&gt;
 src/org/apache/pig/builtin/MAX.java                |  206 +------------------&lt;br/&gt;
 src/org/apache/pig/builtin/MIN.java                |  207 +------------------&lt;br/&gt;
 src/org/apache/pig/builtin/SUM.java                |  216 ++------------------&lt;br/&gt;
 22 files changed, 1138 insertions&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/add.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, 2614 deletions&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/forbidden.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13167976" author="dvryaboy" created="Tue, 13 Dec 2011 00:16:53 +0000"  >&lt;p&gt;Please review &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13168683" author="alangates" created="Tue, 13 Dec 2011 20:21:06 +0000"  >&lt;p&gt;I tried to review the patch, but I can&apos;t get it to apply.  It says:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
gates&amp;gt; patch -p0 &amp;lt; PIG-2403.patch 
patching file src/org/apache/pig/builtin/AlgebraicByteArrayMathBase.java
patching file src/org/apache/pig/builtin/AlgebraicDoubleMathBase.java
patching file src/org/apache/pig/builtin/AlgebraicFloatMathBase.java
patching file src/org/apache/pig/builtin/AlgebraicIntMathBase.java
patching file src/org/apache/pig/builtin/AlgebraicLongMathBase.java
patching file src/org/apache/pig/builtin/AlgebraicMathBase.java
can&apos;t find file to patch at input line 1047
Perhaps you used the wrong -p or --strip option?
The text leading up to &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; was:
--------------------------
|diff --git src/org/apache/pig/builtin/DoubleAbs.java src/org/apache/pig/builtin/DoubleAbs.java
|index bac4861..79c6be8 100644
|--- src/org/apache/pig/builtin/DoubleAbs.java
|+++ src/org/apache/pig/builtin/DoubleAbs.java
--------------------------
File to patch: 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It looks like maybe you used git diff without the --no-prefix option.&lt;/p&gt;</comment>
                            <comment id="13168689" author="dvryaboy" created="Tue, 13 Dec 2011 20:32:48 +0000"  >&lt;p&gt;I used the no-prefix option (otherwise it wouldn&apos;t be able to patch all those other files).&lt;br/&gt;
Patch applies fine for my svn trunk checkout, too.. you are sure you are using a clean environment?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

[tw-mbp13-dryaboy pig-svn]$ svn up
At revision 1213916.
[tw-mbp13-dryaboy pig-svn]$  patch -p0 &amp;lt; ../pig-git/patches/PIG-2403.patch 
patching file src/org/apache/pig/builtin/AlgebraicByteArrayMathBase.java
patching file src/org/apache/pig/builtin/AlgebraicDoubleMathBase.java
patching file src/org/apache/pig/builtin/AlgebraicFloatMathBase.java
patching file src/org/apache/pig/builtin/AlgebraicIntMathBase.java
patching file src/org/apache/pig/builtin/AlgebraicLongMathBase.java
patching file src/org/apache/pig/builtin/AlgebraicMathBase.java
patching file src/org/apache/pig/builtin/DoubleAbs.java
patching file src/org/apache/pig/builtin/DoubleMax.java
patching file src/org/apache/pig/builtin/DoubleMin.java
patching file src/org/apache/pig/builtin/DoubleSum.java
patching file src/org/apache/pig/builtin/FloatMax.java
patching file src/org/apache/pig/builtin/FloatMin.java
patching file src/org/apache/pig/builtin/FloatSum.java
patching file src/org/apache/pig/builtin/IntMax.java
patching file src/org/apache/pig/builtin/IntMin.java
patching file src/org/apache/pig/builtin/IntSum.java
patching file src/org/apache/pig/builtin/LongMax.java
patching file src/org/apache/pig/builtin/LongMin.java
patching file src/org/apache/pig/builtin/LongSum.java
patching file src/org/apache/pig/builtin/MAX.java
patching file src/org/apache/pig/builtin/MIN.java
patching file src/org/apache/pig/builtin/SUM.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13168881" author="alangates" created="Tue, 13 Dec 2011 23:44:11 +0000"  >&lt;p&gt;Hmm, it works on my linux box but not my mac.  How odd.&lt;/p&gt;

&lt;p&gt;I&apos;m not clear on why AlgebraicMathBase had to implement Intermediate and Final.  Why not let Java just figure that out via inheritance?&lt;/p&gt;

&lt;p&gt;Other than that +1.&lt;/p&gt;

&lt;p&gt;All e2e tests that use MIN, MAX, or SUM pass.&lt;/p&gt;
</comment>
                            <comment id="13168974" author="dvryaboy" created="Wed, 14 Dec 2011 01:51:56 +0000"  >&lt;p&gt;Works on my mac.. so I don&apos;t know what&apos;s going on there.&lt;/p&gt;

&lt;p&gt;I don&apos;t really remember what&apos;s going on with Intermediate and Final.. I had to wrestle with java&apos;s inheritance quite a bit to get around static methods / classes, I think this one was something I ran out of steam trying to bend around.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit as is, and save further optimization for future generations.&lt;/p&gt;</comment>
                            <comment id="13168979" author="dvryaboy" created="Wed, 14 Dec 2011 01:54:33 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506406" name="PIG-2403.patch" size="146616" author="dvryaboy" created="Wed, 7 Dec 2011 06:19:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 13 Dec 2011 20:21:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219863</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyax2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97668</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>