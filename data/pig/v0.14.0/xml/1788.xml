<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:03:40 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-1788/PIG-1788.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-1788] relation-as-scalar error messages should indicate the field being used as scalar</title>
                <link>https://issues.apache.org/jira/browse/PIG-1788</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Issue 1&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
grunt&amp;gt; l = load &apos;x&apos; as (a,b,c);        
grunt&amp;gt; g = group l by a;
grunt&amp;gt; f = foreach g generate COUNT(g);       -- g is unintentionally being used as scalar , the user intends it to be COUNT(l) . 
2011-01-05 12:44:53,098 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1000: Error during parsing. Scalars can be only used with projections
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since the user did not intend to use a scalar, the scalar error messages are hard to understand. &lt;br/&gt;
It will be useful to have the relation being used in scalar context in the error message. Something like - &quot;ERROR 1000: Error during parsing. Relation g being used in scalar context at ... .Scalars can be only used with projections&quot;&lt;/p&gt;

&lt;p&gt;Issue 2&lt;br/&gt;
The error message &quot;Scalars can be only used with projections&quot; is not easy to understand. A better error message is needed, something like &quot;A column needs to be projected from relation used in scalar context.&quot;&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12494768">PIG-1788</key>
            <summary>relation-as-scalar error messages should indicate the field being used as scalar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="laukik">Laukik Chitnis</assignee>
                                    <reporter username="thejas">Thejas M Nair</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Jan 2011 20:51:12 +0000</created>
                <updated>Thu, 4 Aug 2011 01:35:12 +0100</updated>
                            <resolved>Sat, 16 Apr 2011 00:55:33 +0100</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12977966" author="thejas" created="Wed, 5 Jan 2011 20:57:37 +0000"  >&lt;p&gt;It would be better to say &apos;relation used as scalar&apos; instead of &apos;relation used in scalar context&apos; in above error messages.&lt;/p&gt;</comment>
                            <comment id="13019229" author="laukik" created="Wed, 13 Apr 2011 07:33:51 +0100"  >&lt;p&gt;This issue seems to have been resolved as part of the parser overhaul in 0.9:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;grunt&amp;gt; a = load &apos;a&apos; as (x,y,z);
grunt&amp;gt; g = group a by y;
grunt&amp;gt; f = foreach g generate COUNT(g);
2011-04-13 06:25:15,619 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 0: &amp;lt;line 3, column 29&amp;gt; Invalid scalar projection: g
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13019378" author="thejas" created="Wed, 13 Apr 2011 16:21:05 +0100"  >&lt;p&gt;The new error message still does not address &apos;issue 2&apos; in description. It would be good to have an explanation  in the error message, of why the scalar projection is invalid.&lt;/p&gt;</comment>
                            <comment id="13019883" author="laukik" created="Thu, 14 Apr 2011 17:02:09 +0100"  >&lt;p&gt;This is a trivial change in error message; no additional test cases are required.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     [exec]
     [exec] -1 overall.
     [exec]
     [exec]     +1 @author.  The patch does not contain any @author tags.
     [exec]
     [exec]     -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.
     [exec]                         Please justify why no tests are needed for this patch.
     [exec]
     [exec]     +1 javadoc.  The javadoc tool did not generate any warning messages.
     [exec]
     [exec]     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.
     [exec]
     [exec]     +1 findbugs.  The patch does not introduce any new Findbugs warnings.
     [exec]
     [exec]     +1 release audit.  The applied patch does not increase the total number of release audit warnings.
     [exec]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13019916" author="thejas" created="Thu, 14 Apr 2011 18:06:51 +0100"  >&lt;p&gt;Review of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1788&quot; title=&quot;relation-as-scalar error messages should indicate the field being used as scalar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1788&quot;&gt;&lt;del&gt;PIG-1788&lt;/del&gt;&lt;/a&gt;.patch - &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;InvalidScalarProjectionException is used for several scalar errors, and the reasons for those errors are not same as this one. So this same error message is not applicable to all cases. I think the error message should be part of the constructor of this exception so that the error message is correct.&lt;/li&gt;
	&lt;li&gt;I think it makes sense to have a test case as well. Error messages are important, and it is very easy to add test cases that test for error messages such as this one. (for example see TestProjectRange.testRangeCoGroupNegNoSchema() )&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13020446" author="laukik" created="Fri, 15 Apr 2011 22:58:28 +0100"  >&lt;p&gt;Added a new constructor that takes an additional string as a parameter to be appended to the error message. Also added a test case.&lt;/p&gt;</comment>
                            <comment id="13020489" author="thejas" created="Sat, 16 Apr 2011 00:55:33 +0100"  >&lt;p&gt;+1&lt;br/&gt;
Patch committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12476487" name="PIG-1788-3.patch" size="3252" author="laukik" created="Fri, 15 Apr 2011 22:58:28 +0100"/>
                            <attachment id="12476349" name="PIG-1788.patch" size="723" author="laukik" created="Thu, 14 Apr 2011 17:02:09 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 13 Apr 2011 06:33:51 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66106</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyatqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97129</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>