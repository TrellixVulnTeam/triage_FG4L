<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:49:38 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2055/PIG-2055.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2055] inconsistent behavior in parser generated during build </title>
                <link>https://issues.apache.org/jira/browse/PIG-2055</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;On certain builds, i see that pig fails to support this syntax -&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
grunt&amp;gt; l = load &apos;x&apos; using PigStorage(&apos;:&apos;);           
2011-05-10 09:21:41,565 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1200: &amp;lt;line 1, column 29&amp;gt;  mismatched input &apos;(&apos; expecting SEMI_COLON
Details at logfile: /Users/tejas/pig_trunk_cp/trunk/pig_1305044484712.log

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I seem to be the only one who has seen this behavior, and I have seen on occassion when I build on mac. It could be problem with antlr and apple jvm interaction. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12506737">PIG-2055</key>
            <summary>inconsistent behavior in parser generated during build </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas M Nair</assignee>
                                    <reporter username="thejas">Thejas M Nair</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 May 2011 17:22:59 +0100</created>
                <updated>Mon, 23 Jan 2012 07:31:25 +0000</updated>
                            <resolved>Mon, 22 Aug 2011 19:41:52 +0100</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.9.2</fixVersion>
                    <fixVersion>0.10.0</fixVersion>
                    <fixVersion>0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13031321" author="daijy" created="Tue, 10 May 2011 20:19:46 +0100"  >&lt;p&gt;I see that before. Once I do &quot;ant clean&quot;, the message go away.&lt;/p&gt;</comment>
                            <comment id="13031332" author="thejas" created="Tue, 10 May 2011 20:41:05 +0100"  >&lt;blockquote&gt;&lt;p&gt;I see that before. Once I do &quot;ant clean&quot;, the message go away.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I have seen it even after doing &apos;ant clean&apos;, so it does not seem to be caused by unclean build, but by some non deterministic code generation in antlr. &lt;/p&gt;</comment>
                            <comment id="13032783" author="knoguchi" created="Fri, 13 May 2011 02:10:19 +0100"  >&lt;p&gt;I hit this as well on my macbook.  It drove me crazy.&lt;br/&gt;
Using antlr-3.3 (instead of 3.2) seems to have fixed it for me.&lt;/p&gt;</comment>
                            <comment id="13082683" author="thejas" created="Wed, 10 Aug 2011 22:16:52 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2055&quot; title=&quot;inconsistent behavior in parser generated during build &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2055&quot;&gt;&lt;del&gt;PIG-2055&lt;/del&gt;&lt;/a&gt;.1.patch - Uses antlr 3.4 . 3.3 seems to have some changes related to determinism. I had to make some changes to the code as well to make it working. All unit tests pass. &lt;br/&gt;
But I am not sure if this actually fixes the problem , because that is not easily reproducible. I will try compile+test in a loop and see if I can reproduce it.&lt;/p&gt;</comment>
                            <comment id="13082690" author="thejas" created="Wed, 10 Aug 2011 22:23:18 +0100"  >&lt;p&gt;The official jar of antlr 3.4 that comes will all the binaries uses stringtemplate.jar version 4.0.4 , but this patch is using version 4.0.2 because that is what is available on maven repository. We should move to 4.0.4 once that is available on maven.&lt;/p&gt;</comment>
                            <comment id="13083348" author="thejas" created="Thu, 11 Aug 2011 19:36:39 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2055&quot; title=&quot;inconsistent behavior in parser generated during build &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2055&quot;&gt;&lt;del&gt;PIG-2055&lt;/del&gt;&lt;/a&gt;.2.patch - the stringtemplate.jar 4.0.4 was released under a different artifact name (ST4). This patch uses the new artifact and version 4.0.4.&lt;/p&gt;</comment>
                            <comment id="13088857" author="daijy" created="Mon, 22 Aug 2011 18:59:59 +0100"  >&lt;p&gt;+1 on the patch. We have a hard time to reproduce the issue, I would suggest to check in the patch, and see people&apos;s feedback.&lt;/p&gt;</comment>
                            <comment id="13088916" author="thejas" created="Mon, 22 Aug 2011 19:41:52 +0100"  >&lt;p&gt;Patch committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13145330" author="butlermh" created="Mon, 7 Nov 2011 10:50:09 +0000"  >&lt;p&gt;I am seeing this issue as well. I have tried building Pig 0.9.0 and Pig 0.9.1 on RHEL 5 and I see nearly 367 test failures as a result, for example&lt;/p&gt;

&lt;p&gt;org.apache.pig.parser.TestErrorHandling.tesNegative5&lt;/p&gt;

&lt;p&gt;Error Message&lt;/p&gt;

&lt;p&gt;&amp;lt;line 1, column 29&amp;gt;  mismatched input &apos;(&apos; expecting SEMI_COLON&lt;br/&gt;
Stacktrace&lt;/p&gt;

&lt;p&gt;Failed to parse: &amp;lt;line 1, column 29&amp;gt;  mismatched input &apos;(&apos; expecting SEMI_COLON&lt;br/&gt;
	at org.apache.pig.parser.QueryParserDriver.parse(QueryParserDriver.java:222)&lt;br/&gt;
	at org.apache.pig.parser.QueryParserDriver.parse(QueryParserDriver.java:164)&lt;br/&gt;
	at org.apache.pig.PigServer$Graph.validateQuery(PigServer.java:1609)&lt;br/&gt;
	at org.apache.pig.PigServer$Graph.registerQuery(PigServer.java:1582)&lt;br/&gt;
	at org.apache.pig.PigServer.registerQuery(PigServer.java:584)&lt;br/&gt;
	at org.apache.pig.PigServer.registerQuery(PigServer.java:597)&lt;br/&gt;
	at org.apache.pig.parser.TestErrorHandling.tesNegative5(TestErrorHandling.java:105)&lt;/p&gt;

&lt;p&gt;People have also reported it on the user list - see &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.mail-archive.com/user@pig.apache.org/msg02288.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.mail-archive.com/user@pig.apache.org/msg02288.html&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.mail-archive.com/user@pig.apache.org/msg02185.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.mail-archive.com/user@pig.apache.org/msg02185.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I do not understand why I am seeing so many failures yet others have had problems reproducing the issue?&lt;/p&gt;

&lt;p&gt;This issue is marked as resolved, but it affects 0.9.0 and the patch is only for trunk? &lt;/p&gt;

&lt;p&gt;I am currently in the process of testing trunk to see if it has the same problem. If trunk is ok, it would make sense to backport the patch to 0.9.0 / 0.9.1.&lt;/p&gt;</comment>
                            <comment id="13145841" author="daijy" created="Mon, 7 Nov 2011 21:44:19 +0000"  >&lt;p&gt;Hi, Mark,&lt;br/&gt;
Let me know your testing with trunk.&lt;/p&gt;</comment>
                            <comment id="13146198" author="butlermh" created="Tue, 8 Nov 2011 10:15:41 +0000"  >&lt;p&gt;Hi Daniel!&lt;br/&gt;
Trunk works okay on continuous build server. I have also been able to build a working version of 0.9.0 (on Ubuntu 11.10) and a failing version of 0.9.0 (on RHEL 5). I then diff&apos;d the src-gen/org/apache/pig/parser directories of these two versions. For some reason there are differences in QueryParser.java between the two versions. I enclose the diff and also the two versions of this file.&lt;/p&gt;</comment>
                            <comment id="13146200" author="butlermh" created="Tue, 8 Nov 2011 10:19:49 +0000"  >&lt;p&gt;The different versions of QueryParser.java in the working and non-working versions. &lt;/p&gt;</comment>
                            <comment id="13146205" author="butlermh" created="Tue, 8 Nov 2011 10:29:18 +0000"  >&lt;p&gt;I checked through the code, the differences are in order, not in logic. This does not explain the differences I am seeing. &lt;/p&gt;</comment>
                            <comment id="13146338" author="butlermh" created="Tue, 8 Nov 2011 14:52:58 +0000"  >&lt;p&gt;I found a third variant of this file being generated which does have logical differences to the other two versions. &lt;/p&gt;</comment>
                            <comment id="13146459" author="butlermh" created="Tue, 8 Nov 2011 18:39:05 +0000"  >&lt;p&gt;Here is someone else with the same issue - with ANTLR, not Pig: &lt;a href=&quot;http://www.antlr.org/pipermail/antlr-interest/2011-August/042456.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.antlr.org/pipermail/antlr-interest/2011-August/042456.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13146469" author="butlermh" created="Tue, 8 Nov 2011 18:56:03 +0000"  >&lt;p&gt;I modified build.xml to generate QueryParser.java with the ANTLR -Xwatchconversion option. This shows it is struggling and timing out with the func_clause rule. Therefore the reason for the non-deterministic behavior we are seeing may not be down to differences in JVMs, it might be down to the performance of different machines. &lt;/p&gt;</comment>
                            <comment id="13146475" author="daijy" created="Tue, 8 Nov 2011 19:11:03 +0000"  >&lt;p&gt;Thanks Mark, that&apos;s helpful. It does verify the indeterminism nature of antlr 3.2. &lt;/p&gt;

&lt;p&gt;I would suggest to backport the patch to 0.9 branch. Any objection?&lt;/p&gt;</comment>
                            <comment id="13147021" author="miguno" created="Wed, 9 Nov 2011 13:09:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2055&quot; title=&quot;inconsistent behavior in parser generated during build &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2055&quot;&gt;&lt;del&gt;PIG-2055&lt;/del&gt;&lt;/a&gt; patch for Pig 0.9.0.  Kudos to our Mark Butler for the backport.&lt;/p&gt;</comment>
                            <comment id="13147022" author="miguno" created="Wed, 9 Nov 2011 13:09:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2055&quot; title=&quot;inconsistent behavior in parser generated during build &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2055&quot;&gt;&lt;del&gt;PIG-2055&lt;/del&gt;&lt;/a&gt; patch, this one is for Pig 0.9.1.  Again kudos to our Mark Butler for the backport.&lt;/p&gt;</comment>
                            <comment id="13155045" author="fang fang chen" created="Tue, 22 Nov 2011 12:15:13 +0000"  >&lt;p&gt;For svn release-0.9.1&#65292;the following modification is needed besides #&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2055&quot; title=&quot;inconsistent behavior in parser generated during build &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2055&quot;&gt;&lt;del&gt;PIG-2055&lt;/del&gt;&lt;/a&gt;-for-0.9.1.patch:&lt;br/&gt;
build.xml: &lt;br/&gt;
654c654&lt;br/&gt;
&amp;#8211;           &amp;lt;zipfileset src=&quot;$&lt;/p&gt;
{ivy.lib.dir}/stringtemplate-${antlr.version}.jar&quot; /&amp;gt;&lt;br/&gt;
&lt;br/&gt;
++           &amp;lt;zipfileset src=&quot;${ivy.lib.dir}
&lt;p&gt;/ST4-$&lt;/p&gt;
{stringtemplate.version}
&lt;p&gt;.jar&quot; /&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="13155478" author="rding" created="Tue, 22 Nov 2011 21:58:12 +0000"  >&lt;p&gt;Upload new patch for 0.9.1 release. Fixing a couple of issues.&lt;/p&gt;</comment>
                            <comment id="13155632" author="fang fang chen" created="Wed, 23 Nov 2011 02:28:05 +0000"  >&lt;p&gt;Thank you Richard. &lt;br/&gt;
Richard included my modification in the new patch.&lt;/p&gt;</comment>
                            <comment id="13163056" author="daijy" created="Mon, 5 Dec 2011 21:27:07 +0000"  >&lt;p&gt;+1 for Richard&apos;s patch. Will commit once tests pass.&lt;/p&gt;</comment>
                            <comment id="13164241" author="daijy" created="Wed, 7 Dec 2011 08:27:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2055&quot; title=&quot;inconsistent behavior in parser generated during build &quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2055&quot;&gt;&lt;del&gt;PIG-2055&lt;/del&gt;&lt;/a&gt;-for-0.9.1_2.patch resync with 0.9 branch. Unit tests pass. Patch committed to 0.9 branch as well. Thanks guys!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12513964">PIG-2160</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12503075" name="PIG-2055-for-0.9.1.patch" size="2854" author="miguno" created="Wed, 9 Nov 2011 13:09:48 +0000"/>
                            <attachment id="12504812" name="PIG-2055-for-0.9.1_1.patch" size="3982" author="rding" created="Tue, 22 Nov 2011 21:58:12 +0000"/>
                            <attachment id="12506417" name="PIG-2055-for-0.9.1_2.patch" size="3851" author="daijy" created="Wed, 7 Dec 2011 08:27:48 +0000"/>
                            <attachment id="12490036" name="PIG-2055.1.patch" size="6713" author="thejas" created="Wed, 10 Aug 2011 22:16:52 +0100"/>
                            <attachment id="12490153" name="PIG-2055.2.patch" size="6671" author="thejas" created="Thu, 11 Aug 2011 19:36:39 +0100"/>
                            <attachment id="12503074" name="PIG-2055.for-0.9.0.patch" size="2789" author="miguno" created="Wed, 9 Nov 2011 13:09:17 +0000"/>
                            <attachment id="12502901" name="QueryParser_broken.java" size="887616" author="butlermh" created="Tue, 8 Nov 2011 10:19:49 +0000"/>
                            <attachment id="12502921" name="QueryParser_broken_other.java" size="895126" author="butlermh" created="Tue, 8 Nov 2011 14:52:58 +0000"/>
                            <attachment id="12502902" name="QueryParser_working.java" size="887616" author="butlermh" created="Tue, 8 Nov 2011 10:19:49 +0000"/>
                            <attachment id="12502945" name="antlrWatchConversionOutput.txt" size="60480" author="butlermh" created="Tue, 8 Nov 2011 18:56:03 +0000"/>
                            <attachment id="12502900" name="diff.txt" size="4624" author="butlermh" created="Tue, 8 Nov 2011 10:19:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 10 May 2011 19:19:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>64168</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyavbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97385</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>