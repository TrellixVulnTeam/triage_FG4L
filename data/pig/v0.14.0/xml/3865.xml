<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:57:15 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-3865/PIG-3865.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-3865] Remodel the XMLLoader to work to be faster and more maintainable</title>
                <link>https://issues.apache.org/jira/browse/PIG-3865</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;I recreated the XMLLoader in PiggyBank to work line by line instead of character by character. This makes it more efficient as it uses precompiled regular expressions on each line instead of doing checks on a character by character basis. The code is also significantly smaller which makes it more maintainable.&lt;/p&gt;

&lt;p&gt;Just to put you in perspective. I&apos;m a PhD student in University of Minnesota. I built SpatialHadoop &lt;a href=&quot;http://spatialhadoop.cs.umn.edu&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://spatialhadoop.cs.umn.edu&lt;/a&gt; which is an extension to Hadoop that adds spatial data types and indexes in HDFS. The system is open source and have been downloads more than 75,000 times so far. Part of it is to provide a simple high level language that works with spatial data.&lt;/p&gt;

&lt;p&gt;I proposed Pigeon &lt;a href=&quot;http://spatialhadoop.cs.umn.edu/pigeon&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://spatialhadoop.cs.umn.edu/pigeon&lt;/a&gt; as a spatial extension to Pig. My case study is the planet file from OpenStreetMap. This is a 450GB XML file that contains all the information about the whole planet. I previously used XMLLoader to parse it. I found some bugs and fixed it in previous issues. Now, I found that it takes a lot of time to parse the XML file. To be a good citizen, I remodeled the XMLLoader to work line by line and use precompiled regular expressions which makes it faster. The parsing time of the compressed OSM planet file drops from 5:30 hours to 3:30 hours in my cluster setup with Hadoop 1.2.1. By the way, Pigeon was presented in ICDE 2014 &lt;a href=&quot;http://ieee-icde2014.eecs.northwestern.edu/program.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://ieee-icde2014.eecs.northwestern.edu/program.html&lt;/a&gt;, a top conference in data engineering.&lt;/p&gt;

&lt;p&gt;The code is now more maintainable. For example, I can easily modify it to add to accept a regular expression for the XML identifier so that it matches all tags that satisfy the regular expression instead of just returning a fixed static tag. In this version, I didn&apos;t add any new features but they can be added in the future.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12706449">PIG-3865</key>
            <summary>Remodel the XMLLoader to work to be faster and more maintainable</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aseldawy">Ahmed Eldawy</assignee>
                                    <reporter username="aseldawy">Ahmed Eldawy</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Apr 2014 16:52:59 +0100</created>
                <updated>Mon, 7 Jul 2014 19:08:06 +0100</updated>
                            <resolved>Fri, 25 Apr 2014 00:59:45 +0100</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                    <component>piggybank</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13958911" author="aseldawy" created="Thu, 3 Apr 2014 17:04:50 +0100"  >&lt;p&gt;A patch for the test to add one more test case to make sure XMLLoader works when a matching element spans two blocks.&lt;/p&gt;

&lt;p&gt;The new code of XMLLoader is attached. It is not provided as a patch since it is a complete remodel of the old code not a modification of it.&lt;/p&gt;</comment>
                            <comment id="13958913" author="aseldawy" created="Thu, 3 Apr 2014 17:06:28 +0100"  >&lt;p&gt;A patch is attached for the test which adds a new test for when a matching element spans two blocks.&lt;/p&gt;

&lt;p&gt;The new code of XMLLoader is attached. It is not provided as a patch since it is a complete remodel.&lt;/p&gt;</comment>
                            <comment id="13959534" author="daijy" created="Fri, 4 Apr 2014 02:34:18 +0100"  >&lt;p&gt;Thanks for your patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aseldawy&quot; class=&quot;user-hover&quot; rel=&quot;aseldawy&quot;&gt;Ahmed Eldawy&lt;/a&gt;. However, I didn&apos;t see the patch for tests you mention. Can you double check?&lt;/p&gt;</comment>
                            <comment id="13961152" author="aseldawy" created="Sat, 5 Apr 2014 17:51:37 +0100"  >&lt;p&gt;An updated version of XMLLoader with more comments and better structure.&lt;/p&gt;</comment>
                            <comment id="13961153" author="aseldawy" created="Sat, 5 Apr 2014 17:53:40 +0100"  >&lt;p&gt;A patch for TestXMLLoader. It fixes some errors in previous tests. It also removes some unnecessary lines in the test. In addition, I add a new test I needed for the new design of XMLLoader when a multiline element spans two blocks.&lt;/p&gt;</comment>
                            <comment id="13961166" author="aseldawy" created="Sat, 5 Apr 2014 18:04:36 +0100"  >&lt;p&gt;Sorry. The previous patch was for XMLLoader not the test. This is the correct patch for the test. I made three main changes.&lt;br/&gt;
1- I removed the attribute &apos;patternString&apos;. It turns out to be unneeded.&lt;br/&gt;
2- I fixed an error in tests testShouldReturn0TupleCountIfNoEndTagIsFound and testShouldReturn1ForIntermediateTagData. The identifier was passed as &apos;&amp;lt;/ignoreProperty&amp;gt;&apos; and I fixed it to &apos;ignoreProperty&apos;.&lt;br/&gt;
3- I added a new test that I needed for the new design of XMLLoader when a multiline matching tag spans two blocks.&lt;/p&gt;</comment>
                            <comment id="13966128" author="daijy" created="Fri, 11 Apr 2014 02:52:05 +0100"  >&lt;p&gt;Regenerate the patch. Also test files src/test/java/org/apache/pig/piggybank/test/evaluation/xml/data/*xml.bz2 are missing, can you upload them?&lt;/p&gt;</comment>
                            <comment id="13978304" author="aseldawy" created="Wed, 23 Apr 2014 16:33:38 +0100"  >&lt;p&gt;Test file. Place this file in&lt;br/&gt;
src/test/java/org/apache/pig/piggybank/test/evaluation/xml/data/&lt;/p&gt;</comment>
                            <comment id="13978306" author="aseldawy" created="Wed, 23 Apr 2014 16:34:03 +0100"  >&lt;p&gt;Test file&lt;br/&gt;
Place in&lt;br/&gt;
src/test/java/org/apache/pig/piggybank/test/evaluation/xml/data/&lt;/p&gt;</comment>
                            <comment id="13978311" author="aseldawy" created="Wed, 23 Apr 2014 16:36:41 +0100"  >&lt;p&gt;Sorry for the delay. For some reasons, I didn&apos;t notice the notification when the last comment was sent. I added two test files which run with the test case &apos;testXMLLoaderShouldNotReturnLastNonMatchedTag&apos;.&lt;br/&gt;
Please place both of them in the folder&lt;br/&gt;
src/test/java/org/apache/pig/piggybank/test/evaluation/xml/data/&lt;/p&gt;</comment>
                            <comment id="13980519" author="daijy" created="Fri, 25 Apr 2014 00:59:45 +0100"  >&lt;p&gt;+1, except I removed @author tag since it is not allowed in Apache.&lt;/p&gt;

&lt;p&gt;Patch committed to trunk, thanks Ahmed!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12656103">PIG-3373</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12639719" name="PIG-3865-2.patch" size="45124" author="daijy" created="Fri, 11 Apr 2014 02:52:05 +0100"/>
                            <attachment id="12638872" name="PIG-3865-test.txt" size="11271" author="aseldawy" created="Sat, 5 Apr 2014 18:04:36 +0100"/>
                            <attachment id="12638868" name="XMLLoader.java" size="12324" author="aseldawy" created="Sat, 5 Apr 2014 17:51:37 +0100"/>
                            <attachment id="12641487" name="bad-file.xml.bz2" size="213706" author="aseldawy" created="Wed, 23 Apr 2014 16:33:38 +0100"/>
                            <attachment id="12641488" name="test-file-2.xml.bz2" size="122230" author="aseldawy" created="Wed, 23 Apr 2014 16:34:03 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 4 Apr 2014 01:34:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384772</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzo533:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385039</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>