<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:07:08 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2659/PIG-2659.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2659] add source location of the aliases in the physical plan</title>
                <link>https://issues.apache.org/jira/browse/PIG-2659</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The goal is to provide better information about what is actually running in a job.&lt;br/&gt;
In particular when alias names are being reused.&lt;/p&gt;

&lt;p&gt;For example with the following script:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = LOAD &apos;foo&apos; using PigStorage();
B = GROUP A BY $0;
A = FOREACH B GENERATE COUNT(A);
STORE A INTO &apos;bar&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The job conf will contain the following information&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
pig.alias.location: M: A[1,4],A[3,4],B[2,4] C: A[3,4],B[2,4] R: A[3,4]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A caveat is that the Logical Plan Optimizer throws away the original information when merging Logical Operators.&lt;br/&gt;
this is already the case today with pig.alias &lt;/p&gt;</description>
                <environment></environment>
        <key id="12552208">PIG-2659</key>
            <summary>add source location of the aliases in the physical plan</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="julienledem">Julien Le Dem</assignee>
                                    <reporter username="julienledem">Julien Le Dem</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Apr 2012 23:07:22 +0100</created>
                <updated>Fri, 22 Feb 2013 04:53:55 +0000</updated>
                            <resolved>Sat, 12 May 2012 16:00:10 +0100</resolved>
                                                    <fixVersion>0.11</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13260014" author="julienledem" created="Mon, 23 Apr 2012 23:12:56 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2659&quot; title=&quot;add source location of the aliases in the physical plan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2659&quot;&gt;&lt;del&gt;PIG-2659&lt;/del&gt;&lt;/a&gt;.patch implements this&lt;/p&gt;</comment>
                            <comment id="13270624" author="billgraham" created="Tue, 8 May 2012 18:20:43 +0100"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Looks good to me. There were a lot of whitespace changes in this patch FYI.&lt;/p&gt;</comment>
                            <comment id="13270689" author="daijy" created="Tue, 8 May 2012 19:33:53 +0100"  >&lt;p&gt;That&apos;s awesome, with this, we can do:&lt;/p&gt;

&lt;p&gt;1. Include line number for most backend exceptions&lt;br/&gt;
2. Include line number in explain&lt;br/&gt;
3. Include line number in stats&lt;br/&gt;
4. Use line number to generate job name&lt;br/&gt;
5. Make use of location in visualizer (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2659&quot; title=&quot;add source location of the aliases in the physical plan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2659&quot;&gt;&lt;del&gt;PIG-2659&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Can you elaborate what &quot;M: A&lt;span class=&quot;error&quot;&gt;&amp;#91;1,4&amp;#93;&lt;/span&gt;,A&lt;span class=&quot;error&quot;&gt;&amp;#91;3,4&amp;#93;&lt;/span&gt;,B&lt;span class=&quot;error&quot;&gt;&amp;#91;2,4&amp;#93;&lt;/span&gt; C: A&lt;span class=&quot;error&quot;&gt;&amp;#91;3,4&amp;#93;&lt;/span&gt;,B&lt;span class=&quot;error&quot;&gt;&amp;#91;2,4&amp;#93;&lt;/span&gt; R: A&lt;span class=&quot;error&quot;&gt;&amp;#91;3,4&amp;#93;&lt;/span&gt;&quot; means?&lt;/p&gt;

&lt;p&gt;If we merge operators, we shall annotate how this operator come from, this can be done later.&lt;/p&gt;

&lt;p&gt;Also be sure to remove white space changes when you checkin (svn diff -x --ignore-all-space).&lt;/p&gt;

&lt;p&gt;Can you also add some tests?&lt;/p&gt;</comment>
                            <comment id="13270903" author="julienledem" created="Tue, 8 May 2012 23:46:14 +0100"  >&lt;p&gt;Hi Daniel,&lt;br/&gt;
Yes my original motivation was to use this in the visualizer.&lt;br/&gt;
Note that I made the location transient for now because some tests are comparing serialized physical plans to a saved binary versions, which is very brittle and not precise enough. I.E.: it fails whatever you changed to the physical plan serialized representation.&lt;/p&gt;

&lt;p&gt;explanation of the data&lt;br/&gt;
M: A&lt;span class=&quot;error&quot;&gt;&amp;#91;1,4&amp;#93;&lt;/span&gt;,A&lt;span class=&quot;error&quot;&gt;&amp;#91;3,4&amp;#93;&lt;/span&gt;,B&lt;span class=&quot;error&quot;&gt;&amp;#91;2,4&amp;#93;&lt;/span&gt; C: A&lt;span class=&quot;error&quot;&gt;&amp;#91;3,4&amp;#93;&lt;/span&gt;,B&lt;span class=&quot;error&quot;&gt;&amp;#91;2,4&amp;#93;&lt;/span&gt; R: A&lt;span class=&quot;error&quot;&gt;&amp;#91;3,4&amp;#93;&lt;/span&gt;&lt;br/&gt;
M: Mapper plan contains the following aliases&lt;br/&gt;
C: Combiner plan contains the following aliases&lt;br/&gt;
R: reduce plane contains the following aliases&lt;br/&gt;
each item is:&lt;br/&gt;
alias&lt;span class=&quot;error&quot;&gt;&amp;#91;line,offset&amp;#93;&lt;/span&gt;&lt;br/&gt;
This could also be split in 3 different properties:&lt;br/&gt;
pig.alias.location.mapper: A&lt;span class=&quot;error&quot;&gt;&amp;#91;1,4&amp;#93;&lt;/span&gt;,A&lt;span class=&quot;error&quot;&gt;&amp;#91;3,4&amp;#93;&lt;/span&gt;,B&lt;span class=&quot;error&quot;&gt;&amp;#91;2,4&amp;#93;&lt;/span&gt;&lt;br/&gt;
pig.alias.location.combiner: A&lt;span class=&quot;error&quot;&gt;&amp;#91;3,4&amp;#93;&lt;/span&gt;,B&lt;span class=&quot;error&quot;&gt;&amp;#91;2,4&amp;#93;&lt;/span&gt;&lt;br/&gt;
pig.alias.location.reducer: A&lt;span class=&quot;error&quot;&gt;&amp;#91;3,4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Yes, we should also make sure merged operators info is maintained. &lt;/p&gt;

&lt;p&gt;I will take care of the white spaces.&lt;/p&gt;

&lt;p&gt;There is a test here:&lt;br/&gt;
test/org/apache/pig/newplan/logical/relational/TestLocationInPhysicalPlan.java&lt;/p&gt;
</comment>
                            <comment id="13270978" author="daijy" created="Wed, 9 May 2012 01:39:57 +0100"  >&lt;p&gt;Great, +1.&lt;/p&gt;</comment>
                            <comment id="13272465" author="julienledem" created="Thu, 10 May 2012 17:33:27 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2659&quot; title=&quot;add source location of the aliases in the physical plan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2659&quot;&gt;&lt;del&gt;PIG-2659&lt;/del&gt;&lt;/a&gt;_a.patch is removing the unnecessary whitespace changes&lt;/p&gt;</comment>
                            <comment id="13272565" author="julienledem" created="Thu, 10 May 2012 19:06:32 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2659&quot; title=&quot;add source location of the aliases in the physical plan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2659&quot;&gt;&lt;del&gt;PIG-2659&lt;/del&gt;&lt;/a&gt;_b.patch rebased patch&lt;/p&gt;</comment>
                            <comment id="13273833" author="julienledem" created="Sat, 12 May 2012 05:22:44 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2659&quot; title=&quot;add source location of the aliases in the physical plan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2659&quot;&gt;&lt;del&gt;PIG-2659&lt;/del&gt;&lt;/a&gt;_c.patch&lt;br/&gt;
makes the field not transient anymore so that it will be accessible in the backend. this is necessary as PigStats deserializes the plan from the job conf.&lt;br/&gt;
TestMRCompiler&apos;s golden files had to be updated accordingly when it should not have.&lt;br/&gt;
I opened a JIRA for this (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2698&quot; title=&quot;org.apache.pig.test.TestMRCompiler should be rewritten to actually verify the result is correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2698&quot;&gt;PIG-2698&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13273837" author="julienledem" created="Sat, 12 May 2012 05:56:00 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2659&quot; title=&quot;add source location of the aliases in the physical plan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2659&quot;&gt;&lt;del&gt;PIG-2659&lt;/del&gt;&lt;/a&gt;_d.patch&lt;br/&gt;
adds logging as in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2688&quot; title=&quot;Log the aliases being processed for the current job&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2688&quot;&gt;&lt;del&gt;PIG-2688&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12523881" name="PIG-2659.patch" size="198849" author="julienledem" created="Mon, 23 Apr 2012 23:12:56 +0100"/>
                            <attachment id="12526365" name="PIG-2659_a.patch" size="41677" author="julienledem" created="Thu, 10 May 2012 17:33:27 +0100"/>
                            <attachment id="12526385" name="PIG-2659_b.patch" size="41699" author="julienledem" created="Thu, 10 May 2012 19:06:32 +0100"/>
                            <attachment id="12526602" name="PIG-2659_c.patch" size="53339" author="julienledem" created="Sat, 12 May 2012 05:22:42 +0100"/>
                            <attachment id="12526607" name="PIG-2659_d.patch" size="54158" author="julienledem" created="Sat, 12 May 2012 05:56:00 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 May 2012 17:20:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>237353</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaykn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97912</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>