<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:06:33 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-4109/PIG-4109.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-4109] register local jar fail on Windows when Pig script is remote</title>
                <link>https://issues.apache.org/jira/browse/PIG-4109</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description></description>
                <environment></environment>
        <key id="12732347">PIG-4109</key>
            <summary>register local jar fail on Windows when Pig script is remote</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Aug 2014 18:50:25 +0100</created>
                <updated>Fri, 21 Nov 2014 05:59:30 +0000</updated>
                            <resolved>Tue, 12 Aug 2014 22:58:50 +0100</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14087952" author="daijy" created="Wed, 6 Aug 2014 18:58:09 +0100"  >&lt;p&gt;The following script fail on Windows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
pig wasb:&lt;span class=&quot;code-comment&quot;&gt;//daijytest@hdponazuretesting2.blob.core.windows.net/1.pig&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;1.pig:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
register c:/hdp/hive-0.13.0.2.1.3.0-1948/hcatalog/share/hcatalog/hive-hcatalog-core-0.13.0.2.1.3.0-1948.jar
a = load &apos;1.txt&apos;;
store a into &apos;output&apos;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Error message:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException
	at org.apache.pig.impl.io.FileLocalizer.fetchFilesInternal(FileLocalizer.java:735)
	at org.apache.pig.impl.io.FileLocalizer.fetchFiles(FileLocalizer.java:703)
	at org.apache.pig.PigServer.registerJar(PigServer.java:512)
	at org.apache.pig.PigServer.addJarsFromProperties(PigServer.java:238)
	at org.apache.pig.PigServer.&amp;lt;init&amp;gt;(PigServer.java:225)
	at org.apache.pig.PigServer.&amp;lt;init&amp;gt;(PigServer.java:207)
	at org.apache.pig.tools.grunt.Grunt.&amp;lt;init&amp;gt;(Grunt.java:47)
	at org.apache.pig.Main.run(Main.java:611)
	at org.apache.pig.Main.main(Main.java:168)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The pig script does not necessary live in wasb, as long as it is remote, the issue manifest.&lt;/p&gt;</comment>
                            <comment id="14088215" author="daijy" created="Wed, 6 Aug 2014 21:37:19 +0100"  >&lt;p&gt;If script is remote, the register command assumes jar without scheme is also remote. However, in Windows, if a jar start with driver:, it is obvious it is local. Attach a patch to detect that.&lt;/p&gt;</comment>
                            <comment id="14092415" author="rohini" created="Mon, 11 Aug 2014 05:08:42 +0100"  >&lt;p&gt;Why set pig.jars.relative.to.dfs to true in the test? Isn&apos;t that actually false with the above script?&lt;/p&gt;</comment>
                            <comment id="14092466" author="daijy" created="Mon, 11 Aug 2014 06:46:10 +0100"  >&lt;p&gt;The test is to simulate the script is remote (hdfs, s3, wasb, etc). In Main, we set &quot;pig.jars.relative.to.dfs&quot; to true if the script is remote, and thus all registered jar does not has the full scheme is also remote.&lt;/p&gt;</comment>
                            <comment id="14092803" author="rohini" created="Mon, 11 Aug 2014 15:17:32 +0100"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14094760" author="daijy" created="Tue, 12 Aug 2014 22:58:50 +0100"  >&lt;p&gt;Patch committed to trunk. Thanks Rohini for review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12660222" name="PIG-4109-1.patch" size="2008" author="daijy" created="Wed, 6 Aug 2014 21:37:19 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 11 Aug 2014 04:08:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hzsgon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>