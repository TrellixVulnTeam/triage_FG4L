<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 05:03:35 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-893/PIG-893.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-893] support cast of chararray to other simple types</title>
                <link>https://issues.apache.org/jira/browse/PIG-893</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Pig should support casting of chararray to integer,long,float,double,bytearray. If the conversion fails for reasons such as overflow, cast should return null and log a warning.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431052">PIG-893</key>
            <summary>support cast of chararray to other simple types</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zjffdu">Jeff Zhang</assignee>
                                    <reporter username="thejas">Thejas M Nair</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jul 2009 18:27:20 +0100</created>
                <updated>Wed, 24 Mar 2010 22:13:10 +0000</updated>
                            <resolved>Wed, 12 Aug 2009 07:31:38 +0100</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12733773" author="sms" created="Tue, 21 Jul 2009 19:34:23 +0100"  >&lt;p&gt;What are the semantics of chararray (string) to numeric types? &lt;/p&gt;

&lt;p&gt;Pig does not support conversion of any non-bytearray type to bytearray. The proposal in the jira description is minimalistic. Does it match with that of SQL? &lt;/p&gt;

&lt;p&gt;Without clear articulation about what these things mean, we cannot/should not support chararray to numeric type conversions. PiggyBank already supports UDFs that convert strings to int, double, etc.&lt;/p&gt;

&lt;p&gt;It&apos;s a nice to have, as part of the language but its better positioned as a UDF. If clear semantics are laid out then making it part of the language will be a matter of consensus.&lt;/p&gt;</comment>
                            <comment id="12735665" author="alangates" created="Mon, 27 Jul 2009 18:20:32 +0100"  >&lt;p&gt;Semantics of chararray to numeric conversion seem straightforward.  Adopting standards similar to Java&apos;s Integer.valueOf() etc. would make sense.&lt;/p&gt;

&lt;p&gt;I do not think these should be UDFs, they should be part of the language definition.&lt;/p&gt;</comment>
                            <comment id="12735676" author="dvryaboy" created="Mon, 27 Jul 2009 18:39:37 +0100"  >&lt;p&gt;+1 for string-&amp;gt;numeric conversion via casting.  &lt;/p&gt;</comment>
                            <comment id="12738420" author="zjffdu" created="Mon, 3 Aug 2009 17:39:49 +0100"  >&lt;p&gt;attach the patch including the TestCase.&lt;/p&gt;

&lt;p&gt;I extract the bytesTo* method from Utf8StorageConverter to CastUtil. Then these methods can been reused by other objects.&lt;/p&gt;
</comment>
                            <comment id="12739568" author="dvryaboy" created="Wed, 5 Aug 2009 16:22:48 +0100"  >&lt;p&gt;Jeff,&lt;br/&gt;
Thanks for the contribution!&lt;br/&gt;
Just a few comments:&lt;/p&gt;

&lt;p&gt;0) could you name your patch files *.patch? That makes them easier to review, as the proper highlighting mode is chosen.&lt;/p&gt;

&lt;p&gt;1) Other class names in the utils package imply that the class name for this should be CastUtils&lt;/p&gt;

&lt;p&gt;2) Spacing in POCast.java is a bit messed up. Please make sure all spacing is to project conventions&lt;/p&gt;

&lt;p&gt;3) In TestSchema &amp;#8211; Numberic isn&apos;t a word, you mean &quot;Numeric&quot; (no &quot;b&quot;)&lt;/p&gt;

&lt;p&gt;4) I am not sure about naming the methods chararrayToxxxx . Since they take String as an argument, being in Java-land, I think it would be more straightforward to say stringToxxx .&lt;/p&gt;

&lt;p&gt;5) Implementation of the casts &amp;#8211; you call str.toBytes(), and hand off to bytesToXXX  method. That method, in turn, converts bytes back into a string, and proceeds to do the conversion. That seems like redundant work. Wouldn&apos;t it be better to have stringToXXX peform the conversion, and have bytesToXXX covert to string, then call the stringToXXX method?&lt;/p&gt;

&lt;p&gt;6)  TestCharArray2Numeric.java &amp;#8211; the convention is to spell out &quot;To&quot; instead of using the number 2&lt;/p&gt;

&lt;p&gt;7)  The tests in TestCharArray2Numeric look very similar to each other. Could you pull out the common functionality so the code is only repeated once?  &lt;br/&gt;
About the tests themselves:  Since you are just testing conversions, this can be a straightforward unit test &amp;#8211; make a few strings, assert that they convert to the expected value. Hit the edge cases (overflows, special cases for parsing, etc).  We don&apos;t need to spin up a whole Pig query.&lt;/p&gt;

&lt;p&gt;8) I don&apos;t like testing random values, as this creates tests that might sometimes pass, and sometimes not. Recommend using known data for reproducible test results.&lt;/p&gt;

&lt;p&gt;9) You extracted functionality from Utf8StorageConverter by duplicating the code; I would prefer to see Utf8StorageConverter modified to hand off conversions to CastUtils&lt;/p&gt;
</comment>
                            <comment id="12740025" author="hadoopqa" created="Thu, 6 Aug 2009 13:28:04 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12415373/Pig_893_Patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12415373/Pig_893_Patch.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 801460.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 8 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 161 release audit warnings (more than the trunk&apos;s current 160 warnings).&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/149/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/149/testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/149/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/149/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/149/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/149/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/149/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/149/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12740188" author="alangates" created="Thu, 6 Aug 2009 19:32:51 +0100"  >&lt;p&gt;CastUtil should not include byteToX() calls.  Pig never casts from ByteArray to a type, it leaves that to loaders because Pig has no idea what the representation of the data is in the bytes.  It might be UTF8 (as it is for PigStorage) or something entirely different.&lt;/p&gt;

&lt;p&gt;CastUtil.stringToX calls should not call byteToX methods.  This is inefficient since those methods just turn the bytes back into a String and then do the conversion explicitly.&lt;/p&gt;</comment>
                            <comment id="12741094" author="zjffdu" created="Sun, 9 Aug 2009 16:29:35 +0100"  >&lt;p&gt;Dmitriy,&lt;br/&gt;
Thank you for your review and comments. I updated the patch and here&apos;s a comment about the patch. I did not remove the testcase with pig script, because executing a pig script involves more things,such as type checking. So It would be safer to add such testcase. Besides, I also add a testcase for straightforward conversion.&lt;/p&gt;

&lt;p&gt;Alan,&lt;br/&gt;
Thank you for your comments. Now I understand why pig put bytesTo*** in the LoadFunc.&lt;/p&gt;
</comment>
                            <comment id="12741500" author="hadoopqa" created="Mon, 10 Aug 2009 20:12:29 +0100"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12415997/Pig_893.Patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12415997/Pig_893.Patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 801865.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 4 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    -1 release audit.  The applied patch generated 161 release audit warnings (more than the trunk&apos;s current 160 warnings).&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/155/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/155/testReport/&lt;/a&gt;&lt;br/&gt;
Release audit warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/155/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/155/artifact/trunk/patchprocess/releaseAuditDiffWarnings.txt&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/155/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/155/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/155/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/155/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12741521" author="olgan" created="Mon, 10 Aug 2009 21:00:03 +0100"  >&lt;p&gt;The reason for the release audit issue is because one of the new files is missing the apache license header. Not sure what is the issue with find bugs. These issues need to be resolved or at least investigated before the patch can be committed.&lt;/p&gt;</comment>
                            <comment id="12741880" author="zjffdu" created="Tue, 11 Aug 2009 14:58:36 +0100"  >&lt;p&gt;Updated the patch.&lt;br/&gt;
1. Add license header. (for audit warning)&lt;br/&gt;
2. Change new Long(long)  to Long.valueOf(long) for findbug warning&lt;/p&gt;</comment>
                            <comment id="12741963" author="hadoopqa" created="Tue, 11 Aug 2009 17:57:27 +0100"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12416201/Pig_893.Patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12416201/Pig_893.Patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 801865.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/156/testReport/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/156/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/156/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/156/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/156/console&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/156/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12742144" author="alangates" created="Wed, 12 Aug 2009 01:38:09 +0100"  >&lt;p&gt;I&apos;m reviewing this patch.&lt;/p&gt;</comment>
                            <comment id="12742234" author="alangates" created="Wed, 12 Aug 2009 07:31:38 +0100"  >&lt;p&gt;Patch checked in.  Thanks Jeff for your work on this.&lt;/p&gt;</comment>
                            <comment id="12742319" author="hudson" created="Wed, 12 Aug 2009 13:30:40 +0100"  >&lt;p&gt;Integrated in Pig-trunk #520 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-trunk/520/&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-trunk/520/&lt;/a&gt;)&lt;br/&gt;
    :  Added string -&amp;gt; integer, long, float, and double casts.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12416201" name="Pig_893.Patch" size="20407" author="zjffdu" created="Tue, 11 Aug 2009 14:58:36 +0100"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 21 Jul 2009 18:34:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164444</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyak5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95575</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-893&quot; title=&quot;support cast of chararray to other simple types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-893&quot;&gt;&lt;strike&gt;PIG-893&lt;/strike&gt;&lt;/a&gt;:  Added casts from chararray to int, long, float, and double.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>