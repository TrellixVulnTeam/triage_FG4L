<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:59:35 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2165/PIG-2165.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2165] Need a way to deal with params and param_file in embedded pig in python</title>
                <link>https://issues.apache.org/jira/browse/PIG-2165</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;I am using embedded pig in python and cannot pass param key value pairs to the python script. The only way to pass params  seem to be by passing it in the bind command.&lt;/p&gt;

&lt;p&gt;Is there a plan to have command line parameters to a pig embedded python script? Similar needs for param_file and using the environment variables.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Supreeth&lt;/p&gt;</description>
                <environment></environment>
        <key id="12514131">PIG-2165</key>
            <summary>Need a way to deal with params and param_file in embedded pig in python</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="supreeth">Supreeth</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jul 2011 23:20:17 +0100</created>
                <updated>Tue, 10 Feb 2015 20:50:55 +0000</updated>
                            <resolved>Sun, 6 Nov 2011 08:43:36 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13065725" author="julienledem" created="Fri, 15 Jul 2011 06:38:07 +0100"  >&lt;p&gt;I see two options:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;One way would be to use the pig parameters and assign the values to global variables.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;pig -p foo=bar myscript.py&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and then in the script, the variable foo contains &quot;bar&quot;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The other would be to populate sys.argv with the command line parameters
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;sys.argv = [ &lt;span class=&quot;code-quote&quot;&gt;&quot;pig&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;-p&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo=bar&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;myscript.py&quot;&lt;/span&gt; ]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13066048" author="alangates" created="Fri, 15 Jul 2011 17:14:25 +0100"  >&lt;p&gt;I like the idea of only passing the parameters from either the command line or the parameters file.  I don&apos;t see why the Python script should care about other parameters that will be Pig specific.  Whether those parameters are placed in global variables, in sys.argv, or in a separate dictionary (pig_argv?) I don&apos;t have an opinion on.&lt;/p&gt;</comment>
                            <comment id="13066084" author="julienledem" created="Fri, 15 Jul 2011 18:15:12 +0100"  >&lt;p&gt;I agree, on second thoughts my second option is a bad idea as the script can be launched either through the command line or programmatically through the java API. In that case the only parameters that are available are the ones passed through -p.&lt;br/&gt;
There&apos;s no good way to reuse sys.argv here, it is not really a good fit as it is a list of strings.&lt;/p&gt;

&lt;p&gt;Suggestions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a separate dictionary: Pig.getParameters() ?&lt;/li&gt;
	&lt;li&gt;placed in global variables&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13100777" author="daijy" created="Fri, 9 Sep 2011 00:00:20 +0100"  >&lt;p&gt;I think we shall stick with the conventional Pig command line options (-p, -m). I don&apos;t think we need to invent new ways specific for Pig embedding.&lt;/p&gt;</comment>
                            <comment id="13106928" author="julienledem" created="Sat, 17 Sep 2011 01:00:20 +0100"  >&lt;p&gt;Hi Daniel,&lt;br/&gt;
Are you suggesting to use the preprocessor to replace $variable with its value passed in &quot;-p variable=value&quot; ?&lt;/p&gt;</comment>
                            <comment id="13106932" author="daijy" created="Sat, 17 Sep 2011 01:08:00 +0100"  >&lt;p&gt;Yes, for &quot;$var&quot; in your script, it can be either a bounded variable, or a command line parameter. I treat them the same in patch.&lt;/p&gt;</comment>
                            <comment id="13126271" author="julienledem" created="Thu, 13 Oct 2011 01:39:32 +0100"  >&lt;p&gt;Hi Daniel,&lt;br/&gt;
This works but I would rather have the parameters set to global variables in the Interpreter.&lt;br/&gt;
Using the pre-processor is less intuitive as parameter values will need different escaping depending of the language or the location of the script where they are used. For example in a string vs not. Assigning to a global variable avoids this kind of issue.&lt;br/&gt;
Julien  &lt;/p&gt;</comment>
                            <comment id="13126291" author="daijy" created="Thu, 13 Oct 2011 02:31:16 +0100"  >&lt;p&gt;Thanks Julien. I&apos;m fine with global variable approach. I can submit another patch.&lt;/p&gt;</comment>
                            <comment id="13134533" author="daijy" created="Mon, 24 Oct 2011 22:45:19 +0100"  >&lt;p&gt;Hi, Julien, &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2165&quot; title=&quot;Need a way to deal with params and param_file in embedded pig in python&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2165&quot;&gt;&lt;del&gt;PIG-2165&lt;/del&gt;&lt;/a&gt;-1.patch does use global variable PigContext.params to pass params. What it does is:&lt;br/&gt;
1. Put params into PigContext.params when processing command line&lt;br/&gt;
2. Adding PigContext.params to do variable binding:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// plist is the variable array to bind
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getScriptContext().getPigContext().getParams()!=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; param : getScriptContext().getPigContext().getParams()) {
                plist.add(param);
            }
        }
        &lt;span class=&quot;code-comment&quot;&gt;// Use plist to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; the binding&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;3. For param_file, instead of reading and put into params, I delegate it to ParameterSubstitutionPreprocessor, which already handles parameter_file:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    psp.genSubstitutedFile(in, writer, plist.toArray(params), scriptContext.getPigContext().getParamFiles().toArray(type1));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;4. I also did some refactory in main() to use PigContext.params&lt;/p&gt;</comment>
                            <comment id="13144463" author="ashutoshc" created="Fri, 4 Nov 2011 23:52:32 +0000"  >&lt;p&gt;+1 Looks good to me. If its easy enough, it will be good to add e2e test with param file as well, since patch touches upon that part of code.&lt;/p&gt;</comment>
                            <comment id="13144959" author="daijy" created="Sun, 6 Nov 2011 07:59:49 +0000"  >&lt;p&gt;Add new test case as Ashutosh suggest.&lt;/p&gt;</comment>
                            <comment id="13144960" author="daijy" created="Sun, 6 Nov 2011 08:43:36 +0000"  >&lt;p&gt;Patch committed to both trunk and 0.10 branch.&lt;/p&gt;</comment>
                            <comment id="13144962" author="daijy" created="Sun, 6 Nov 2011 08:57:21 +0000"  >&lt;p&gt;Unit test pass. test-patch:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; -1 overall.  &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 @author.  The patch does not contain any @author tags.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 tests included.  The patch appears to include 3 new or modified tests.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     -1 release audit.  The applied patch generated 468 release audit warnings (more than the trunk&apos;s current 461 warnings).&lt;/p&gt;

&lt;p&gt;No new files added, ignore release audit warning.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12474632">PIG-1630</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12595260">PIG-2762</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12494870" name="PIG-2165-1.patch" size="8476" author="daijy" created="Fri, 16 Sep 2011 22:50:46 +0100"/>
                            <attachment id="12502653" name="PIG-2165-2.patch" size="9057" author="daijy" created="Sun, 6 Nov 2011 08:41:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 15 Jul 2011 05:38:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35758</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hy3tx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56171</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>