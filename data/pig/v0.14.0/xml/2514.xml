<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun May 17 04:50:59 UTC 2015

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/PIG-2514/PIG-2514.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[PIG-2514] REGEX_EXTRACT not returning correct group with non greedy regex</title>
                <link>https://issues.apache.org/jira/browse/PIG-2514</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;REGEX_EXTRACT is using Matcher.find() instead of Matcher.matches() and so does not work with some non greedy regular expression.&lt;/p&gt;

&lt;p&gt;Is it the wanted behavior?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Romain&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;The matches method attempts to match the entire input sequence against the pattern.&lt;/p&gt;

&lt;p&gt;The find method scans the input sequence looking for the next subsequence that matches the pattern.&lt;/p&gt;



&lt;p&gt;    System.out.println(&quot;Pig&apos;s way with m.find()&quot;);&lt;br/&gt;
    String a = &quot;hdfs://mygrid.com/projects/&quot;;&lt;br/&gt;
    Matcher m = Pattern.compile(&quot;(.+?)/?&quot;).matcher(a);&lt;br/&gt;
    System.out.println(m.find());&lt;br/&gt;
    System.out.println(m.group(1));&lt;br/&gt;
    System.out.println(m.start());&lt;br/&gt;
    System.out.println(m.end());&lt;/p&gt;

&lt;p&gt;    System.out.println(&quot;\nm.matches()&quot;);&lt;br/&gt;
    a = &quot;hdfs://mygrid.com/projects/&quot;;&lt;br/&gt;
    m = Pattern.compile(&quot;(.+?)/?&quot;).matcher(a);&lt;br/&gt;
    System.out.println(m.matches());&lt;br/&gt;
    System.out.println(m.group(1));&lt;br/&gt;
    System.out.println(m.start());&lt;br/&gt;
    System.out.println(m.end());&lt;/p&gt;

&lt;p&gt;    System.out.println(&quot;\nREGEX_EXTRACT m.find()&quot;);&lt;br/&gt;
    Tuple t = TupleFactory.getInstance().newTuple();&lt;br/&gt;
    t.append(a);&lt;br/&gt;
    t.append(&quot;(.+?)/?&quot;);&lt;br/&gt;
    t.append(1);&lt;br/&gt;
    System.out.println(new TestPigExtractAll().new REGEX_EXTRACT().exec(t));&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541546">PIG-2514</key>
            <summary>REGEX_EXTRACT not returning correct group with non greedy regex</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="romainr">Romain Rigaux</assignee>
                                    <reporter username="romainr">Romain Rigaux</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2012 01:40:52 +0000</created>
                <updated>Fri, 22 Feb 2013 04:54:09 +0000</updated>
                            <resolved>Fri, 2 Mar 2012 00:08:39 +0000</resolved>
                                    <version>0.11</version>
                                    <fixVersion>0.11</fixVersion>
                                    <component>internal-udfs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13201958" author="romainr" created="Tue, 7 Feb 2012 01:44:03 +0000"  >&lt;p&gt;Patch adding a non greedy regex test that fails currently.&lt;/p&gt;

&lt;p&gt;Patch changing the Matcher method used from find() to matches(). It makes the tests pass.&lt;/p&gt;</comment>
                            <comment id="13202627" author="daijy" created="Tue, 7 Feb 2012 18:57:08 +0000"  >&lt;p&gt;Well this is backward incompatible. Shall we have a new UDF for that?&lt;/p&gt;</comment>
                            <comment id="13205005" author="romainr" created="Thu, 9 Feb 2012 23:06:18 +0000"  >&lt;p&gt;A simple workaround is to use REGEX_EXTRACT_ALL and get the $index you need:&lt;/p&gt;

&lt;p&gt;e.g. REGEX_EXTRACT_ALL(value, &apos;(.+?)/?&apos;).$0&lt;/p&gt;

&lt;p&gt;Maybe just documenting REGEX_EXTRACT is enough: for non greedy matching, use REGEX_EXTRACT_ALL instead&lt;/p&gt;

&lt;p&gt;Having 3 REGEX_EXTRACT UDF seems confusing.&lt;/p&gt;</comment>
                            <comment id="13206737" author="daijy" created="Mon, 13 Feb 2012 08:02:00 +0000"  >&lt;p&gt;I agree adding another UDF adds confusion, however, the workaround requires change of existing Pig script, which we try to avoid. How about using a boolean construct argument for greedy?&lt;/p&gt;</comment>
                            <comment id="13207418" author="romainr" created="Tue, 14 Feb 2012 01:06:11 +0000"  >&lt;p&gt;This is a good idea.&lt;/p&gt;

&lt;p&gt;I am going to add a default constructor and another one with a boolean argument for setting to greedy (switching from find() to matches()).&lt;/p&gt;</comment>
                            <comment id="13213894" author="romainr" created="Wed, 22 Feb 2012 19:25:20 +0000"  >&lt;p&gt;Here is the constructor with optional boolean version (probably better than adding one more (optional) parameter to the exec tuple?).&lt;/p&gt;

&lt;p&gt;I put 2 lines of doc too.&lt;/p&gt;</comment>
                            <comment id="13214270" author="daijy" created="Thu, 23 Feb 2012 03:40:45 +0000"  >&lt;p&gt;Looks good. Better to change REGEX_EXTRACT_ALL to make it symmetric.&lt;/p&gt;</comment>
                            <comment id="13217819" author="romainr" created="Tue, 28 Feb 2012 01:54:07 +0000"  >&lt;p&gt;I can add a it to REGEX_EXTRACT_ALL, just the defaults will be reversed as REGEX_EXTRACT_ALL is using matches() by default (and REGEX_EXTRACT find() by default).&lt;/p&gt;</comment>
                            <comment id="13219529" author="romainr" created="Wed, 29 Feb 2012 20:45:28 +0000"  >&lt;p&gt;Here it is, and I put a more explicit wording.&lt;/p&gt;</comment>
                            <comment id="13220520" author="daijy" created="Fri, 2 Mar 2012 00:08:39 +0000"  >&lt;p&gt;Unit test pass. test-patch:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; -1 overall.  &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 @author.  The patch does not contain any @author tags.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 tests included.  The patch appears to include 3 new or modified tests.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     -1 release audit.  The applied patch generated 535 release audit warnings (more than the trunk&apos;s current 530 warnings).&lt;/p&gt;

&lt;p&gt;javadoc and release audit warning is unrelated. &lt;/p&gt;

&lt;p&gt;Patch committed to trunk.&lt;/p&gt;

&lt;p&gt;Thanks Romain!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12515636" name="PIG-2514-doc.patch" size="644" author="romainr" created="Wed, 22 Feb 2012 19:25:20 +0000"/>
                            <attachment id="12516603" name="PIG-2514.2.patch" size="6243" author="romainr" created="Wed, 29 Feb 2012 20:45:28 +0000"/>
                            <attachment id="12515635" name="PIG-2514.patch" size="3175" author="romainr" created="Wed, 22 Feb 2012 19:25:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Feb 2012 18:57:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226833</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2|hyaxkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97751</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>